import{r as f,a$ as Or,b0 as jr,b1 as Er,b2 as It,b3 as Pr,b4 as Mr,b5 as eo,b6 as yt,b7 as Rr,b8 as Dr,b9 as ve,ba as Lr,bb as $r,bc as Nr,bd as Fr,b as mt,be as to,A as be,J as Ce,k as _,bf as no,bg as Br,s as z,bh as Ur,bi as zr,bj as pn,bk as oo,bl as ro,bm as Re,al as pe,bn as Tn,bo as Ve,X as mn,bp as kt,bq as Y,a6 as Ge,a7 as Ke,u as fe,br as Je,aV as et,bs as tt,bt as jt,bu as Hr,bv as Tt,p as I,bw as Nt,bx as Vr,by as Gr,bz as gn,bA as ht,bB as Kr,bC as io,bD as ge,g as u,bE as Yr,j as t,bF as qr,bG as Wr,bH as Q,bI as pt,bJ as fn,l as w,h as te,c as q,an as Xr,aJ as Qr,ap as Zr,bK as ao,M as F,S as h,a0 as Ye,q as De,ay as Jr,bL as Wt,f as J,bM as ei,aQ as Se,B as Le,I as gt,i as we,aP as j,ao as so,bN as ti,ax as wt,a8 as ni,bO as oi,bP as co,bQ as ri,bR as Xe,bS as Et,bT as Ft,bU as ii,bV as ai,bW as si,bX as ci,bY as li,_ as ye,T as Fe,H as vn,bZ as di,b_ as he,b$ as ui,c0 as hi,c1 as bn,c2 as $e,c3 as pi,c4 as mi,c5 as gi,c6 as fi,c7 as vi,c8 as lo,aB as bi,c9 as yi,ca as xi,cb as _i,cc as wi,cd as Ae,ce as uo,cf as At,cg as Qe,ch as Ci,ci as yn,cj as Xt,O as D,a2 as ho,ck as po,cl as Si,cm as Ii,ar as ki,cn as Ti,co as Ai,cp as Oi,cq as ji,cr as mo,cs as Ei,ct as Pi,as as Bt,ak as qe,aw as An,G as go,cu as Pt,cv as Mi,cw as Ri,cx as Di,w as nt,cy as Ue,t as lt,cz as xn,cA as Li,cB as ke,cC as $i,cD as fo,cE as Ni,cF as vo,cG as On,cH as Fi,ab as bo,cI as yo,cJ as ne,cK as Qt,cL as Bi,F as Mt,cM as Ui,cN as zi,cO as Hi,cP as Vi,cQ as Zt,cR as jn,cS as Gi,cT as Ki,cU as Yi,cV as qi,cW as Wi,cX as ue,cY as oe,cZ as Xi,c_ as Qi,c$ as Zi,d0 as xo,d1 as _o,d2 as Ji,d3 as Be,d4 as Ct,d5 as ea,d6 as ta,d7 as na,d8 as oa,d9 as ze,da as ra,db as ia,dc as aa,dd as sa,de as ft,df as vt,dg as ca,dh as la,W as wo,di as Co,dj as da,dk as Jt,dl as en,dm as ua,dn as ha,dp as pa,dq as Ut,dr as En,ds as So,dt as ma,du as ga,dv as fa,dw as va,dx as _n,dy as ba,dz as ya,dA as xa,dB as Rt,dC as Dt,dD as _a,dE as wa,dF as Ca,dG as Sa,dH as Ia,dI as ka,dJ as Ta,dK as Aa,dL as Oa,dM as ja,dN as Ea,dO as Ot,dP as dt,dQ as Pa,dR as tn,dS as Io,dT as Ma,dU as Ra,dV as ko,dW as To,dX as Da,dY as La,dZ as $a,d_ as Na,d$ as Fa,e0 as Ba,e1 as Ua,e2 as nn,e3 as Pn,e4 as Ao,e5 as Oo,e6 as za,e7 as Ha,a3 as Va,V as jo,e8 as Ga,e9 as Eo,ea as wn,eb as Po,ec as Ka,ed as Mo,ee as Ro,ef as Ya,eg as qa,eh as Wa,ei as zt,ej as Do,ek as Xa,el as Qa,em as Lo,en as Za,eo as Ja,ep as es,eq as ts,er as $o,es as ns,v as os,et as rs,eu as is,ev as as,ew as ss,ex as No,ey as cs,ez as ls,eA as ds,eB as us,E as Ht,P as hs,x as ps,Z as ms,R as gs,eC as fs,eD as vs,z as Fo,eE as bs,eF as ys,eG as xs,eH as _s,eI as Bo,aU as ws,eJ as Ze,eK as Uo,eL as Cs,eM as Ss,eN as Is,eO as ks,eP as Ts,eQ as Mn,a4 as As}from"./index-12ab17f1.js";import{D as Ne,a as Os}from"./ContentSection-d450bf80.js";import{u as js,P as Es,a as ce,M as Ps}from"./UnopenedIsolatedPositions-5a4f6f63.js";import{F as Ms,a as de}from"./FillsTable-6f5a0dea.js";import{O as Rs,a as me}from"./OrdersTable-922f5bb7.js";import{M as Ee}from"./ActionsTableCell-517ee0d5.js";import{d as Ds}from"./dark-26010354.js";import{T as Ls}from"./TriangleIndicator-f26e9242.js";import{u as $s,M as Ns}from"./MarketFilter-b289d076.js";import"./tradeViewMixins-e79b6162.js";var Fs=Vs,Vt=zo(f),Bs=zo(Or),Us=jr,zs=["children","x","x0","x1","y","y0","y1","data","defined","className","curve","innerRef"];function zo(e){return e&&e.__esModule?e:{default:e}}function on(){return on=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},on.apply(this,arguments)}function Hs(e,n){if(e==null)return{};var o={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(n.indexOf(i)>=0)&&(o[i]=e[i]);return o}function Vs(e){var n=e.children,o=e.x,r=e.x0,i=e.x1,s=e.y,a=e.y0,c=e.y1,d=e.data,p=d===void 0?[]:d,l=e.defined,g=l===void 0?function(){return!0}:l,y=e.className,C=e.curve,v=e.innerRef,m=Hs(e,zs),b=(0,Us.area)({x:o,x0:r,x1:i,y:s,y0:a,y1:c,defined:g,curve:C});return n?Vt.default.createElement(Vt.default.Fragment,null,n({path:b})):Vt.default.createElement("path",on({ref:v,className:(0,Bs.default)("visx-area",y),d:b(p)||""},m))}function Gs(e){var n=e.range().map(function(p){var l;return(l=Er(p))!=null?l:0}),o=n[0],r=n[1],i=o!=null&&r!=null&&r<o,s=e(0),a=i?[r,o]:[o,r],c=a[0],d=a[1];return i?It(s)?Math.min(Math.max(c,s),d):d:It(s)?Math.max(s,c):c}var Ks=["PathComponent","curve","data","dataKey","lineProps","onBlur","onFocus","onPointerMove","onPointerOut","onPointerUp","onPointerDown","enableEvents","renderLine","xAccessor","x0Accessor","xScale","yAccessor","y0Accessor","yScale"];function Me(){return Me=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},Me.apply(this,arguments)}function Ys(e,n){if(e==null)return{};var o={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(n.indexOf(i)>=0)&&(o[i]=e[i]);return o}function Ho(e){var n,o,r,i=e.PathComponent,s=i===void 0?"path":i,a=e.curve,c=e.data,d=e.dataKey,p=e.lineProps,l=e.onBlur,g=e.onFocus,y=e.onPointerMove,C=e.onPointerOut,v=e.onPointerUp,m=e.onPointerDown,b=e.enableEvents,T=b===void 0?!0:b,x=e.renderLine,k=x===void 0?!0:x,O=e.xAccessor,P=e.x0Accessor,R=e.xScale,B=e.yAccessor,U=e.y0Accessor,H=e.yScale,re=Ys(e,Ks),W=f.useContext(eo),X=W.colorScale,S=W.theme,A=W.horizontal,E=f.useMemo(function(){return P?yt(R,P):void 0},[R,P]),M=f.useMemo(function(){return yt(R,O)},[R,O]),L=f.useMemo(function(){return U?yt(H,U):void 0},[H,U]),$=f.useMemo(function(){return yt(H,B)},[H,B]),N=f.useCallback(function(ee){return It(R(O(ee)))&&It(H(B(ee)))},[R,O,H,B]),G=(n=(o=X==null?void 0:X(d))!=null?o:S==null||(r=S.colors)==null?void 0:r[0])!=null?n:"#222",V=Fr+"-"+d,K=Rr({dataKey:d,enableEvents:T,onBlur:l,onFocus:g,onPointerMove:y,onPointerOut:C,onPointerUp:v,onPointerDown:m,source:V,allowedSources:[Dr,V]}),ie=f.useMemo(function(){var ee=Gs(A?R:H);return A?{x0:E??ee,x1:M,y:$}:{x:M,y0:L??ee,y1:$}},[R,H,A,M,$,E,L]),Z=!!(g||l),ae=f.useCallback(function(ee){var xe=ee.glyphs;return Z?xe.map(function(Oe){return ve.createElement(ve.Fragment,{key:Oe.key},Lr(Me({},Oe,{color:"transparent",onFocus:K.onFocus,onBlur:K.onBlur})))}):null},[Z,K.onFocus,K.onBlur]);return ve.createElement(ve.Fragment,null,ve.createElement(Fs,Me({},ie,re,{curve:a,defined:N}),function(ee){var xe=ee.path;return ve.createElement(s,Me({className:"visx-area",stroke:"transparent",fill:G,strokeLinecap:"round"},re,{d:xe(c)||""},K))}),k&&ve.createElement($r,Me({x:M,y:$,defined:N,curve:a},p),function(ee){var xe=ee.path;return ve.createElement(s,Me({className:"visx-line",fill:"transparent",stroke:G,strokeWidth:2,pointerEvents:"none",strokeLinecap:"round"},p,{d:xe(c)||""}))}),Z&&ve.createElement(Nr,{dataKey:d,data:c,xAccessor:O,yAccessor:B,xScale:R,yScale:H,renderGlyphs:ae}))}Ho.propTypes={renderLine:Mr.bool};const qs=Pr(Ho);function Rn(e){return ve.createElement(qs,e)}const Ws=e=>e.dismissable.hasSeenPredictionMarketIntroDialog,Xs=()=>{const e=mt(),n=to(`/${be.Trade}/:marketId`),{marketId:o}=(n==null?void 0:n.params)??{},r=Ce(),i=_(no),s=_(Br,z),a=_(Ur,z),c=a.length>0,d=zr(),p=_(pn),l=d.data.length>0,g=_(Ws),[y,C]=oo({key:ro.LastViewedMarket,defaultValue:Re}),v=()=>{g||r(Ge(Ke.PredictionMarketIntro()))},m=f.useMemo(()=>a.length===0||a.includes(o??y)?o??y:Re,[c,o]),b=f.useMemo(()=>!l||!pe.pml?!1:d.data.some(T=>T.id===o),[l,o,d.data]);return f.useEffect(()=>{if(!o)C(m),r(Tn(m)),r(Ve()),m!==o&&e(`${be.Trade}/${m}`,{replace:!0});else if(c&&!a.includes(o)&&!b&&l)e(be.Markets,{replace:!0});else{if(C(o),r(Tn(o)),Object.values(mn).includes(o)&&v(),p!=null&&kt.is.ClosePosition(p)&&(s!=null&&s.find(T=>T.id===o)))return;r(Ve())}},[c,l,b,o,e]),f.useEffect(()=>{b?(Y.setMarket(Re),Y.setTradeValue({value:null,field:null})):c&&(Y.setMarket(o??Re),Y.setTradeValue({value:null,field:null}))},[b,i,c,o]),{isViewingUnlaunchedMarket:b,hasLoadedMarkets:l&&c}},Qs=()=>{const{isNotTablet:e}=fe(),n=_(Je),o=_(et),{tickSizeDecimals:r}=_(tt,z)??{},{decimal:i,group:s}=jt(),a=_(Hr);f.useEffect(()=>{if(n&&a&&e){const c=Tt(a,I.Fiat,{decimalSeparator:i,groupSeparator:s,selectedLocale:o,fractionDigits:r??Vr});document.title=`${c} ${n} · ${Nt}`}else document.title=Nt;return()=>{document.title=Nt}},[a,r])},Zs=()=>{const e=_(Gr,z),{limitPriceInput:n,triggerPriceInput:o,trailingPercentInput:r}=e,i=_(gn),{needsLimitPrice:s}=ht(_(Kr,z)),a=_(io,z),c=i&&s&&n!==""&&!(a!=null&&a.price)&&(a==null?void 0:a.size);f.useEffect(()=>{c&&Y.setTradeValue({value:n,field:ge.limitPrice})},[c,n]),f.useEffect(()=>{Y.setTradeValue({value:o,field:ge.triggerPrice})},[o]),f.useEffect(()=>{Y.setTradeValue({value:n,field:ge.limitPrice})},[n]),f.useEffect(()=>{Y.setTradeValue({value:r,field:ge.trailingPercent})},[r])},Js=({className:e,value:n})=>t.jsx(ec,{className:e,value:n,riskLevel:qr.marginRiskLevel(n)}),ec=u(Wr).withConfig({componentId:"sc-xjlwtr-0"})([""," width:1rem;height:1rem;"],({riskLevel:e})=>Yr(e)),tc=({hasError:e,hideDiff:n,isPositive:o,type:r,value:i})=>{const s=i==null?void 0:i.current,a=i==null?void 0:i.postOrder,c=fn(a)&&s!==a&&!n;return t.jsx(nc,{hasInvalidNewValue:!!e,sign:o?Q.Positive:Q.Negative,type:r,withDiff:c,newValue:a,value:s,layout:"row",withBaseFont:!0})},nc=u(pt).withConfig({componentId:"sc-1dmvv2x-0"})(["--diffOutput-value-font:var(--font-mini-book);--diffOutput-valueWithDiff-font:var(--font-mini-book);--diffOutput-newValue-font:var(--font-mini-book);--diffOutput-gap:0.125rem;font:var(--font-base-book);"]),oc=e=>{const n=e==null?void 0:e.current,o=e==null?void 0:e.postOrder;return(o!==null&&n!==o?o:n)??0},rc=()=>{const e=q(),n=Ce(),{complianceState:o}=Xr(),{dydxAccounts:r}=Qr(),i=_(Zr,z),s=_(ao),{freeCollateral:a,marginUsage:c}=i??{},d=i==null?void 0:i.equity,p=fn(a==null?void 0:a.postOrder)&&F(a==null?void 0:a.postOrder).lt(0);return t.jsxs(sc,{children:[t.jsxs(lc,{children:[t.jsx("span",{children:e({key:h.ACCOUNT})}),t.jsxs(dc,{children:[t.jsx(Dn,{state:{isDisabled:!r},onClick:()=>n(Ge(Ke.Withdraw())),shape:Ye.Rectangle,size:De.XSmall,children:e({key:h.WITHDRAW})}),o===Jr.FULL_ACCESS&&t.jsxs(t.Fragment,{children:[t.jsx(Dn,{state:{isDisabled:!r},onClick:()=>n(Ge(Ke.Deposit())),shape:Ye.Rectangle,size:De.XSmall,children:e({key:h.DEPOSIT})}),t.jsx(Wt,{tooltipString:e({key:h.TRANSFER}),children:t.jsx(cc,{shape:Ye.Square,iconName:J.Send,onClick:()=>n(Ge(Ke.Transfer({selectedAsset:ei.USDC})))})})]})]})]}),t.jsx(uc,{children:t.jsx(ac,{items:[{key:"portfolio-value",hideDiff:!0,hasError:!1,isPositive:F(d==null?void 0:d.postOrder).gt(F(d==null?void 0:d.current)),label:e({key:h.PORTFOLIO_VALUE}),type:I.Fiat,value:d},{key:"available-balance",hasError:p,hideDiff:p,isPositive:F(a==null?void 0:a.postOrder).gt(F(a==null?void 0:a.current)),label:e({key:h.AVAILABLE_BALANCE}),type:I.Fiat,value:F(a==null?void 0:a.current).lt(0)&&(a==null?void 0:a.postOrder)===null?void 0:a,slotRight:t.jsx(Wt,{tooltip:"cross-margin-usage",children:t.jsx(Js,{value:oc(c)})})}].map(({key:l,hasError:g,hideDiff:y=!1,isPositive:C,label:v,type:m,value:b,slotRight:T})=>({key:l,label:t.jsxs(ic,{children:[v,g?t.jsx(hc,{iconName:J.CautionCircle}):T]}),value:t.jsx(tc,{hasError:g,hideDiff:y,isPositive:C,type:m,value:b})})),layout:"column",withOverflow:!1,isLoading:s})})]})},ic=u.div.withConfig({componentId:"sc-1b3h5ad-0"})([""," & > :last-child{margin-left:0.4rem;}@media ","{justify-content:end;}"],w.row,te.tablet),ac=u(Se).withConfig({componentId:"sc-1b3h5ad-1"})(["clip-path:inset(0.5rem 1px);padding:0.25rem 1rem;font:var(--font-mini-book);> *{padding:0;display:flex;}@media ","{clip-path:none;> *{padding:1.25rem 1.875rem;}}"],te.tablet),sc=u.div.withConfig({componentId:"sc-1b3h5ad-2"})([""," grid-template-rows:var(--tabs-height) 1fr;@media ","{"," > *:last-child{box-shadow:none;}}"],w.column,te.notTablet,w.withOuterAndInnerBorders),Dn=u(Le).withConfig({componentId:"sc-1b3h5ad-3"})(["margin-right:-0.3rem;"]),cc=u(gt).withConfig({componentId:"sc-1b3h5ad-4"})(["--button-padding:0 0.25rem;--button-border:solid var(--border-width) var(--color-layer-6);"]);var lc=u("header").withConfig({componentId:"sc-1b3h5ad-5"})({display:"grid",gridAutoFlow:"column",alignItems:"center",justifyContent:"space-between",paddingLeft:"1.25rem",paddingRight:"1.25rem",paddingTop:"0px",paddingBottom:"0px",font:"var(--font-small-book)"}),dc=u("div").withConfig({componentId:"sc-1b3h5ad-6"})({display:"inline-flex",alignItems:"center",gap:"1rem",minWidth:"max-content"}),uc=u("div").withConfig({componentId:"sc-1b3h5ad-7"})({display:"grid",gridTemplateAreas:"'stack'","> *,&:before,&:after":{gridArea:"stack"}}),hc=u(we).withConfig({componentId:"sc-1b3h5ad-8"})({color:"var(--color-error)"});const Cn=({className:e})=>{const n=q(),o=_(so),r=_(ti);return t.jsx(mc,{className:e,showAccountInfo:r,children:o===wt.AccountConnected||r?t.jsx(rc,{}):t.jsxs(pc,{children:[t.jsx("p",{children:n({key:{[wt.Disconnected]:h.CONNECT_YOUR_WALLET_EXTENDED,[wt.WalletConnected]:h.MISSING_KEYS_DESCRIPTION}[o]})}),t.jsx(ni,{})]})})},pc=u.div.withConfig({componentId:"sc-wgkabm-0"})(["margin:auto;"," justify-items:center;text-align:center;gap:0.5em;p{"," font:var(--font-small-book);max-width:14.5rem;}"],w.column,w.textLineClamp),mc=u.div.withConfig({componentId:"sc-wgkabm-1"})([""," height:var(--account-info-section-height);min-height:var(--account-info-section-height);",""],w.column,({showAccountInfo:e})=>!e&&j(["padding:1.125em 1.25em 0.875em;"])),Vo="Tabs",[gc,Kh]=oi(Vo,[co]),Go=co(),[fc,Sn]=gc(Vo),vc=f.forwardRef((e,n)=>{const{__scopeTabs:o,value:r,onValueChange:i,defaultValue:s,orientation:a="horizontal",dir:c,activationMode:d="automatic",...p}=e,l=ii(c),[g,y]=ai({prop:r,onChange:i,defaultProp:s});return f.createElement(fc,{scope:o,baseId:si(),value:g,onValueChange:y,orientation:a,dir:l,activationMode:d},f.createElement(Et.div,Xe({dir:l,"data-orientation":a},p,{ref:n})))}),bc="TabsList",yc=f.forwardRef((e,n)=>{const{__scopeTabs:o,loop:r=!0,...i}=e,s=Sn(bc,o),a=Go(o);return f.createElement(ci,Xe({asChild:!0},a,{orientation:s.orientation,dir:s.dir,loop:r}),f.createElement(Et.div,Xe({role:"tablist","aria-orientation":s.orientation},i,{ref:n})))}),xc="TabsTrigger",_c=f.forwardRef((e,n)=>{const{__scopeTabs:o,value:r,disabled:i=!1,...s}=e,a=Sn(xc,o),c=Go(o),d=Ko(a.baseId,r),p=Yo(a.baseId,r),l=r===a.value;return f.createElement(ri,Xe({asChild:!0},c,{focusable:!i,active:l}),f.createElement(Et.button,Xe({type:"button",role:"tab","aria-selected":l,"aria-controls":p,"data-state":l?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:d},s,{ref:n,onMouseDown:Ft(e.onMouseDown,g=>{!i&&g.button===0&&g.ctrlKey===!1?a.onValueChange(r):g.preventDefault()}),onKeyDown:Ft(e.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&a.onValueChange(r)}),onFocus:Ft(e.onFocus,()=>{const g=a.activationMode!=="manual";!l&&!i&&g&&a.onValueChange(r)})})))}),wc="TabsContent",Cc=f.forwardRef((e,n)=>{const{__scopeTabs:o,value:r,forceMount:i,children:s,...a}=e,c=Sn(wc,o),d=Ko(c.baseId,r),p=Yo(c.baseId,r),l=r===c.value,g=f.useRef(l);return f.useEffect(()=>{const y=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(y)},[]),f.createElement(li,{present:i||l},({present:y})=>f.createElement(Et.div,Xe({"data-state":l?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!y,id:p,tabIndex:0},a,{ref:n,style:{...e.style,animationDuration:g.current?"0s":void 0}}),y&&s))});function Ko(e,n){return`${e}-trigger-${n}`}function Yo(e,n){return`${e}-content-${n}`}const qo=vc,Wo=yc,Lt=_c,Xo=Cc,Sc=j([""," justify-content:center;gap:0.5ch;align-self:stretch;padding:0 1.5rem;font:var(--trigger-font,var(--font-base-book));color:var(--trigger-textColor);background-color:var(--trigger-backgroundColor);&[data-state='active']{color:var(--trigger-active-textColor);background-color:var(--trigger-active-backgroundColor);}&:hover{color:var(--trigger-hover-textColor);}"],w.row),Qo=j(["box-shadow:inset 0 calc(var(--trigger-active-underline-size) * -1) 0 var(--trigger-active-underlineColor);color:var(--trigger-active-textColor);"]),Ic=j(["box-shadow:inset 0 calc(var(--trigger-underline-size) * -1) 0 var(--trigger-active-textColor);--trigger-active-backgroundColor:var(--trigger-active-underline-backgroundColor);&[data-state='active']{","}"],Qo),Te={tabTriggerStyle:Sc,tabTriggerActiveUnderlineStyle:Qo,tabTriggerUnderlineStyle:Ic},ot=({defaultValue:e,value:n,items:o,slotToolbar:r,sharedContent:i,onValueChange:s,onWheel:a,fullWidthTabs:c,side:d="top",dividerStyle:p="none",withTransitions:l=!0,disabled:g=!1,className:y})=>{const C=o.find(x=>x.value===n),{uiRefresh:v}=pe,m=p==="border",b=p==="underline",T=t.jsxs(t.Fragment,{children:[t.jsx(Ac,{$fullWidthTabs:c,$withBorders:m,children:o.map(x=>x.subitems?t.jsx(Pc,{items:x.subitems,value:n,onValueChange:s,align:"end",$isActive:x.subitems.some(k=>k.value===n),$withUnderline:b,slotTrigger:t.jsx(Ec,{value:n??"",$withUnderline:b}),disabled:g,children:x.label},x.value??x.label):x.customTrigger??t.jsxs(Oc,{value:x.value,$withBorders:m,$withUnderline:b,disabled:g,children:[x.label,x.tag&&t.jsx(Fe,{children:x.tag}),x.slotRight]},x.value))}),((C==null?void 0:C.slotToolbar)??r)&&t.jsx(vn,{children:(C==null?void 0:C.slotToolbar)??r})]});return t.jsxs(kc,{className:y,defaultValue:e,value:n,onValueChange:s!=null?x=>s(x):void 0,onWheel:a,$side:d,$withInnerBorder:m||b,$uiRefreshEnabled:v,children:[t.jsx(Tc,{$side:d,children:T}),i??t.jsx(Mc,{children:o.map(({asChild:x,value:k,content:O,forceMount:P,ref:R})=>t.jsx(jc,{ref:R,asChild:x,value:k,forceMount:P?!0:void 0,$hide:P&&(C==null?void 0:C.value)!==k,$withTransitions:l,children:O},k))})]})},kc=u(qo).withConfig({componentId:"sc-15sj7nf-0"})(["--trigger-backgroundColor:var(--color-layer-2);--trigger-textColor:var(--color-text-0);--trigger-active-backgroundColor:var(--color-layer-1);--trigger-active-textColor:var(--color-text-2);--trigger-hover-textColor:var(--trigger-active-textColor);--trigger-active-underlineColor:",";--trigger-active-underline-backgroundColor:transparent;--trigger-active-underline-size:2px;--trigger-underline-size:0px;--tabs-currentHeight:var(--tabs-height);@media ","{--tabs-currentHeight:var(--tabs-height-mobile);}"," overscroll-behavior:contain;"," --stickyArea0-background:var(--color-layer-2);--stickyArea0-topGap:var(--border-width);--activeTab-zIndex:1;--stickyHeader-zIndex:calc(var(--activeTab-zIndex) + 1);"," "," "," @media ","{overscroll-behavior:contain auto;}"],({$uiRefreshEnabled:e})=>j(["",""],e?j(["var(--color-accent);"]):j(["var(--color-text-2);"])),te.tablet,w.scrollArea,w.stickyArea0,w.contentContainer,({$side:e})=>({top:j(["--stickyArea0-topHeight:var(--tabs-currentHeight);",""],w.expandingColumnWithHeader),bottom:j(["--stickyArea0-bottomHeight:var(--tabs-currentHeight);",""],w.expandingColumnWithFooter)})[e],({$withInnerBorder:e})=>e&&j(["",""],w.withInnerHorizontalBorders),te.tablet),Tc=u.header.withConfig({componentId:"sc-15sj7nf-1"})([""," "," "," justify-content:space-between;z-index:var(--stickyHeader-zIndex);"],w.contentSectionDetachedScrollable,({$side:e})=>({top:j(["",""],w.stickyHeader),bottom:j([""," grid-row:2;"],w.stickyFooter)})[e],w.row),Ac=u(Wo).withConfig({componentId:"sc-15sj7nf-2"})(["align-self:stretch;"," ",""],({$withBorders:e})=>e&&j(["",""],w.withOuterAndInnerBorders),({$fullWidthTabs:e})=>e?j(["flex:1;",""],w.gridEqualColumns):j(["",""],w.row)),Oc=u(Lt).withConfig({componentId:"sc-15sj7nf-3"})([""," "," ",""],Te.tabTriggerStyle,({$withBorders:e})=>e&&j(["",""],w.withOuterBorder),({$withUnderline:e})=>e&&j(["",""],Te.tabTriggerUnderlineStyle)),jc=u(Xo).withConfig({componentId:"sc-15sj7nf-4"})([""," outline:none;box-shadow:none;&[data-state='inactive']{pointer-events:none;}&[data-state='active']{z-index:var(--activeTab-zIndex);}"," @media (prefers-reduced-motion:no-preference){","}"],w.flexColumn,({$hide:e})=>e&&j(["display:none;"]),({$withTransitions:e})=>e&&j(["&[data-state='active']{animation:"," 0.2s var(--ease-out-expo);}&[data-state='inactive']{min-height:0;animation:"," 0.2s var(--ease-out-expo);}"],ye(["from{translate:0 -0.25rem -1.5rem;opacity:0;}"]),ye(["to{translate:0 -0.25rem -1.5rem;opacity:0;}"]))),Ec=u(Lt).withConfig({componentId:"sc-15sj7nf-5"})([""," gap:1ch;height:100%;width:100%;",""],Te.tabTriggerStyle,({$withUnderline:e})=>e&&j(["",""],Te.tabTriggerUnderlineStyle)),Pc=u(di).withConfig({componentId:"sc-15sj7nf-6"})(["--trigger-radius:0;--dropdownSelectMenu-item-font-size:var(--fontSize-base);",""],({$isActive:e,$withUnderline:n})=>e?n?j([""," ",""],Te.tabTriggerUnderlineStyle,Te.tabTriggerActiveUnderlineStyle):j(["--trigger-textColor:var(--trigger-active-textColor);--trigger-backgroundColor:var(--trigger-active-backgroundColor);--trigger-underline-size:var(--trigger-active-underline-size);"]):j([""])),Zo=u(ot).withConfig({componentId:"sc-15sj7nf-7"})(["--trigger-backgroundColor:transparent;--trigger-active-backgroundColor:transparent;--tableStickyRow-backgroundColor:var(--color-layer-2);--trigger-font:var(--font-extra-book);padding-bottom:1rem;gap:var(--border-width);> header{padding:0 1rem;button{padding:0 0.5rem;}}"]);var Mc=u("div").withConfig({componentId:"sc-15sj7nf-8"})({display:"grid",gridTemplateAreas:"'stack'","> *,&:before,&:after":{gridArea:"stack"},"--tw-shadow":"0 0 #0000","--tw-shadow-colored":"0 0 #0000",boxShadow:"var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)"});const Rc=()=>{const e=q(),n=f.useCallback(l=>{l&&(Y.clearTradeInputValues(),Y.setTradeValue({value:l,field:ge.type}))},[]),{selectedTradeType:o,tradeTypeItems:r}=ui(),s=_(so)===wt.AccountConnected,a=_(hi,z),c=bn(a),d=t.jsxs(Fc,{children:[t.jsxs(Nc,{children:[t.jsx(pi,{openInTradeBox:!0}),t.jsx(mi,{})]}),t.jsx(Lc,{value:o,items:r,onValueChange:n,dividerStyle:"underline",disabled:!s,sharedContent:t.jsx(Dc,{children:t.jsx(gi,{})})},o)]}),p=[{value:he.OrderSide.BUY,label:e({key:h.BUY_LONG})},{value:he.OrderSide.SELL,label:e({key:h.SELL_SHORT})}];return t.jsx($c,{fullWidthTabs:!0,dividerStyle:"underline",activeTab:c,value:c,items:p,onValueChange:l=>{Y.setTradeValue({value:l===he.OrderSide.BUY?$e.Buy.rawValue:$e.Sell.rawValue,field:ge.side})},disabled:!s,sharedContent:d},c)},Dc=u.div.withConfig({componentId:"sc-18f20pk-0"})(["",""],w.scrollArea),Jo=j(["--trigger-active-underline-size:2px;overflow:hidden;> header{justify-content:space-around;}"]),Lc=u(ot).withConfig({componentId:"sc-18f20pk-1"})([""," --tabs-height:2.125rem;--trigger-active-backgroundColor:var(--trigger-backgroundColor);"],Jo),$c=u(ot).withConfig({componentId:"sc-18f20pk-2"})([""," ",";"],Jo,({activeTab:e})=>e===he.OrderSide.BUY?j(["--trigger-active-underline-backgroundColor:var(--color-gradient-positive);--trigger-active-underlineColor:var(--color-positive);--trigger-active-textColor:var(--color-positive);--trigger-hover-textColor:var(--color-text-2);"]):j(["--trigger-active-underline-backgroundColor:var(--color-gradient-negative);--trigger-active-underlineColor:var(--color-negative);--trigger-active-textColor:var(--color-negative);--trigger-hover-textColor:var(--color-text-2);"])),Nc=u.div.withConfig({componentId:"sc-18f20pk-3"})(["display:flex;gap:0.5rem;padding:0.75rem 1rem;border-bottom:var(--border);abbr,button{"," height:2.25rem;flex-basis:100%;}"],w.flexExpandToSpace);var Fc=u("div").withConfig({componentId:"sc-18f20pk-4"})({display:"flex",minHeight:"100%",flexDirection:"column",gap:"0.25rem"});const Bc=()=>{const e=Ce(),n=q(),o=_(pn),r=o&&kt.match(o,{SelectMarginMode:()=>({title:n({key:h.MARGIN_MODE}),content:t.jsx(fi,{onChangeMarginMode:()=>e(Ve())})}),ClosePosition:()=>({title:n({key:h.CLOSE_POSITION}),content:t.jsx(vi,{onClosePositionSuccess:()=>e(Ve())}),onClose:()=>{Y.clearClosePositionInputValues({shouldFocusOnTradeInput:!0})}})});return t.jsxs(Uc,{children:[t.jsx(Rc,{}),t.jsx(zc,{isOpen:!!o,title:r==null?void 0:r.title,setIsOpen:i=>{var s;e(i&&o?lo(o):Ve()),i||(s=r==null?void 0:r.onClose)==null||s.call(r)},placement:bi.Inline,children:r==null?void 0:r.content})]})},Uc=u.section.withConfig({componentId:"sc-186bhuv-0"})(["--tradeBox-content-paddingTop:1rem;--tradeBox-content-paddingRight:1rem;--tradeBox-content-paddingBottom:1rem;--tradeBox-content-paddingLeft:1rem;"," display:flex;flex:1;min-height:1px;z-index:0;& > *{width:100%;}"],w.container),zc=u(yi).withConfig({componentId:"sc-186bhuv-1"})(["--dialog-backgroundColor:var(--color-layer-2);--dialog-paddingX:1.25rem;--dialog-header-paddingTop:1.25rem;--dialog-header-paddingBottom:0.25rem;--dialog-content-paddingTop:1rem;--dialog-content-paddingRight:1rem;--dialog-content-paddingBottom:1rem;--dialog-content-paddingLeft:1rem;"]),Hc=({defaultTab:e,tab:n,setTab:o,tabItems:r,slotToolbar:i,defaultOpen:s,onOpenChange:a,fullWidthTabs:c,dividerStyle:d="none",className:p})=>{const{uiRefresh:l}=pe,g=r.find(v=>v.value===n),y=d==="border",C=d==="underline";return t.jsx(Vc,{className:p,defaultValue:e,value:n,onValueChange:v=>o==null?void 0:o(v),$uiRefreshEnabled:l,asChild:!0,children:t.jsxs(In,{defaultOpen:s,open:s,onOpenChange:v=>a==null?void 0:a(v),children:[t.jsxs(qc,{children:[t.jsx(Gc,{$fullWidthTabs:c,$withBorders:y,children:r.map(({value:v,label:m,tag:b,slotRight:T})=>t.jsxs(Kc,{value:v,$withBorders:y,$withUnderline:C,onClick:()=>a==null?void 0:a(!0),children:[m,b&&t.jsx(Fe,{children:b}),T]},v))}),t.jsxs(Xc,{children:[(g==null?void 0:g.slotToolbar)??i,t.jsx(wi,{asChild:!0,children:t.jsx(Wc,{iconName:J.Caret,isToggle:!0})})]})]}),t.jsx(Qc,{children:r.map(({asChild:v,value:m,content:b})=>t.jsx(Yc,{asChild:v,value:m,children:b},m))})]})})},Vc=u(qo).withConfig({componentId:"sc-1tvu9w-0"})(["--trigger-backgroundColor:var(--color-layer-2);--trigger-textColor:var(--color-text-0);--trigger-active-backgroundColor:var(--color-layer-1);--trigger-active-textColor:var(--color-text-2);--trigger-active-underlineColor:",";--trigger-active-underline-size:2px;--trigger-underline-size:0px;"," overscroll-behavior:contain;"," --stickyArea0-background:var(--color-layer-2);--stickyArea0-topHeight:var(--tabs-height);--stickyArea0-topGap:var(--border-width);"," "," ",""],({$uiRefreshEnabled:e})=>j(["",""],e?j(["var(--color-accent);"]):j(["var(--color-text-2);"])),w.scrollArea,w.stickyArea0,w.contentContainer,w.expandingColumnWithHeader,w.withInnerHorizontalBorders),Gc=u(Wo).withConfig({componentId:"sc-1tvu9w-1"})(["align-self:stretch;"," "," overflow-x:auto;"],({$withBorders:e})=>e&&j([""," margin:0 calc(-1 * var(--border-width));padding:0 var(--border-width);"],w.withOuterAndInnerBorders),({$fullWidthTabs:e})=>e?j(["flex:1;",""],w.flexEqualColumns):j(["",""],w.row)),Kc=u(Lt).withConfig({componentId:"sc-1tvu9w-2"})([""," "," ",""],Te.tabTriggerStyle,({$withBorders:e})=>e&&j(["",""],w.withOuterBorder),({$withUnderline:e})=>e&&j(["",""],Te.tabTriggerUnderlineStyle)),Yc=u(Xo).withConfig({componentId:"sc-1tvu9w-3"})([""," outline:none;box-shadow:none;&[data-state='inactive']{pointer-events:none;}@media (prefers-reduced-motion:no-preference){&[data-state='active']{animation:"," 0.2s var(--ease-out-expo);}&[data-state='inactive']{min-height:0;animation:"," 0.2s var(--ease-out-expo);}}"],w.flexColumn,ye(["from{translate:0 -0.25rem -0.25rem;opacity:0;filter:blur(3px);}"]),ye(["to{translate:0 -0.25rem -0.25rem;opacity:0;filter:blur(3px);}"])),In=u(xi).withConfig({componentId:"sc-1tvu9w-4"})([""]),qc=u.header.withConfig({componentId:"sc-1tvu9w-5"})([""," height:var(--stickyArea-topHeight);"," scroll-snap-align:none;"," justify-content:space-between;","[data-state='closed'] &{box-shadow:none;}"],w.sticky,w.contentSectionDetached,w.row,In),Wc=u(gt).withConfig({componentId:"sc-1tvu9w-6"})(["--button-icon-size:1em;","[data-state='closed'] &{rotate:-0.5turn;}"],In);var Xc=u(vn).withConfig({componentId:"sc-1tvu9w-7"})({display:"inline-flex",alignItems:"center",gap:"0.5ch",minWidth:"max-content"}),Qc=u(_i).withConfig({componentId:"sc-1tvu9w-8"})({display:"grid",gridTemplateAreas:"'stack'","> *,&:before,&:after":{gridArea:"stack"},"--tw-shadow":"0 0 #0000","--tw-shadow-colored":"0 0 #0000",boxShadow:"var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)"});const Zc=({showNarrowVariation:e})=>{const n=q(),{isTablet:o}=fe(),r=Ce(),i=_(Ae,z),s=_(tt,z),a=_(pn),c=_(uo,z),d=_(ao),{stepSizeDecimals:p,tickSizeDecimals:l}=s??{},{id:g}=i??{},{adjustedImf:y,entryPrice:C,exitPrice:v,leverage:m,liquidationPrice:b,netFunding:T,notionalTotal:x,realizedPnl:k,size:O,unrealizedPnl:P,unrealizedPnlPercent:R}=c||{},B=F(T),U=[{key:"average-open",type:I.Fiat,label:h.AVERAGE_OPEN,fractionDigits:l,value:C==null?void 0:C.current},{key:"average-close",type:I.Fiat,label:h.AVERAGE_CLOSE,fractionDigits:l,value:v},{key:"net-funding",type:I.Fiat,label:h.NET_FUNDING,tooltip:"net-funding",sign:F(T).gt(0)?Q.Positive:F(T).lt(0)?Q.Negative:Q.Neutral,value:T&&B.toFixed(At)}],{current:H,postOrder:re}=O??{},W=F(m==null?void 0:m.current),X=F(m==null?void 0:m.postOrder),S=Qe.ONE.div(F(y==null?void 0:y.postOrder)),A=F(re).isZero(),E=F(H).isZero(),M=!!(m!=null&&m.postOrder)&&(!X.isFinite()||X.gt(S)),L=!(m!=null&&m.current)||(m==null?void 0:m.postOrder)&&X.gt(W);let $=Q.Neutral;const N=F(b==null?void 0:b.postOrder).gt(F(b==null?void 0:b.current)),G=Ci({currentSize:H,postOrderSize:re}).positionSideHasChanged;m!=null&&m.postOrder&&(M?$=Q.Negative:A?$=Q.Positive:G?$=Q.Neutral:(b!=null&&b.current&&F(H).gt(0)?!N:N)?$=Q.Positive:(!(b!=null&&b.current)||(!A&&F(H).gt(0)?N:!N))&&($=Q.Negative));const V=[{key:"leverage",type:I.Multiple,label:h.LEVERAGE,tooltip:"leverage",hasInvalidNewValue:!!M,sign:!M&&!L?Q.Positive:M||L?Q.Negative:Q.Neutral,useDiffOutput:!0,showSign:yn.None,value:m==null?void 0:m.current,newValue:m==null?void 0:m.postOrder,withBaseFont:!0},{key:"liquidation-price",type:I.Fiat,label:h.LIQUIDATION_PRICE,tooltip:"liquidation-price",tooltipParams:{SYMBOL:g??""},fractionDigits:l,hasInvalidNewValue:!!M,sign:$,useDiffOutput:!0,value:b==null?void 0:b.current,newValue:b==null?void 0:b.postOrder,withBaseFont:!0},{key:"unrealized-pnl",type:I.Fiat,label:h.UNREALIZED_PNL,tooltip:"unrealized-pnl",sign:F(P==null?void 0:P.current).gt(0)?Q.Positive:F(P==null?void 0:P.current).lt(0)?Q.Negative:Q.Neutral,value:P==null?void 0:P.current,percentValue:R==null?void 0:R.current,withBaseFont:!0},{key:"realized-pnl",type:I.Fiat,label:h.REALIZED_PNL,tooltip:"realized-pnl",sign:F(k==null?void 0:k.current).gt(0)?Q.Positive:F(k==null?void 0:k.current).lt(0)?Q.Negative:Q.Neutral,value:(k==null?void 0:k.current)??void 0,withBaseFont:!0}],K=({key:Z,type:ae,label:ee,tooltip:xe,tooltipParams:Oe,fractionDigits:bt,hasInvalidNewValue:le,sign:it,showSign:at,useDiffOutput:_e,value:st,newValue:je,percentValue:ct,withBaseFont:se})=>({key:Z,label:n({key:ee}),tooltip:xe,tooltipParams:Oe,value:_e?t.jsx(Jc,{type:ae,value:st,newValue:je,fractionDigits:bt,hasInvalidNewValue:le,layout:o?"row":"column",sign:it,showSign:at,withBaseFont:se,withDiff:fn(je)&&st!==je}):t.jsx(Ln,{type:ae,value:st,fractionDigits:bt,showSign:at,sign:it,slotRight:ct&&t.jsx(Ln,{type:I.Percent,value:ct,sign:it,showSign:at,withParentheses:!0,withBaseFont:se,margin:"0 0 0 0.5ch"}),withBaseFont:se})}),ie=t.jsx(tl,{children:o?t.jsx(il,{onClick:()=>r(Ge(Ke.ClosePosition())),children:n({key:h.CLOSE_POSITION})}):t.jsx(al,{isPressed:a!=null&&kt.is.ClosePosition(a),onPressedChange:Z=>{r(Z?lo(kt.ClosePosition()):Ve()),Z||Y.clearClosePositionInputValues({shouldFocusOnTradeInput:!0})},children:n({key:h.CLOSE_POSITION})})});return e?t.jsxs(ol,{children:[t.jsxs(ut,{children:[t.jsx(Xt,{currentSize:O==null?void 0:O.current,notionalTotal:x==null?void 0:x.current,postOrderSize:O==null?void 0:O.postOrder,stepSizeDecimals:p,symbol:g??void 0,tickSizeDecimals:l,showNarrowVariation:e,isLoading:d}),t.jsx(We,{items:[V[0],V[1]].map(K),layout:"stackColumn",withSeparators:!0,isLoading:d})]}),t.jsx(er,{children:t.jsx(We,{items:[V[2],V[3]].map(K),layout:"rowColumns",withSeparators:!0,isLoading:d})}),!E&&t.jsx(ut,{children:ie}),t.jsx(ut,{children:t.jsx(We,{items:U.map(K),withSeparators:!0,isLoading:d})})]}):t.jsxs(nl,{children:[t.jsxs("div",{children:[t.jsx(Xt,{currentSize:O==null?void 0:O.current,notionalTotal:x==null?void 0:x.current,postOrderSize:O==null?void 0:O.postOrder,stepSizeDecimals:p,symbol:g??void 0,tickSizeDecimals:l,isLoading:d}),t.jsx(el,{items:V.map(K),justifyItems:"end",layout:"grid",withOverflow:!1,isLoading:d})]}),t.jsxs("div",{children:[t.jsx(sl,{items:U.map(K),withOverflow:!1,withSeparators:!0,isLoading:d}),!E&&ie]})]})},Jc=u(pt).withConfig({componentId:"sc-1to6hzq-0"})(["--diffOutput-gap:0.125rem;--diffOutput-value-color:var(--color-text-2);--diffOutput-valueWithDiff-color:var(--color-text-0);--diffOutput-valueWithDiff-font:var(--font-small-book);justify-items:inherit;"]),el=u(Se).withConfig({componentId:"sc-1to6hzq-1"})(["font:var(--font-mini-book);--details-value-font:var(--font-base-book);> div{gap:0.5rem;height:4.75rem;grid-template-rows:auto 1fr;}dd{justify-items:inherit;align-items:flex-start;}"]),We=u(Se).withConfig({componentId:"sc-1to6hzq-2"})(["font:var(--font-small-book);--details-value-font:var(--font-medium-medium);> div > dd,dt{padding-left:0.5rem;padding-right:0.5rem;}"]),tl=u.footer.withConfig({componentId:"sc-1to6hzq-3"})(["display:flex;flex-wrap:wrap;gap:0.5rem;> :first-child{flex:1;}> :last-child{flex:2;}"]),Ln=u(D).withConfig({componentId:"sc-1to6hzq-4"})(["color:",";",";",""],({sign:e})=>e==null?void 0:{[Q.Positive]:"var(--color-positive)",[Q.Negative]:"var(--color-negative)",[Q.Neutral]:"var(--color-text-2)"}[e],({smallText:e})=>e&&j(["color:var(--color-text-0);font:var(--font-small-book);"]),({margin:e})=>e&&`margin: ${e};`),nl=u.div.withConfig({componentId:"sc-1to6hzq-5"})(["margin:0 auto;width:100%;"," --grid-max-columns:2;--column-gap:2rem;--column-min-width:18.8rem;--column-max-width:23.75rem;--single-column-max-width:26rem;justify-content:center;align-items:start;padding:clamp(0.5rem,7.5%,2rem);padding-bottom:0;row-gap:1rem;> *{"," &:nth-child(1){gap:1.5rem;}&:nth-child(2){gap:1rem;}}"],w.gridConstrainedColumns,w.column),ut=u(Ne).withConfig({componentId:"sc-1to6hzq-6"})(["padding:0 1.5rem;position:relative;"]),er=u(Os).withConfig({componentId:"sc-1to6hzq-7"})(["padding:0 1.5rem;"]),ol=u.div.withConfig({componentId:"sc-1to6hzq-8"})([""," gap:1rem;> ",":nth-child(1){display:flex;gap:1rem;flex-wrap:wrap;> ","{flex:2 9rem;> div:nth-child(1){gap:0.5rem;}}> ","{flex:1 9rem;}}> ",":nth-child(2){> ","{margin:0 -1rem;}}> ",":nth-last-child(1){> ","{margin:0 -0.25rem;--details-value-font:var(--font-base-book);}}"],w.column,ut,()=>rl,We,er,We,ut,We),rl=u(Xt).withConfig({componentId:"sc-1to6hzq-9"})([""]),il=u(Le).withConfig({componentId:"sc-1to6hzq-10"})(["--button-border:solid var(--border-width) var(--color-border-red);--button-textColor:var(--color-red);"]),al=u(ho).withConfig({componentId:"sc-1to6hzq-11"})(["--button-border:solid var(--border-width) var(--color-border-red);--button-toggle-off-textColor:var(--color-red);--button-toggle-on-textColor:var(--color-red);"]);var sl=u(Se).withConfig({componentId:"sc-1to6hzq-12"})({font:"var(--font-mini-book)","--details-value-font":"var(--font-small-book)"});const rn=({isOpen:e=!0,setIsOpen:n})=>{const o=q(),r=mt(),{isTablet:i,isDesktopSmall:s}=fe(),{uiRefresh:a}=pe,c=_(Si),[d,p]=f.useState(c?"AllMarkets":"CurrentMarket"),[l,g]=f.useState(Ee.AllMarkets),[y,C]=f.useState("Position"),v=_(Je),m=_(Ii),{numTotalPositions:b,numTotalOpenOrders:T,numTotalUnseenFills:x}=_(ki,z)??{},{numOpenOrders:k,numUnseenFills:O}=_(Ti,z)??{},P=_(Ai),R=_(Oi),B=_(ji),U=js(),H=mo(Ei),re=_(Pi),W=i||d==="CurrentMarket",X=Bt(W?O:x),S=Bt(W?k:T),A=10,E=f.useCallback(V=>{r(`${be.Trade}/${V}`,{state:{from:be.Trade}}),p("CurrentMarket"),C("Orders")},[r]),M=f.useMemo(()=>({value:"Position",label:o({key:W?h.POSITION:h.POSITIONS}),tag:W?null:Bt(b),content:i?t.jsx(Zc,{showNarrowVariation:i}):t.jsx(Es,{currentMarket:W?v:void 0,marketTypeFilter:l,columnKeys:i?[ce.Details,ce.IndexEntry,ce.PnL]:[ce.Market,ce.Size,ce.Margin,ce.UnrealizedPnl,!s&&ce.RealizedPnl,ce.NetFunding,ce.AverageOpenAndClose,ce.LiquidationAndOraclePrice,U&&ce.Triggers,H&&ce.Actions].filter(qe),showClosePositionAction:H,initialPageSize:A,navigateToOrders:E})}),[o,v,l,W,i,s,H,U,b,E]),L=f.useMemo(()=>({asChild:!0,value:"Orders",label:o({key:h.ORDERS}),slotRight:re?t.jsx(dl,{}):S&&t.jsx(Fe,{type:An.Number,isHighlighted:P,children:S}),content:t.jsx(Rs,{currentMarket:W?v:void 0,marketTypeFilter:l,columnKeys:i?[me.StatusFill,me.PriceType]:[!W&&me.Market,me.Status,me.Side,me.AmountFill,me.Price,me.Trigger,me.MarginType,me.GoodTil,!B&&me.Actions].filter(qe),initialPageSize:A})}),[o,v,l,W,i,re,B,S,P]),$=f.useMemo(()=>({asChild:!0,value:"Fills",label:o({key:h.FILLS}),slotRight:X&&t.jsx(Fe,{type:An.Number,isHighlighted:R,children:X}),content:t.jsx(Ms,{currentMarket:W?v:void 0,columnKeys:i?[de.Time,de.TypeAmount,de.PriceFee]:[!W&&de.Market,de.Time,de.Type,de.Side,de.AmountTag,de.Price,de.TotalFee,de.Liquidity].filter(qe),columnWidths:{[de.TypeAmount]:"100%"},initialPageSize:A})}),[o,v,W,i,X,R]),N=f.useMemo(()=>a?[M,$,L]:[M,L,$],[a,M,$,L]),G={Position:t.jsx(ul,{onViewOrders:E}),Orders:null,Fills:null,Payments:null}[y];return i?t.jsx(Zo,{defaultValue:"Position",items:N}):t.jsxs(t.Fragment,{children:[t.jsx(cl,{defaultTab:"Position",tab:y,setTab:C,defaultOpen:e,onOpenChange:n,dividerStyle:a?"underline":"border",slotToolbar:t.jsxs(t.Fragment,{children:[t.jsx(go,{items:[{value:"AllMarkets",label:o({key:h.ALL})},{value:"CurrentMarket",...m?{slotBefore:t.jsx(hl,{symbol:m}),label:m}:{label:o({key:h.MARKET})}}],value:d,onValueChange:p,onInteraction:()=>{n==null||n(!0)}}),t.jsx($n,{}),t.jsxs(ll,{value:l,onValueChange:V=>{g(V)},children:[t.jsx(Gt,{value:Ee.AllMarkets,label:`${o({key:h.CROSS})} / ${o({key:h.ISOLATED})}`},Ee.AllMarkets),t.jsx(Gt,{value:Ee.Isolated,label:o({key:h.ISOLATED})},Ee.Isolated),t.jsx(Gt,{value:Ee.Cross,label:o({key:h.CROSS})},Ee.Cross)]}),t.jsx($n,{})]}),tabItems:N}),e&&G]})},$n=u(Pt).withConfig({componentId:"sc-1k3ct2g-0"})(["&&{height:1em;}"]),cl=u(Hc).withConfig({componentId:"sc-1k3ct2g-1"})(["--tableHeader-backgroundColor:var(--color-layer-3);header{background-color:var(--color-layer-2);}"]),ll=u(Mi).withConfig({componentId:"sc-1k3ct2g-2"})([""," --trigger-height:1.75rem;--trigger-radius:2rem;--trigger-backgroundColor:var(--color-layer-1);"],po.inputInnerSelectMenu),Gt=u(Ri).withConfig({componentId:"sc-1k3ct2g-3"})(["",""],po.inputInnerSelectMenuItem);var dl=u(Di).withConfig({componentId:"sc-1k3ct2g-4"})({"--spinner-width":"1rem"}),ul=u(Ps).withConfig({componentId:"sc-1k3ct2g-5"})({marginTop:"auto"}),hl=u(nt).withConfig({componentId:"sc-1k3ct2g-6"})({fontSize:"1.5em"});const tr=({launchableMarketId:e})=>{const{resources:n}=_(Ae,z)??{},{coinMarketCapsLink:o,websiteLink:r,whitepaperLink:i}=ht(n),s=Ue(e),{urls:a}=ht(s),{uiRefresh:c}=pe,d=[{key:"coinmarketcap",href:(a==null?void 0:a.cmc)??o,icon:J.CoinMarketCap},{key:"whitepaper",href:(a==null?void 0:a.technicalDoc)??i,icon:J.Whitepaper},{key:"project-website",href:(a==null?void 0:a.website)??r,icon:J.Website}].filter(({href:p})=>p);return t.jsx(ml,{children:d.map(({key:p,href:l,icon:g})=>l&&(c?t.jsx(pl,{href:l,iconName:g,type:lt.Link},p):t.jsx(gt,{href:l,iconName:g,type:lt.Link},p)))})},pl=u(gt).withConfig({componentId:"sc-mz9zar-0"})(["--button-icon-size:1.3em;--button-textColor:var(--color-text-0);--button-backgroundColor:transparent;--button-border:none;"]);var ml=u("div").withConfig({componentId:"sc-mz9zar-1"})({display:"flex",flexDirection:"row",alignItems:"center",marginLeft:"auto",gap:"0.5rem"});const nr=({assetName:e,assetIcon:n,marketDetailItems:o,primaryDescription:r,secondaryDescription:i,urls:s})=>{const a=q(),{isTablet:c}=fe(),{technicalDoc:d,website:p,cmc:l}=s??{};return t.jsxs(gl,{children:[t.jsxs(bl,{children:[t.jsxs(yl,{children:[t.jsxs(fl,{children:[t.jsx(nt,{symbol:n.symbol,logoUrl:n.logoUrl}),e]}),c&&t.jsx(xl,{})]}),t.jsxs(vl,{children:[r&&t.jsx("p",{children:r}),i&&t.jsx("p",{children:i})]}),!c&&t.jsxs(_l,{children:[d&&t.jsx(Le,{type:lt.Link,shape:Ye.Pill,size:De.Small,href:d,slotRight:t.jsx(we,{iconName:J.LinkOut}),children:a({key:h.WHITEPAPER})}),p&&t.jsx(Le,{type:lt.Link,shape:Ye.Pill,size:De.Small,href:p,slotRight:t.jsx(we,{iconName:J.LinkOut}),children:a({key:h.WEBSITE})}),l&&t.jsx(Le,{type:lt.Link,shape:Ye.Pill,size:De.Small,href:l,slotRight:t.jsx(we,{iconName:J.LinkOut}),children:"CoinmarketCap"})]})]}),t.jsx(wl,{items:o,withSeparators:!0})]})},gl=u.div.withConfig({componentId:"sc-10j9hnd-0"})(["margin:auto;width:100%;"," --grid-max-columns:2;--column-gap:2.25em;--column-min-width:18rem;--column-max-width:22rem;--single-column-max-width:25rem;justify-content:center;align-items:center;padding:clamp(0.5rem,7.5%,2.5rem);row-gap:1rem;@media ","{padding:0 clamp(0.5rem,7.5%,2.5rem);}"],w.gridConstrainedColumns,te.tablet),fl=u.h3.withConfig({componentId:"sc-10j9hnd-1"})([""," font:var(--font-large-medium);gap:0.5rem;img{width:2.25rem;height:2.25rem;}"],w.row),vl=u.div.withConfig({componentId:"sc-10j9hnd-2"})([""," gap:0.5em;p{font:var(--font-small-book);&:last-of-type{color:var(--color-text-0);}}"],w.column);var bl=u("header").withConfig({componentId:"sc-10j9hnd-3"})({display:"grid",gridAutoFlow:"row",gridTemplateColumns:"minmax(0, 1fr)",gap:"1.25rem"}),yl=u("div").withConfig({componentId:"sc-10j9hnd-4"})({display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"wrap",gap:"0.5rem"}),xl=u(tr).withConfig({componentId:"sc-10j9hnd-5"})({placeSelf:"start end"}),_l=u("div").withConfig({componentId:"sc-10j9hnd-6"})({display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"wrap",gap:"0.5rem",overflowX:"auto"}),wl=u(Se).withConfig({componentId:"sc-10j9hnd-7"})({font:"var(--font-mini-book)"});const or=()=>{const e=q(),{configs:n,displayId:o}=_(xn,z)??{},{id:r,name:i,resources:s}=_(Ae,z)??{};if(!n)return null;const{tickSize:a,stepSize:c,initialMarginFraction:d,effectiveInitialMarginFraction:p,maintenanceMarginFraction:l,minOrderSize:g,perpetualMarketType:y,stepSizeDecimals:C,tickSizeDecimals:v}=n,{coinMarketCapsLink:m,primaryDescriptionKey:b,secondaryDescriptionKey:T,websiteLink:x,whitepaperLink:k}=s??{},O=!!(p&&d!==p),P=[{key:"ticker",label:e({key:h.TICKER}),value:o},{key:"market-type",label:e({key:h.TYPE}),value:y===Li.CROSS?e({key:h.CROSS}):e({key:h.ISOLATED})},{key:"tick-size",label:e({key:h.TICK_SIZE}),tooltip:"tick-size",value:t.jsx(D,{useGrouping:!0,value:a,type:I.Fiat,fractionDigits:v})},{key:"step-size",label:e({key:h.STEP_SIZE}),tooltip:"step-size",value:t.jsx(D,{useGrouping:!0,value:c,type:I.Asset,tag:r,fractionDigits:C})},{key:"min-order-size",label:e({key:h.MINIMUM_ORDER_SIZE}),value:t.jsx(D,{useGrouping:!0,value:g,type:I.Asset,tag:r,fractionDigits:C})},{key:"max-leverage",label:e({key:h.MAXIMUM_LEVERAGE}),tooltip:"maximum-leverage",value:t.jsx(pt,{value:d?Qe.ONE.div(d):null,newValue:p?Qe.ONE.div(p):null,withDiff:O,type:I.Multiple})},{key:"maintenance-margin-fraction",label:e({key:h.MAINTENANCE_MARGIN_FRACTION}),tooltip:"maintenance-margin-fraction",value:t.jsx(D,{useGrouping:!0,value:l,type:I.SmallPercent})},{key:"initial-margin-fraction",label:e({key:h.INITIAL_MARGIN_FRACTION}),tooltip:"initial-margin-fraction",value:t.jsx(pt,{value:d?ke(d):null,newValue:p?ke(p):null,withDiff:O,type:I.SmallPercent})}];return t.jsx(nr,{assetName:i,assetIcon:{symbol:r},marketDetailItems:P,primaryDescription:e({key:`APP.${b}`}),secondaryDescription:e({key:`APP.${T}`}),urls:{technicalDoc:k,website:x,cmc:m}})},xt=$i[4],rr=({launchableMarketId:e})=>{const n=q(),o=Ue(e);if(!o)return null;const{name:r,id:i,logo:s,urls:a,marketCap:c,reportedMarketCap:d,volume24h:p}=o,{website:l,technicalDoc:g,cmc:y}=a,C=c?!1:!!d,v=[{key:"market-name",label:n({key:h.MARKET_NAME}),value:r},{key:"market-cap",label:t.jsxs(Cl,{children:[n({key:h.MARKET_CAP}),C&&t.jsx(we,{iconName:J.CautionCircle})]}),value:t.jsx(D,{type:I.Fiat,value:C?d:c}),tooltip:C?"self-reported-cmc":void 0},{key:"volume-24h",label:n({key:h.SPOT_VOLUME_24H}),value:t.jsx(D,{useGrouping:!0,value:p,type:I.Fiat})},{key:"ticker",label:n({key:h.TICKER}),value:fo(`${i}-USD`)},{key:"market-type",label:n({key:h.TYPE}),value:n({key:h.ISOLATED})},{key:"max-leverage",label:n({key:h.MAXIMUM_LEVERAGE}),tooltip:"maximum-leverage",value:t.jsx(D,{useGrouping:!0,value:xt.initialMarginFraction?Qe.ONE.div(xt.initialMarginFraction):null,type:I.Multiple})},{key:"maintenance-margin-fraction",label:n({key:h.MAINTENANCE_MARGIN_FRACTION}),tooltip:"maintenance-margin-fraction",value:t.jsx(D,{useGrouping:!0,value:xt.maintenanceMarginFraction,type:I.SmallPercent})},{key:"initial-margin-fraction",label:n({key:h.INITIAL_MARGIN_FRACTION}),tooltip:"initial-margin-fraction",value:t.jsx(D,{useGrouping:!0,value:xt.initialMarginFraction,type:I.SmallPercent})}];return t.jsx(nr,{assetName:r,assetIcon:{logoUrl:s},marketDetailItems:v,urls:{technicalDoc:g,website:l,cmc:y}})};var Cl=u("span").withConfig({componentId:"sc-juuq7r-0"})({display:"flex",alignItems:"center",gap:"0.25rem"});const $t=({accentColor:e,...n})=>t.jsx(Sl,{accentColor:e,...n}),Sl=u(D).withConfig({componentId:"sc-emqxrk-0"})(["--accent-color:var(--color-layer-6);"," offset:path('M 0 0') 0px;display:inline-block;padding:0.15em 0.4em;border-radius:0.25em;color:white;background-color:var(--accent-color);"],({accentColor:e})=>e&&j(["--accent-color:",";"],e)),Il=({onPointerMove:e,onPointerUp:n,onPointerPressedChange:o,...r})=>{const{xScale:i,yScale:s}=f.useContext(eo),[a,c]=f.useState(),d=a?Ni(a):null,p=i!=null&&s!=null&&d!=null&&new vo({x:i.invert(d.x-On(i)/2),y:s.invert(d.y-On(s)/2)});return t.jsx(Fi,{...r,onPointerMove:({event:l})=>{c(l),p&&(e==null||e(p))},onPointerOut:()=>c(void 0),onPointerDown:()=>o==null?void 0:o(!0),onPointerUp:()=>{o==null||o(!1),p&&(n==null||n(p))},children:r.children})},ir=({children:e,accentColor:n})=>t.jsx(kl,{accentColor:n,children:e}),kl=u.aside.withConfig({componentId:"sc-14xuszv-0"})(["--accent-color:currentColor;"," "," --popover-radius:0.5rem;--popover-background-color:",";--popover-backdrop-filter:saturate(120%) blur(12px);display:grid;gap:0.25rem;overflow:hidden;padding:0.5rem 0.75rem;width:max-content;dl{margin:0;}&:before{content:'';position:absolute;inset:0;width:2px;background-color:var(--accent-color);transition:0.2s;}h4{line-height:1.75;}"],({accentColor:e})=>e&&j(["--accent-color:",";"],e),bo.popover,({theme:e})=>e.popoverBackground),Tl=({chartPointAtPointer:e,colorScale:n,isEditingOrder:o,stepSizeDecimals:r,tickSizeDecimals:i,tooltipData:s})=>{const{nearestDatum:a}=s??{},c=q(),{spread:d,spreadPercent:p,midMarketPrice:l}=yo(),{id:g=""}=_(Ae,z)??{},y=f.useMemo(()=>{if(a&&l){const C=a.key;return{[ne.Bids]:F(l).minus(a==null?void 0:a.datum.price).div(l),[ne.Asks]:F(a==null?void 0:a.datum.price).minus(l).div(l),[ne.MidMarket]:void 0}[C]}},[a,e.price]);return!o&&!(a!=null&&a.datum)?null:t.jsxs(ir,{accentColor:(a==null?void 0:a.key)&&(n==null?void 0:n(o?Qt[e.side]:a.key)),children:[t.jsx("h4",{children:o?c({key:h.RELEASE_TO_EDIT}):a&&{[ne.Bids]:c({key:h.BIDS}),[ne.Asks]:c({key:h.ASKS}),[ne.MidMarket]:c({key:h.MID_MARKET})}[a.key]}),t.jsx(Al,{layout:"column",items:o?[{key:"side",label:c({key:h.SIDE}),value:t.jsx(D,{type:I.Text,value:{[he.OrderSide.BUY]:c({key:h.BUY}),[he.OrderSide.SELL]:c({key:h.SELL})}[e.side]})},{key:"limitPrice",label:c({key:h.LIMIT_PRICE}),value:t.jsx(D,{type:I.Fiat,value:e.price,useGrouping:!1})},{key:"size",label:c({key:h.AMOUNT}),value:t.jsx(D,{type:I.Asset,value:e.size,fractionDigits:r,tag:g,useGrouping:!1})}]:(a==null?void 0:a.key)===ne.MidMarket?[{key:"midMarketPrice",label:c({key:h.PRICE}),value:t.jsx(D,{type:I.Fiat,value:l,useGrouping:!1})},{key:"spread",label:c({key:h.ORDERBOOK_SPREAD}),value:t.jsxs(t.Fragment,{children:[t.jsx(D,{type:I.Fiat,value:d,fractionDigits:i,useGrouping:!1}),t.jsx(D,{type:I.SmallPercent,value:p,withParentheses:!0})]})}]:[{key:"price",label:c({key:h.PRICE}),value:t.jsxs(t.Fragment,{children:[a&&{[ne.Bids]:"≥",[ne.Asks]:"≤"}[a.key],t.jsx(D,{type:I.Fiat,value:a==null?void 0:a.datum.price,useGrouping:!1})]})},{key:"depth",label:c({key:h.TOTAL_SIZE}),value:t.jsx(D,{type:I.Asset,value:a==null?void 0:a.datum.depth,fractionDigits:r,tag:g,useGrouping:!1})},{key:"cost",label:c({key:h.TOTAL_COST}),value:t.jsx(D,{useGrouping:!0,type:I.Fiat,value:a!=null?a.datum.depthCost:void 0})},{key:"priceImpact",label:c({key:h.PRICE_IMPACT}),value:t.jsx(D,{useGrouping:!0,type:I.Percent,value:y})}]})]})};var Al=u(Se).withConfig({componentId:"sc-11t2bt3-0"})({"--details-item-vertical-padding":"0.2rem"});const Ol=Bi({...Ds,colors:["var(--color-positive)","var(--color-negative)","var(--color-layer-6)"]}),Kt=(e,n,o)=>Math.max(n,Math.min(o,e)),He=(e,n,o)=>n+e*(o-n),ar=({onChartClick:e,stringGetter:n,selectedLocale:o})=>{const{isMobile:r}=fe(),{decimal:i,group:s}=jt(),{id:a=""}=_(Ae,z)??{},{stepSizeDecimals:c,tickSizeDecimals:d}=_(tt,z)??{},{bids:p,asks:l,lowestBid:g,highestBid:y,lowestAsk:C,highestAsk:v,midMarketPrice:m,orderbook:b}=yo(),[T,x]=f.useState(!1),[k,O]=f.useState(),P=!!(T&&k),[R,B]=f.useState();f.useEffect(()=>{m?R||B(Math.min(m*.015,(m-g.price)/2,(v.price-m)/2)):B(void 0)},[m]);const{domain:U,range:H}=f.useMemo(()=>{if(!(R&&m&&l.length&&p.length))return{domain:[0,0],range:[0,0]};const S=[Kt(m-R,0,y.price),Kt(m+R,C.price,v.price)],A=[0,[...p,...l].filter(E=>E.price>=S[0]&&E.price<=S[1]).map(E=>E.depth??0).reduce((E,M)=>Math.max(E,M),0)];return{domain:S,range:A}},[b,R]),re=f.useCallback(S=>{let A,E;if(S instanceof vo){const{x:M,y:L}=S;A=M,E=L}else{const{svgPoint:{x:M,y:L}={}}=S;A=M??0,E=L??0}return{side:F(A).lt(m)?he.OrderSide.BUY:he.OrderSide.SELL,price:A,size:E}},[m]),W=f.useCallback(S=>Tt(S,I.Number,{decimalSeparator:i,groupSeparator:s,selectedLocale:o,fractionDigits:d}),[i,s,o,d]);if(!(R&&m&&l.length&&p.length))return t.jsx(Mt,{id:"depth-chart-loading"});const X=({deltaY:S,wheelDelta:A=S})=>{B(Kt(Math.max(1e-320,Math.min(Number.MAX_SAFE_INTEGER,R*Math.exp(A/1e3))),Math.min(m-y.price,C.price-m),Math.max(m-g.price,v.price-m)))};return t.jsx(jl,{onWheel:X,children:t.jsx(Ui,{theme:Ol,xScale:{type:"linear",clamp:!1,nice:!1,zero:!1,domain:[He(-.02,...U),He(1.02,...U)]},yScale:{type:"linear",clamp:!0,nice:!0,zero:!0,domain:[H[0],He(1.05,...H)]},children:t.jsx(zi,{children:t.jsxs(Il,{margin:{left:0,right:0,top:0,bottom:32},onPointerUp:S=>S&&(e==null?void 0:e(re(S))),onPointerMove:S=>S&&O(re(S)),onPointerPressedChange:S=>x(S),children:[t.jsx(Hi,{orientation:"bottom",numTicks:4,tickFormat:W}),t.jsx(Vi,{numTicks:4,lineStyle:{stroke:"var(--color-border)",strokeWidth:"var(--border-width)"}}),t.jsx(Rn,{dataKey:ne.Bids,data:p.length?[{...y,depth:0},...p,{...g,price:0}].reverse():[],xAccessor:S=>S==null?void 0:S.price,yAccessor:S=>S==null?void 0:S.depth,curve:Zt,lineProps:{strokeWidth:1.5},fillOpacity:.2,fill:"url(#LinearGradient-Bids)"}),t.jsx(jn,{id:"LinearGradient-Bids",from:"var(--color-positive)",to:"var(--color-positive)",toOpacity:.4}),t.jsx(Rn,{dataKey:ne.Asks,data:l.length?[{...C,depth:0},...l]:[],xAccessor:S=>S==null?void 0:S.price,yAccessor:S=>S==null?void 0:S.depth,curve:Zt,lineProps:{strokeWidth:1.5},fillOpacity:.2,fill:"url(#LinearGradient-Asks)"}),t.jsx(jn,{id:"LinearGradient-Asks",from:"var(--color-negative)",to:"var(--color-negative)",toOpacity:.4}),t.jsx(Gi,{dataKey:ne.MidMarket,data:[{price:m,depth:He(1.2,...H)},{price:m,depth:He(.5,...H)},{price:m,depth:He(-.1,...H)}],strokeWidth:.25,xAccessor:S=>S==null?void 0:S.price,yAccessor:S=>S==null?void 0:S.depth}),t.jsx(Ki,{unstyled:!0,applyPositionStyle:!0,showDatumGlyph:!P,glyphStyle:{radius:6,opacity:.8},showVerticalCrosshair:!0,verticalCrosshairStyle:{strokeWidth:1,strokeDasharray:"5 5",opacity:.7},snapCrosshairToDatumX:!P,renderXAxisLabel:({tooltipData:S})=>{var A,E;return t.jsx(Pl,{type:I.Fiat,value:P&&k?k.price:(A=S.nearestDatum)==null?void 0:A.datum.price,useGrouping:!1,accentColor:{[ne.Asks]:"var(--color-negative)",[ne.Bids]:"var(--color-positive)",[ne.MidMarket]:"var(--color-layer-6)"}[P&&k?Qt[k.side]:(E=S.nearestDatum)==null?void 0:E.key]})},showHorizontalCrosshair:!0,horizontalCrosshairStyle:{strokeWidth:1,strokeDasharray:"5 5",opacity:.7},snapCrosshairToDatumY:!P,renderYAxisLabel:({tooltipData:S})=>{var A,E,M;return(P||((A=S.nearestDatum)==null?void 0:A.datum.depth))&&t.jsx(El,{type:I.Asset,value:P&&k?k.size:(E=S.nearestDatum)==null?void 0:E.datum.depth,tag:a,accentColor:{[ne.Asks]:"var(--color-negative)",[ne.Bids]:"var(--color-positive)",[ne.MidMarket]:"var(--color-layer-6)"}[P&&k?Qt[k.side]:(M=S.nearestDatum)==null?void 0:M.key]})},snapTooltipToDatumX:!P,snapTooltipToDatumY:P?!1:r,renderTooltip:({tooltipData:S,colorScale:A})=>k&&t.jsx(Tl,{tooltipData:S,colorScale:A,isEditingOrder:P,chartPointAtPointer:k,stringGetter:n,selectedLocale:o,stepSizeDecimals:c,tickSizeDecimals:d})})]})})})})},jl=u.div.withConfig({componentId:"sc-1c0ar9v-0"})(["width:0;min-width:100%;height:0;min-height:100%;overflow:hidden;font-size:0.75rem;transform-style:flat;cursor:crosshair;user-select:none;text{font-feature-settings:var(--fontFeature-monoNumbers);}@media (prefers-reduced-motion:no-preference){[data-state='open']{animation:"," 0.1s var(--ease-out-expo);}&:not(:hover) [data-state]{animation:"," 0.2s 0.3s var(--ease-out-expo) forwards;}}"],ye(["from{opacity:0;}"]),ye(["to{opacity:0;}"])),El=u($t).withConfig({componentId:"sc-1c0ar9v-1"})(["--axisLabel-offset:0.5rem;[data-side='left'] &{translate:calc(50% + var(--axisLabel-offset)) 0;}[data-side='right'] &{translate:calc(-50% - var(--axisLabel-offset)) 0;}"]);var Pl=u($t).withConfig({componentId:"sc-1c0ar9v-2"})({"--tw-shadow":"0 0 0.5rem var(--color-layer-2)","--tw-shadow-colored":"0 0 0.5rem var(--tw-shadow-color)",boxShadow:"var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)"});const Ml=Yi([qi,Wi],(e,n)=>{const o=[...e];return n&&o.push({effectiveAtMilliseconds:Date.now(),rate:n}),o.map(({effectiveAtMilliseconds:r,rate:i})=>({time:r,fundingRate:i,direction:i===0?ue.None:i<0?ue.ToLong:ue.ToShort}))}),Rl=({fundingRateView:e,latestDatum:n,tooltipData:o})=>{const{nearestDatum:r}=o??{},i=q(),s=(r==null?void 0:r.datum)??n,a=s===n;return t.jsxs(ir,{accentColor:{[ue.ToLong]:"var(--color-negative)",[ue.ToShort]:"var(--color-positive)",[ue.None]:"var(--color-layer-6)"}[s.direction],children:[t.jsx("h4",{children:i(a?{key:h.CURRENT_FUNDING_RATE}:{key:h.HISTORICAL_FUNDING_RATE})}),t.jsx(Dl,{layout:"column",items:[{key:"direction",label:i({key:h.DIRECTION}),value:t.jsx(D,{type:I.Text,value:{[ue.ToLong]:`${i({key:h.SHORT_POSITION_SHORT})} → ${i({key:h.LONG_POSITION_SHORT})}`,[ue.ToShort]:`${i({key:h.LONG_POSITION_SHORT})} → ${i({key:h.SHORT_POSITION_SHORT})}`,[ue.None]:void 0}[s.direction]})},{key:"fundingRate",label:i({key:{[oe.OneHour]:h.RATE_1H,[oe.EightHour]:h.RATE_8H,[oe.Annualized]:h.ANNUALIZED}[e]}),value:t.jsx(D,{type:I.SmallPercent,value:{[oe.OneHour]:s.fundingRate,[oe.EightHour]:s.fundingRate*8,[oe.Annualized]:s.fundingRate*(24*365)}[e],showSign:yn.Both})},{key:"time",label:a?"Time Remaining":i({key:h.TIME}),value:t.jsx(D,{type:I.DateTime,value:s.time})}]})]})};var Dl=u(Se).withConfig({componentId:"sc-6igpsg-0"})({"--details-item-vertical-padding":"0.2rem"});const Ll=60*60*1e3,Yt=(e=0)=>({[oe.OneHour]:e,[oe.EightHour]:F(e).times(8).toNumber(),[oe.Annualized]:F(e).times(24*365).toNumber()}),sr=({selectedLocale:e})=>{const{isMobile:n}=fe(),o=q(),r=_(Ml,z),i=r==null?void 0:r[r.length-1],[s,a]=f.useState(oe.OneHour),[c,d]=f.useState(),p=i&&Yt(i.fundingRate)[s];return t.jsxs(Xi,{selectedLocale:e,data:r,yAxisScaleType:"symlog",margin:{left:n?0:88,right:0,top:60,bottom:32},padding:{left:.025,right:.025,top:.05,bottom:.05},series:[{dataKey:"funding-rate",xAccessor:l=>l==null?void 0:l.time,yAccessor:l=>l==null?void 0:l.fundingRate,colorAccessor:()=>"var(--color-text-1)",getCurve:({zoom:l})=>l>12?Qi:Zt}],tickFormatY:l=>`${(Yt(l)[s]*100).toFixed(Zi)}%`,renderXAxisLabel:({tooltipData:l})=>{var y;const g=((y=l.nearestDatum)==null?void 0:y.datum)??i;return t.jsx(Bl,{type:I.DateTime,value:g.time})},renderYAxisLabel:({tooltipData:l})=>{var y;const g=((y=l.nearestDatum)==null?void 0:y.datum)??i;return t.jsx(Fl,{type:I.SmallPercent,value:Yt(g.fundingRate)[s],accentColor:{[ue.ToLong]:"var(--color-negative)",[ue.ToShort]:"var(--color-positive)",[ue.None]:"var(--color-layer-6)"}[g.direction]})},renderTooltip:({tooltipData:l})=>t.jsx(Rl,{fundingRateView:s,tooltipData:l,latestDatum:i}),onTooltipContext:l=>d(l),minZoomDomain:Ll*4,numGridLines:1,slotEmpty:t.jsx(Mt,{id:"funding-chart-loading"}),children:[t.jsx(Ul,{children:t.jsx(go,{items:Object.keys(oe).map(l=>({value:l,label:{[oe.OneHour]:o({key:h.RATE_1H}),[oe.EightHour]:o({key:h.RATE_8H}),[oe.Annualized]:o({key:h.ANNUALIZED})}[l]??""})),value:s,onValueChange:a,size:De.XSmall})}),t.jsxs($l,{isShowing:!(c!=null&&c.tooltipOpen),children:[t.jsx("h4",{children:{[oe.OneHour]:o({key:h.CURRENT_RATE_1H}),[oe.EightHour]:o({key:h.CURRENT_RATE_8H}),[oe.Annualized]:o({key:h.CURRENT_ANNUALIZED_RATE})}[s]}),t.jsx(Nl,{type:I.SmallPercent,value:p,fractionDigits:xo,isNegative:p<0})]})]})},$l=u.div.withConfig({componentId:"sc-1hm2adw-0"})(["place-self:start center;padding:clamp(1.5rem,9rem - 15%,4rem);pointer-events:none;font:var(--font-large-book);background:radial-gradient(50% 50% at 50% 50%,var(--color-layer-2) 35%,transparent);border-radius:50%;text-align:center;transition:opacity var(--ease-out-expo) 0.25s;"," @media ","{place-self:start start;text-align:start;padding:1.25rem;}h4{font:var(--font-small-medium);color:var(--color-text-0);}"],({isShowing:e})=>!e&&j(["opacity:0;"]),te.mobile),Nl=u(D).withConfig({componentId:"sc-1hm2adw-1"})(["color:",";"],({isNegative:e})=>e?"var(--color-negative)":"var(--color-positive)"),Fl=u($t).withConfig({componentId:"sc-1hm2adw-2"})(["--axisLabel-offset:0.5rem;[data-side='left'] &{translate:calc(-50% - var(--axisLabel-offset)) 0;@media ","{translate:calc(50% + var(--axisLabel-offset)) 0;}}[data-side='right'] &{translate:calc(-50% - var(--axisLabel-offset)) 0;}"],te.mobile);var Bl=u($t).withConfig({componentId:"sc-1hm2adw-3"})({"--tw-shadow":"0 0 0.5rem var(--color-layer-2)","--tw-shadow-colored":"0 0 0.5rem var(--tw-shadow-color)",boxShadow:"var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)"}),Ul=u("div").withConfig({componentId:"sc-1hm2adw-4"})({isolation:"isolate",margin:"1rem",placeSelf:"start end"});function zl({buySellMarksToggle:e,buySellMarksToggleOn:n,tvWidget:o,isChartReady:r}){const i=_(Je),s=_(_o),a=i?s[i]:void 0,c=Ji();f.useEffect(()=>{!r||!o||o.onChartReady(()=>{o.headerReady().then(()=>{var d,p;n?((d=e==null?void 0:e.classList)==null||d.add(Be),o.activeChart().refreshMarks()):((p=e==null?void 0:e.classList)==null||p.remove(Be),o.activeChart().clearMarks())})})},[n,e,o,r,a,c])}const Hl=[Ct.StopMarket.ordinal,Ct.TakeProfitMarket.ordinal,Ct.Limit.ordinal],Nn=e=>Hl.includes(e.type.ordinal),Vl=e=>{const n=e*1e3,o=Date.now();return Math.round((n-o)/1e3)},Gl=e=>{var r,i;const n=(r=Y.stateManager.state)==null?void 0:r.market(e),o=(i=n==null?void 0:n.configs)==null?void 0:i.v4;return o?new sa(o.clobPairId,o.atomicResolution,o.stepBaseQuantums,o.quantumConversionExponent,o.subticksPerTick):null},Kl=(e,n)=>{const{subaccountNumber:o,marketId:r,type:i,side:s,size:a,timeInForce:c,goodTilBlock:d,goodTilBlockTime:p,postOnly:l,reduceOnly:g,price:y,triggerPrice:C}=e;if(o==null)return;const[v,m]=ea(e.type)?[n,C]:[y,n];return new ta.exchange.dydx.abacus.state.manager.HumanReadablePlaceOrderPayload(o,r,na().toString(),i.rawValue,s.rawValue,v,m,a,null,g,l,c==null?void 0:c.rawValue,oa(i)?he.OrderExecution.IOC:null,p&&Vl(p),d,Gl(r))},Yl=e=>new Promise(n=>{Y.cancelOrder(e,(o,r,i)=>{n({success:o,parsingError:r,data:i})})}),ql=(e,n,o)=>o!==e&&n-e>0==o-e>0,Wl=(e,n)=>{var s,a;const o=(a=(s=Y.stateManager.state)==null?void 0:s.marketOrderbook(e.marketId))==null?void 0:a.midPrice;if(!o)return null;const r=e.triggerPrice??e.price;if(ql(o,r,n))return null;if(e.type.ordinal===Ct.Limit.ordinal)return{title:ze.ORDER_MODIFICATION_ERROR_LIMIT_PRICE_CROSS,body:ze.ORDER_MODIFICATION_ERROR_USE_TRADE_FORM};const i=ra(e);return ia(e,!1)?i?{title:ze.ORDER_MODIFICATION_ERROR_SL_PRICE_LOWER}:{title:ze.ORDER_MODIFICATION_ERROR_SL_PRICE_HIGHER}:aa(e,!1)?i?{title:ze.ORDER_MODIFICATION_ERROR_TP_PRICE_HIGHER}:{title:ze.ORDER_MODIFICATION_ERROR_TP_PRICE_LOWER}:null},Fn="bold 10px Satoshi",Xl=({tvWidget:e,orderLineToggle:n,isChartReady:o,orderLinesToggleOn:r})=>{const[i,s]=f.useState(null),[a,c]=f.useState(void 0),d=q(),p=Ce(),l=f.useRef({}),g=_(ft),y=_(vt),C=_(gn),v=_(Je),m=_(uo,z),b=_(ca,z),T=la(wo.ffOrderModificationFromChart),x=f.useCallback(A=>{e&&e.onChartReady(()=>{e.headerReady().then(()=>{e.chart().dataReady(()=>{A()})})})},[e]),k=f.useCallback(({chartLine:A})=>{const{line:E,chartLineType:M}=A,{maybeQuantityColor:L,borderColor:$,backgroundColor:N,textColor:G,textButtonColor:V}=Co({appTheme:g,appColorMode:y,chartLineType:M});E.setQuantityBorderColor($).setBodyBackgroundColor(N).setBodyBorderColor($).setBodyTextColor(G).setQuantityTextColor(V).setBodyFont(Fn).setQuantityFont(Fn),L!=null&&E.setLineColor(L).setQuantityBackgroundColor(L)},[y,g]),O=f.useCallback(({key:A,label:E,chartLineType:M,price:L,size:$})=>{var ie;const N=!!($&&L),G=(ie=l.current[A])==null?void 0:ie.line;if(!N){G&&(G.remove(),delete l.current[A]);return}const V=F(L).toNumber(),K=Math.abs($).toString();if(G)G.getPrice()!==V&&G.setPrice(V),G.getQuantity()!==K&&G.setQuantity(K);else{const Z=e==null?void 0:e.chart().createPositionLine({disableUndo:!1}).setPrice(V).setQuantity(K).setText(E);if(Z){const ae={line:Z,chartLineType:M};k({chartLine:ae}),l.current[A]=ae}}},[k,e]),P=f.useCallback(()=>{var N,G,V;const A=`entry-${v}`,E=`liquidation-${v}`;if(!m){[A,E].forEach(K=>{var Z;const ie=(Z=l.current[K])==null?void 0:Z.line;ie&&(ie.remove(),delete l.current[K])});return}const M=(N=m.entryPrice)==null?void 0:N.current,L=(G=m.liquidationPrice)==null?void 0:G.current,$=(V=m.size)==null?void 0:V.current;O({key:A,label:d({key:h.ENTRY_PRICE_SHORT}),chartLineType:"entry",price:M,size:$}),O({key:E,label:d({key:h.LIQUIDATION}),chartLineType:"liquidation",price:L,size:$})},[d,v,m,O]),R=f.useRef({}),B=A=>{const{[A]:E,...M}=R.current;R.current=M},U=(A,E)=>{R.current={...R.current,[A.clientId]:{orderPayload:A,oldOrderId:E}}},H=da(),re=f.useCallback(async(A,E)=>{if(!E||!Nn(A))return;const M=A.triggerPrice??A.price,L=E.getPrice(),$=Wl(A,L);if($){H({title:d({key:$.title}),body:$.body&&d({key:$.body}),icon:t.jsx(Ql,{iconName:J.Warning})}),E.setPrice(M);return}const N=Kl(A,L);if(!N)return;Jt(en.TradingViewOrderModificationSubmitted({...N,previousOrderClientId:A.clientId,previousOrderPrice:M})),E.setPrice(L),U(N,A.id),p(ua(A.id)),p(ha({marketId:N.marketId,clientId:N.clientId,orderType:N.type}));const{success:G}=await Yl(A.id);if(!G){p(pa({orderId:A.id,errorParams:Ut})),p(En({clientId:N.clientId,errorParams:Ut})),E.setPrice(M),B(N.clientId);return}const V=await Y.chainTransactions.placeOrderTransaction(N),{error:K}=JSON.parse(V);K&&(E.remove(),B(N.clientId),p(En({clientId:N.clientId,errorParams:Ut})))},[p,d,H]),W=f.useCallback(()=>{const A=R.current;b&&b.forEach(E=>{var ct;const{id:M,type:L,status:$,side:N,cancelReason:G,size:V,triggerPrice:K,price:ie,trailingPercent:Z}=E,ae=M,ee=V.toString(),xe=L.rawValue,Oe=d({key:So[xe].orderTypeKey}),bt=Z?`${Oe} ${Z}%`:Oe,le=Object.values(A).find(se=>se.oldOrderId===M),it=!!b.find(se=>se.clientId===(le==null?void 0:le.orderPayload.clientId)),at=!!le&&!it||!G&&ma($),_e=(ct=l.current[ae])==null?void 0:ct.line,st=(le==null?void 0:le.orderPayload.triggerPrice)??(le==null?void 0:le.orderPayload.price),je=F(st??K??ie).toNumber();if(!at)_e&&(_e.remove(),delete l.current[ae]);else if(_e)_e.getPrice()!==je&&_e.setPrice(je),_e.getQuantity()!==ee&&_e.setQuantity(ee);else{const se=e==null?void 0:e.chart().createOrderLine({disableUndo:!1}).setPrice(je).setQuantity(ee).setText(bt);if(se){const kn={line:se,chartLineType:ga[N.name]};k({chartLine:kn}),l.current[ae]=kn}T&&Nn(E)&&(se==null||se.onMove(()=>re(E,se))),E.clientId&&A[E.clientId]&&(Jt(en.TradingViewOrderModificationSuccess({clientId:E.clientId})),B(E.clientId),p(fa(E)))}})},[b,d,e,T,k,re,p]),X=f.useCallback(()=>{Object.values(l.current).forEach(({line:A})=>{A.remove()}),l.current={}},[]),S=f.useCallback(()=>{r?(W(),P()):X()},[P,W,X,r]);return f.useEffect(()=>{o&&x(()=>{var A,E;r?(A=n==null?void 0:n.classList)==null||A.add(Be):(E=n==null?void 0:n.classList)==null||E.remove(Be)})},[r,n,x,o]),f.useEffect(()=>{o&&e&&(i?v&&a!==v?(e.activeChart().onSymbolChanged().subscribe(null,()=>{x(S)},!0),c(v)):x(S):(x(S),s(e),c(v)))},[i,e,o,v,S,x]),f.useEffect(()=>{i&&!o?X():C||X()},[o,X,C]),f.useEffect(()=>()=>X(),[v,X]),{chartLines:l.current}},Ql=u(we).withConfig({componentId:"sc-dzi5il-0"})({color:"var(--color-warning)"}),cr=({currentMarketId:e,isViewingUnlaunchedMarket:n,tvWidget:o,isWidgetReady:r,savedResolution:i})=>{var l;const s=Ce(),a=_(g=>va(g,e))??_n,c=r?o==null?void 0:o.chart():void 0,d=(l=c==null?void 0:c.resolution)==null?void 0:l.call(c);f.useEffect(()=>{if(r&&e!==(o==null?void 0:o.activeChart().symbol())){const g=i??a;o==null||o.setSymbol(e,g,()=>{})}},[e,r]),f.useEffect(()=>{d&&(d!==a&&(n||s(ba({marketId:e,resolution:d}))),p({resolution:d}))},[e,d,n,a]);const p=({resolution:g})=>{var C;const y=n?(C=ya[g])==null?void 0:C.defaultRange:xa[g].defaultRange;if(y){const v=Date.now()/1e3,m=(Date.now()-y)/1e3;o==null||o.activeChart().setVisibleRange({from:m,to:v},{percentRightMargin:10})}}},Zl=({orderbookCandlesToggle:e,isChartReady:n,orderbookCandlesToggleOn:o,tvWidget:r})=>(f.useEffect(()=>{!n||!r||r.onChartReady(()=>{r.headerReady().then(()=>{var i,s;o?(i=e==null?void 0:e.classList)==null||i.add(Be):(s=e==null?void 0:e.classList)==null||s.remove(Be),Y.toggleOrderbookCandles(o)})})},[o,e,r,n]),{orderbookCandlesToggleOn:o});var Jl=Rt,ed=Dt,td=Jl(ed,"DataView"),nd=td,od=Rt,rd=Dt,id=od(rd,"Promise"),ad=id,sd=Rt,cd=Dt,ld=sd(cd,"Set"),dd=ld,ud=Rt,hd=Dt,pd=ud(hd,"WeakMap"),md=pd,an=nd,sn=_a,cn=ad,ln=dd,dn=md,lr=wa,rt=Ca,Bn="[object Map]",gd="[object Object]",Un="[object Promise]",zn="[object Set]",Hn="[object WeakMap]",Vn="[object DataView]",fd=rt(an),vd=rt(sn),bd=rt(cn),yd=rt(ln),xd=rt(dn),Pe=lr;(an&&Pe(new an(new ArrayBuffer(1)))!=Vn||sn&&Pe(new sn)!=Bn||cn&&Pe(cn.resolve())!=Un||ln&&Pe(new ln)!=zn||dn&&Pe(new dn)!=Hn)&&(Pe=function(e){var n=lr(e),o=n==gd?e.constructor:void 0,r=o?rt(o):"";if(r)switch(r){case fd:return Vn;case vd:return Bn;case bd:return Un;case yd:return zn;case xd:return Hn}return n});var _d=Pe,wd=Ia,Cd=_d,Sd=ka,Id=Ta,kd=Aa,Td=Oa,Ad=ja,Od=Ea,jd="[object Map]",Ed="[object Set]",Pd=Object.prototype,Md=Pd.hasOwnProperty;function Rd(e){if(e==null)return!0;if(kd(e)&&(Id(e)||typeof e=="string"||typeof e.splice=="function"||Td(e)||Od(e)||Sd(e)))return!e.length;var n=Cd(e);if(n==jd||n==Ed)return!e.size;if(Ad(e))return!wd(e).length;for(var o in e)if(Md.call(e,o))return!1;return!0}var Dd=Rd;const dr=Sa(Dd);function un(e,n){const o={...e};for(const r in n)typeof e[r]!="object"||e[r]===null||Array.isArray(e[r])?n[r]!==void 0&&(o[r]=n[r]):o[r]=un(e[r],n[r]);return o}const Ld={width:800,height:500,interval:"1D",timezone:"Etc/UTC",container:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,news:!1,datawindow:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"1W"},{text:"1y",resolution:"1W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[],indicators:[],drawingTools:[]}},Gn=JSON.parse('[{"iso":"ar","dir":"rtl","language":"ar"},{"iso":"pt","dir":"ltr","language":"pt"},{"iso":"ca","dir":"ltr","language":"ca_ES"},{"iso":"cs","dir":"ltr","language":"cs"},{"iso":"de","dir":"ltr","language":"de"},{"iso":"en","dir":"ltr","language":"en"},{"iso":"es","dir":"ltr","language":"es"},{"iso":"fa","dir":"rtl","language":"fa"},{"iso":"fr","dir":"ltr","language":"fr"},{"iso":"he","dir":"rtl","language":"he_IL"},{"iso":"hu","dir":"ltr","language":"hu_HU"},{"iso":"id","dir":"ltr","language":"id_ID"},{"iso":"en","dir":"ltr","language":"en"},{"iso":"it","dir":"ltr","language":"it"},{"iso":"ja","dir":"ltr","language":"ja"},{"iso":"ko","dir":"ltr","language":"ko"},{"iso":"ms","dir":"ltr","language":"ms_MY"},{"iso":"pl","dir":"ltr","language":"pl"},{"iso":"ru","dir":"ltr","language":"ru"},{"iso":"sv","dir":"ltr","language":"sv"},{"iso":"th","dir":"ltr","language":"th"},{"iso":"tr","dir":"ltr","language":"tr"},{"iso":"vi","dir":"ltr","language":"vi"},{"iso":"zh-Hans","dir":"ltr","language":"zh"},{"iso":"zh-Hant","dir":"ltr","language":"zh_TW"},{"iso":"el","dir":"ltr","language":"el"},{"iso":"nl","dir":"ltr","language":"nl_NL"},{"iso":"ro","dir":"ltr","language":"ro"}]');let Kn=!1;function $d(){return"TT v27.006 (internal id c7d57a22 @ 2024-05-21T16:17:24.388Z)"}const ur=class{constructor(e){var n,o;if(this._id=`tradingview_${(1048576*(1+Math.random())|0).toString(16).substring(1)}`,this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!e.datafeed)throw new Error("Datafeed is not defined");!((n=e.overrides)===null||n===void 0)&&n["mainSeriesProperties.priceAxisProperties.lockScale"]&&(console.warn("mainSeriesProperties.priceAxisProperties.lockScale can not be set to true within the widget constructor"),delete e.overrides["mainSeriesProperties.priceAxisProperties.lockScale"]),this._options=un(Ld,e),((o=this._options.theme)!==null&&o!==void 0?o:"light").toLowerCase()==="dark"&&this._options.loading_screen===void 0&&(this._options.loading_screen={backgroundColor:"#131722"}),this._options.debug&&(Kn||(Kn=!0,console.log("Using TT v27.006 (internal id c7d57a22 @ 2024-05-21T16:17:24.388Z)"))),this._create()}setDebugMode(e){this._innerAPI().setDebugMode(e)}onChartReady(e){this._ready?e.call(this):this._readyHandlers.push(e)}headerReady(){return this._innerWindowLoaded.then(()=>this._innerWindow().headerReady())}onGrayedObjectClicked(e){this._doWhenInnerApiLoaded(n=>{n.onGrayedObjectClicked(e)})}onShortcut(e,n){this._doWhenInnerWindowLoaded(o=>{o.createShortcutAction(e,n)})}subscribe(e,n){this._doWhenInnerApiLoaded(o=>{o.subscribe(e,n)})}unsubscribe(e,n){this._doWhenInnerApiLoaded(o=>{o.unsubscribe(e,n)})}chart(e){return this._innerAPI().chart(e)}getLanguage(){return this._options.locale}setSymbol(e,n,o){this._innerAPI().changeSymbol(e,n,o)}remove(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)}closePopupsAndDialogs(){this._doWhenInnerApiLoaded(e=>{e.closePopupsAndDialogs()})}selectLineTool(e,n){this._innerAPI().selectLineTool(e,n)}selectedLineTool(){return this._innerAPI().selectedLineTool()}save(e,n){this._innerAPI().saveChart(e,n)}load(e,n){this._innerAPI().loadChart({json:e,extendedData:n})}getSavedCharts(e){this._innerAPI().getSavedCharts(e)}loadChartFromServer(e){this._innerAPI().loadChartFromServer(e)}saveChartToServer(e,n,o){this._innerAPI().saveChartToServer(e,n,o)}removeChartFromServer(e,n){this._innerAPI().removeChartFromServer(e,n)}onContextMenu(e){this._doWhenInnerApiLoaded(n=>{n.onContextMenu(e)})}createButton(e){return this._innerWindow().createButton(e)}createDropdown(e){return this._innerWindow().createDropdown(e)}showNoticeDialog(e){this._doWhenInnerApiLoaded(n=>{n.showNoticeDialog(e)})}showConfirmDialog(e){this._doWhenInnerApiLoaded(n=>{n.showConfirmDialog(e)})}showLoadChartDialog(){this._innerAPI().showLoadChartDialog()}showSaveAsChartDialog(){this._innerAPI().showSaveAsChartDialog()}symbolInterval(){return this._innerAPI().getSymbolInterval()}mainSeriesPriceFormatter(){return this._innerAPI().mainSeriesPriceFormatter()}getIntervals(){return this._innerAPI().getIntervals()}getStudiesList(){return this._innerAPI().getStudiesList()}getStudyInputs(e){return this._innerAPI().getStudyInputs(e)}getStudyStyles(e){return this._innerAPI().getStudyStyles(e)}addCustomCSSFile(e){this._innerWindow().addCustomCSSFile(e)}applyOverrides(e){this._options=un(this._options,{overrides:e}),this._doWhenInnerWindowLoaded(n=>{n.applyOverrides(e)})}applyStudiesOverrides(e){this._doWhenInnerWindowLoaded(n=>{n.applyStudiesOverrides(e)})}watchList(){return this._innerAPI().watchlist()}news(){return this._innerAPI().news()}widgetbar(){return this._innerAPI().widgetbar()}activeChart(){return this._innerAPI().activeChart()}activeChartIndex(){return this._innerAPI().activeChartIndex()}setActiveChart(e){return this._innerAPI().setActiveChart(e)}chartsCount(){return this._innerAPI().chartsCount()}layout(){return this._innerAPI().layout()}setLayout(e){this._innerAPI().setLayout(e)}layoutName(){return this._innerAPI().layoutName()}resetLayoutSizes(e){this._innerAPI().resetLayoutSizes(e)}changeTheme(e,n){return this._innerWindow().changeTheme(e,n)}getTheme(){return this._innerWindow().getTheme()}takeScreenshot(){this._doWhenInnerApiLoaded(e=>{e.takeScreenshot()})}lockAllDrawingTools(){return this._innerAPI().lockAllDrawingTools()}hideAllDrawingTools(){return this._innerAPI().hideAllDrawingTools()}drawOnAllChartsEnabled(){return this._innerAPI().drawOnAllChartsEnabled()}drawOnAllCharts(e){this._innerAPI().drawOnAllCharts(e)}magnetEnabled(){return this._innerAPI().magnetEnabled()}magnetMode(){return this._innerAPI().magnetMode()}undoRedoState(){return this._innerAPI().undoRedoState()}setIntervalLinkingEnabled(e){this._innerAPI().setIntervalLinkingEnabled(e)}setDateRangeLinkingEnabled(e){this._innerAPI().setDateRangeLinkingEnabled(e)}setTimeFrame(e){this._innerAPI().setTimeFrame(e)}symbolSync(){return this._innerAPI().symbolSync()}intervalSync(){return this._innerAPI().intervalSync()}crosshairSync(){return this._innerAPI().crosshairSync()}timeSync(){return this._innerAPI().timeSync()}dateRangeSync(){return this._innerAPI().dateRangeSync()}setFeatureEnabled(e,n){this._innerAPI().setFeatureEnabled(e,n)}getAllFeatures(){return this._innerWindow().getAllFeatures()}clearUndoHistory(){return this._innerAPI().clearUndoHistory()}undo(){return this._innerAPI().undo()}redo(){return this._innerAPI().redo()}startFullscreen(){this._innerAPI().startFullscreen()}exitFullscreen(){this._innerAPI().exitFullscreen()}takeClientScreenshot(e){return this._innerAPI().takeClientScreenshot(e)}navigationButtonsVisibility(){return this._innerWindow().getNavigationButtonsVisibility()}paneButtonsVisibility(){return this._innerWindow().getPaneButtonsVisibility()}dateFormat(){return this._innerWindow().getDateFormat()}timeHoursFormat(){return this._innerWindow().getTimeHoursFormat()}currencyAndUnitVisibility(){return this._innerWindow().getCurrencyAndUnitVisibility()}supportedChartTypes(){return this._innerAPI().supportedChartTypes()}watermark(){return this._innerAPI().watermark()}customSymbolStatus(){return this._innerWindow().customSymbolStatus()}setCSSCustomProperty(e,n){if(e.startsWith("--")===!1)throw new Error("customPropertyName should begin with a double hyphen");this._innerWindow().document.body.style.setProperty(e,n)}getCSSCustomPropertyValue(e){if(e.startsWith("--")===!1)throw new Error("customPropertyName should begin with a double hyphen");const n=this._innerWindow().document.body,o=n.style.getPropertyValue(e);return o||getComputedStyle(n).getPropertyValue(e)}unloadUnusedCharts(){this._innerAPI().unloadUnusedCharts()}linking(){return this._innerAPI().linking}_innerAPI(){return this._innerWindow().tradingViewApi}_innerWindow(){return this._iFrame.contentWindow}_doWhenInnerWindowLoaded(e){this._ready?e(this._innerWindow()):this._innerWindowLoaded.then(()=>{e(this._innerWindow())})}_doWhenInnerApiLoaded(e){this._doWhenInnerWindowLoaded(n=>{n.doWhenApiIsReady(()=>e(this._innerAPI()))})}_autoResizeChart(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px",Nd&&setTimeout(()=>{this._iFrame.style.height=window.innerHeight+"px"},30))}_create(){var e,n;const o=(n=(e=this._options.enabled_features)===null||e===void 0?void 0:e.includes("iframe_loading_compatibility_mode"))!==null&&n!==void 0&&n,[r,i]=this._render(!o),s=this._options.container,a=typeof s=="string"?document.getElementById(s):s;if(a===null)throw new Error(`There is no such element - #${this._options.container}`);a.innerHTML=r,this._iFrame=a.querySelector(`#${this._id}`);const c=this._iFrame;this._innerWindowLoaded=new Promise(d=>{const p=()=>{c.removeEventListener("load",p,!1),d()};c.addEventListener("load",p,!1)}),o&&(c.contentWindow?(c.contentWindow.document.open(),c.contentWindow.document.write(i),c.contentWindow.document.close()):console.warn("Unable to locate contentWindow for the created iframe. Please try disabling the `iframe_loading_compatibility_mode` featureset.")),(this._options.autosize||this._options.fullscreen)&&(c.style.width="100%",this._options.fullscreen||(c.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded.then(()=>{try{this._innerWindow().widgetReady(()=>{this._ready=!0;for(const d of this._readyHandlers)try{d.call(this)}catch(p){console.error(p)}this._innerWindow().initializationFinished()})}catch(d){if(d instanceof Error&&/widgetReady is not a function/.test(d.message))throw new Error(`There was an error when loading the library. Usually this error means the library failed to load its static files. Check that the library files are available at ${window.location.host}/${this._options.library_path||""} or correct the library_path option.`)}})}_render(e){const n=window;if(n[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.custom_formatters,brokerFactory:this._options.broker_factory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.broker_config||this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,rss_news_title:this._options.rss_news_title,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter,additionalSymbolInfoFields:this._options.additional_symbol_info_fields,headerWidgetButtonsMode:this._options.header_widget_buttons_mode,customTranslateFunction:this._options.custom_translate_function,symbolSearchComplete:this._options.symbol_search_complete,contextMenu:this._options.context_menu,settingsOverrides:this._options.settings_overrides,timeframe:this._options.timeframe,customTimezones:this._options.custom_timezones,customChartDescriptionFunction:this._options.custom_chart_description_function},this._options.saved_data)n[this._id].chartContent={json:this._options.saved_data},this._options.saved_data_meta_info&&(n[this._id].chartContentExtendedData=this._options.saved_data_meta_info);else if(!this._options.load_last_chart&&!this._options.symbol)throw new Error("Symbol is not defined: either 'symbol' or 'load_last_chart' option must be set");if(this._options.library_path&&!this._options.library_path.endsWith("/")&&console.warn("library_path option should contain a trailing forward slash"),this._options.locale){const s=encodeURIComponent(this._options.locale);Gn.findIndex(a=>a.language===s)>=0||(console.warn("locale isn't supported. Using default of `en`."),this._options.locale="en")}const o=function(s,a){var c;const d=new URL(`${s||""}`,location.href).href,p=JSON.parse('["bundles/runtime.1b112ce7f9c3b5dae043.js","bundles/__LANG__.9173.5b6fb0f669b139b53c7c.js","bundles/5640.8e5c6f585089cc102c8e.css","bundles/7326.a0fd7439af8a4c2cfaf5.js","bundles/library.ad008f196bdcde8f5932.js"]'),l=encodeURIComponent(a),g=(c=Gn.find(m=>m.language===l))!==null&&c!==void 0?c:{iso:"en",dir:"ltr"},y=`lang="${g.iso}" dir="${g.dir}"`;return`<!DOCTYPE html><html ${(v={bundles:`
${function(m,b,T){if(m===void 0)return"";const x=[],k=[];for(const O of m)O.endsWith(".js")?x.push(`<script defer crossorigin="anonymous" src="${O.replace("__LANG__",T)}"><\/script>`):O.endsWith(".css")&&k.push(`<link type="text/css" href="${b?O.replace(/\.css$/i,".rtl.css"):O}" rel="stylesheet"/>`);return[...x,...k].join(`
`)}(p,g.dir==="rtl",l)}
`,localeLanguage:l,htmlAttrs:y,libraryPath:d}).htmlAttrs}><head><base href="${v.libraryPath}"><meta charset="utf-8"><script>window===window.parent&&(location.href="about:blank")<\/script> ${v.bundles} </head><body class="chart-page unselectable on-widget"><div class="loading-indicator" id="loading-indicator"></div><script>var JSServer={},__initialEnabledFeaturesets=["trading_terminal"]<\/script><script>(function() {
		window.urlParams = (function () {
			var match,
				pl	 = /\\+/g,  // Regex for replacing addition symbol with a space
				search = /([^&=]+)=?([^&]*)/g,
				decode = function (s) { return decodeURIComponent(s.replace(pl, ' ')).replace(/<\\/?[^>]+(>|$)/g, ''); },
				query = function() {
					// We don't use hash on the url because: safari 13 throws an error if you attempt this
					// on a blob, and safari 14 will strip hash from blob urls.
					if (frameElement && frameElement.dataset.widgetOptions) {
						return frameElement.dataset.widgetOptions;
					} else {
						throw "Unexpected use of this page";
					}
				}(),
				result = {};

			while (match = search.exec(query)) {
				result[decode(match[1])] = decode(match[2]);
			}

			var additionalSettingsObject = window.parent[result.uid];

			var customObjectNames = ['datafeed', 'customFormatters', 'brokerFactory', 'save_load_adapter', 'customTranslateFunction', 'contextMenu'];

			for (var p in additionalSettingsObject) {
				if (customObjectNames.indexOf(p) === -1) {
					result[p] = JSON.stringify(additionalSettingsObject[p]);
				}
			}

			return result;
		})();

		window.locale = urlParams.locale;
		window.language = urlParams.locale; // a very big attention needed here
		window.customTranslateFunction = window.parent[urlParams.uid].customTranslateFunction;
		window.customChartDescriptionFunction = window.parent[urlParams.uid].customChartDescriptionFunction;

		window.addCustomCSSFile = function(href) {
			var link = document.createElement('link');
			link.setAttribute('type', 'text/css');
			link.setAttribute('rel', 'stylesheet');
			link.setAttribute('href', href);
			link.setAttribute('cross-origin', 'anonymous');

			window.loadedCustomCss = new Promise((resolve) => {
				link.onload = resolve;
				link.onerror = resolve;
			});
			document.body.appendChild(link);
		};

		window.loadedCustomCss = Promise.resolve();
		if (!!urlParams.customCSS) {
			window.addCustomCSSFile(urlParams.customCSS);
		}

		var loadingScreenParams = {};

		if (typeof urlParams.loading_screen === 'string') {
			try {
				loadingScreenParams = JSON.parse(urlParams.loading_screen);
			} catch(e) {}
		}

		var loadingIndicatorElement = document.getElementById('loading-indicator');

		if (loadingScreenParams.backgroundColor) {
			loadingIndicatorElement.style = 'background-color: ' + loadingScreenParams.backgroundColor;
		}

		!function(){"use strict";var t,e=new WeakMap;!function(t){t[t.Element=1]="Element",t[t.Document=9]="Document"}(t||(t={}));var n={mini:"xsmall",xxsmall:"xxsmall",xsmall:"xsmall",small:"small",medium:"medium",large:"large"};var s,i,o,r,l,c=(void 0===l&&(l=""),s='<div class="tv-spinner '.concat(l,'" role="progressbar"></div>'),o=function(n,s){var i,o;return i=null==s?document.documentElement:s.nodeType===t.Document?s.documentElement:s,e&&(o=e.get(i)),o||((o=i.ownerDocument.createRange()).selectNodeContents(i),e&&e.set(i,o)),o.createContextualFragment(n)}(s,i),null!==(r=o.firstElementChild)&&o.removeChild(r),r),a=function(){function t(t){this._shown=!1,this._el=c.cloneNode(!0),this.setSize(n[t||"large"])}return t.prototype.spin=function(t){return this._el.classList.add("tv-spinner--shown"),void 0===this._container&&(this._container=t,void 0!==t&&t.appendChild(this._el)),this._shown=!0,this},t.prototype.stop=function(t){return t&&void 0!==this._container&&this._container.removeChild(this._el),this._el&&this._el.classList.remove("tv-spinner--shown"),this._shown=!1,this},t.prototype.setStyle=function(t){var e=this;return Object.keys(t).forEach((function(n){var s=t[n];void 0!==s&&e._el.style.setProperty(n,s)})),this},t.prototype.style=function(){return this._el.style},t.prototype.setSize=function(t){var e=void 0!==t?"tv-spinner--size_".concat(t):"";return this._el.className="tv-spinner ".concat(e," ").concat(this._shown?"tv-spinner--shown":""),this},t.prototype.getEl=function(){return this._el},t.prototype.destroy=function(){this.stop(),delete this._el,delete this._container},t}();window.Spinner=a}();


		var spinnerColor = (loadingScreenParams.foregroundColor) ? loadingScreenParams.foregroundColor : undefined;

		var loadingSpinner = new Spinner('large').setStyle({
			'--tv-spinner-color': spinnerColor,
			zIndex: String(2e9),
		});
		loadingSpinner.getEl().classList.add('spinner');
		loadingSpinner.spin(loadingIndicatorElement);
	})();<\/script></body></html>`;var v}(this._options.library_path||"",this._options.locale);let r=new URL("about:blank");if(e){const s=new Blob([o],{type:"text/html"}),a=URL.createObjectURL(s);r=new URL(a)}const i="symbol="+encodeURIComponent(this._options.symbol||"")+"&interval="+encodeURIComponent(this._options.interval)+(this._options.toolbar_bg?"&toolbarbg="+encodeURIComponent(this._options.toolbar_bg.replace("#","")):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.custom_font_family?"&customFontFamily="+encodeURIComponent(this._options.custom_font_family):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.compare_symbols?"&compareSymbols="+encodeURIComponent(JSON.stringify(this._options.compare_symbols)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"")+(this._options.header_widget_buttons_mode?"&header_widget_buttons_mode="+encodeURIComponent(String(this._options.header_widget_buttons_mode)):"")+(this._options.time_scale?"&time_scale="+encodeURIComponent(JSON.stringify(this._options.time_scale)):"");return[`<iframe
		id="${this._id}" name="${this._id}" src="${r.href}" data-widget-options="${i}"
		${this._options.autosize||this._options.fullscreen?"":`width="${this._options.width}" height="${this._options.height}"`} title="Financial Chart" frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;">
	</iframe>`,o]}};typeof window<"u"&&(window.TradingView=window.TradingView||{},window.TradingView.version=$d);const Nd=!(typeof window>"u"||!window.navigator||!window.navigator.userAgent)&&window.navigator.userAgent.includes("CriOS"),hr=(e,n)=>n?e.tradingView.launchableMarketsChartConfig:e.tradingView.chartConfig,Fd=({symbolInfo:e,resolution:n,onRealtimeCallback:o,listenerGuid:r,lastBar:i})=>{if(!e.ticker)return;const s=`${e.ticker}/${Ot[n]}`,a={id:r,callback:o};let c=dt.get(s);if(c){c.handlers[r]=a;return}c={subscribeUID:r,resolution:n,lastBar:i,handlers:{[r]:a}},dt.set(s,c),Y.handleCandlesSubscription({channelId:s,subscribe:!0})},Bd=e=>{for(const n of dt.keys()){const o=dt.get(n),{handlers:r}=o??{};if(o&&(r!=null&&r[e])&&(delete o.handlers[e],Object.keys(o.handlers).length===0)){Y.handleCandlesSubscription({channelId:n,subscribe:!1}),dt.delete(n);break}}};function Ud(e,n,o){const r=Ra[o],[i,s,a]=[ke(e),ke(r),ke(n)],c=a.minus(i).dividedToIntegerBy(s);return i.plus(c.multipliedBy(s)).dividedToIntegerBy(1e3).toNumber()}const zd=(e,n,o,r,i,s,a,c,d)=>{var b;const p=Tt(Pa(n),I.Fiat,{decimalSeparator:a.decimal,groupSeparator:a.group,selectedLocale:c}),l=Tt(Io.sum(n.map(T=>T.size)),I.Asset,{fractionDigits:tn,decimalSeparator:a.decimal,groupSeparator:a.group,selectedLocale:c}),g=n[0],y=Ma()(e.getState(),g.id),C={ASSET_SIZE:l,ASSET:(b=y==null?void 0:y.asset)==null?void 0:b.id,PRICE:p},v=s({key:g.side.name===$e.Buy.name?h.BUY_MARK_TOOLTIP:h.SELL_MARK_TOOLTIP,params:C}),m=g.side.name===$e.Buy.name?{border:d.positive,background:d.positive}:{border:d.negative,background:d.negative};return{id:o,time:Ud(r,g.createdAtMilliseconds,i)??0,minSize:16,text:v,labelFontColor:d.textPrimary,color:m,label:g.side.name===$e.Buy.name?"B":"S"}},Hd=ko.local().get("zoneName"),Yn={supported_resolutions:Oo(Ot),supports_marks:!0,exchanges:[{value:"dYdX",name:"dYdX",desc:"dYdX v4 exchange"}],symbols_types:[{name:"crypto",value:"crypto"}]},Vd=(e,n,o,r,i,s,a)=>({onReady:c=>{setTimeout(()=>c(Yn),0)},searchSymbols:(c,d,p,l)=>{l([])},resolveSymbol:async(c,d)=>{const p=To(c||Re),{tickSizeDecimals:l}=Da(e.getState(),p.symbol)??{},g=l?10**l:o??100,y={ticker:p.symbol,name:p.full_name,description:p.description,type:p.type,exchange:"dYdX",listed_exchange:"dYdX",has_intraday:!0,has_daily:!0,minmov:1,pricescale:g,session:"24x7",intraday_multipliers:["1","5","15","30","60","240"],supported_resolutions:Yn.supported_resolutions,data_status:"streaming",timezone:Hd,format:"price"};setTimeout(()=>d(y),0)},getMarks:async(c,d,p,l,g)=>{const y=ft(e.getState()),C=vt(e.getState()),[v,m]=[d*1e3,p*1e3];if(!La(e.getState(),c.ticker))return;const x=(_o(e.getState())[c.ticker]??[]).filter(P=>P.createdAtMilliseconds>=v&&P.createdAtMilliseconds<=m),k=Io.groupBy(x,"orderId"),O=Object.entries(k).map(([P,R])=>zd(e,R,P,v,g,a,i,s,$a[y][C]));l(O)},getBars:async(c,d,p,l,g)=>{var x;if(!c)return;const{countBack:y,from:C,to:v,firstDataRequest:m}=p,b=C*1e3;let T=v*1e3;m&&d==="1D"&&(T+=1);try{const k=Na(r)(e.getState(),c.ticker,d),O=Fa({bars:k,fromMs:b,toMs:T,firstDataRequest:m,orderbookCandlesToggleOn:r});let P;if(O.length<y){const U=(x=O==null?void 0:O[O.length-1])==null?void 0:x.time;P=await n({marketId:c.ticker,resolution:d,fromMs:b,toMs:U||T}),e.dispatch(Ba({candles:P,marketId:c.ticker,resolution:d}))}const R=e.getState().configs.displayUnit,B=[...O,...(P==null?void 0:P.map(Ua(r)))??[]].map(U=>({...U,volume:R===nn.Fiat?U.usdVolume:U.assetVolume})).reverse();if(B.length===0){l([],{noData:!0});return}m&&Pn.set(`${c.ticker}/${Ot[d]}`,{...B[B.length-1]}),l(B,{noData:!1})}catch(k){Ao("tradingView/dydxfeed/getBars",k),g(k)}},subscribeBars:(c,d,p,l,g)=>{g(),Fd({symbolInfo:c,resolution:d,onRealtimeCallback:p,listenerGuid:l,onResetCacheNeededCallback:g,lastBar:Pn.get(`${c.ticker}/${Ot[d]}`)})},unsubscribeBars:c=>{Bd(c)}});function Gd(e,n){const o=Ce(),r=q(),i=_(gn),s=!0,a=f.useRef(i),c=f.useRef(e),d=f.useRef(n);return f.useEffect(()=>{a.current=i,c.current=e,d.current=n},[i,e,n]),f.useCallback((p,l)=>{var b,T;if(!a.current||l<0||!c.current)return[];const g=(T=(b=Y.stateManager.state)==null?void 0:b.marketOrderbook(c.current))==null?void 0:T.midPrice;if(!g)return[];const[y,C]=g<l?[$e.Sell,h.DRAFT_LIMIT_SELL]:[$e.Buy,h.DRAFT_LIMIT_BUY],v=ke(l).toFixed(d.current??At),m=()=>{Y.clearTradeInputValues({shouldResetSize:!1}),Y.setTradeValue({field:ge.type,value:za.LIMIT}),Y.setTradeValue({field:ge.side,value:y.rawValue}),o(Ha({limitPriceInput:v})),Jt(en.TradingViewLimitOrderDrafted({marketId:c.current,price:v}))};return[{position:"top",text:r({key:C,params:{PRICE:v}}),click:m}]},[s,o,r])}const Kd=({tvWidgetRef:e,orderLineToggleRef:n,orderLinesToggleOn:o,setOrderLinesToggleOn:r,orderbookCandlesToggleRef:i,orderbookCandlesToggleOn:s,setOrderbookCandlesToggleOn:a,buySellMarksToggleRef:c,buySellMarksToggleOn:d,setBuySellMarksToggleOn:p,setIsChartReady:l})=>{const g=q(),y=Va(),C=jo(),v=Ce(),{group:m,decimal:b}=jt(),T=_(ft),x=_(vt),k=_(Je),O=_(et),P=_(no),{getCandlesForDatafeed:R,getMarketTickSize:B}=Ga(),U=_(hr),H=f.useMemo(()=>Eo({savedConfig:U}),[U]),[re,W]=f.useState({}),{tickSizeDecimals:X}=ht(_(tt)),S=(k?re[k]??X:X)??void 0,A=f.useCallback(({toggleRef:M,tvWidget:L,isOn:$,setToggleOn:N,label:G,tooltip:V})=>{M.current=L.createButton(),M.current.innerHTML=`<span>${G}</span> <div class="toggle"></div>`,M.current.setAttribute("title",V),$&&M.current.classList.add(Be),M.current.onclick=()=>N(K=>!K)},[]);f.useEffect(()=>{(async()=>{if(k&&S===void 0){const M=await B(k);W(L=>({...L,[k]:ke(M).decimalPlaces()??void 0}))}})()},[k,S,B]);const E=Gd(k,S);return f.useEffect(()=>{if(k&&S!==void 0){const M=Mo(),L=wn({appTheme:T,appColorMode:x}),$=ke(10).exponentiatedBy(S??2).toNumber(),N={...M,...L,datafeed:Vd(Ro,R,$,s,{decimal:b,group:m},O,g),interval:H??_n,locale:Po[O],symbol:k,saved_data:dr(U)?void 0:U,auto_save_delay:1},G=new ur(N);e.current=G,G.onChartReady(()=>{var V,K,ie;(V=e.current)==null||V.onContextMenu(E),(K=e.current)==null||K.headerReady().then(()=>{if(e.current){A({toggleRef:n,tvWidget:e.current,isOn:o,setToggleOn:r,label:g({key:h.ORDER_LINES}),tooltip:g({key:h.ORDER_LINES_TOOLTIP})});const Z=Ya.ohlc,{title:ae,body:ee}=Z({stringGetter:g,stringParams:{},urlConfigs:y,featureFlags:C});A({toggleRef:i,tvWidget:e.current,isOn:s,setToggleOn:a,label:`${ae}*`,tooltip:ee}),A({toggleRef:c,tvWidget:e.current,isOn:d,setToggleOn:p,label:g({key:h.BUYS_SELLS_TOGGLE}),tooltip:g({key:h.BUYS_SELLS_TOGGLE_TOOLTIP})})}}),(ie=e==null?void 0:e.current)==null||ie.subscribe("onAutoSaveNeeded",()=>{var Z;return(Z=e==null?void 0:e.current)==null?void 0:Z.save(ae=>{v(Ka(ae))})}),l(!0)})}return()=>{var M,L,$,N;(M=n.current)==null||M.remove(),n.current=null,(L=i.current)==null||L.remove(),i.current=null,($=c.current)==null||$.remove(),c.current=null,(N=e.current)==null||N.remove(),e.current=null,l(!1)}},[O,P,!!k,S!==void 0,n,i,c,p,r,a,s,e]),{savedResolution:H}},Yd=e=>e!==null&&e.tagName==="IFRAME",pr=({chartLines:e,tvWidget:n,isWidgetReady:o})=>{const r=_(ft),i=_(vt);f.useEffect(()=>{var s;n&&o&&((s=n.changeTheme)==null||s.call(n,qa[r]).then(()=>{var l,g,y,C;const a=n==null?void 0:n._id;if(a){const v=document==null?void 0:document.getElementById(a);if(Yd(v)&&v.contentWindow){const m=v.contentWindow.document.documentElement;switch(r){case zt.Classic:m==null||m.classList.remove("theme-dark","theme-light");break;case zt.Dark:m==null||m.classList.remove("theme-light"),m==null||m.classList.add("theme-dark");break;case zt.Light:m==null||m.classList.remove("theme-dark"),m==null||m.classList.add("theme-light");break;default:Wa(r);break}}}const{overrides:c,studies_overrides:d}=wn({appTheme:r,appColorMode:i});n==null||n.applyOverrides(c),n==null||n.applyStudiesOverrides(d);const p=(y=(g=(l=n==null?void 0:n.activeChart())==null?void 0:l.getAllStudies())==null?void 0:g.find(v=>v.name==="Volume"))==null?void 0:y.id;p&&((C=n==null?void 0:n.activeChart())==null?void 0:C.getStudyById(p)).applyOverrides({"volume.color.0":d["volume.volume.color.0"],"volume.color.1":d["volume.volume.color.1"]}),e&&Object.values(e).forEach(({chartLineType:v,line:m})=>{const{maybeQuantityColor:b,borderColor:T,backgroundColor:x,textColor:k,textButtonColor:O}=Co({chartLineType:v,appTheme:r,appColorMode:i});b&&m.setLineColor(b).setQuantityBackgroundColor(b),m.setQuantityBorderColor(T).setBodyBackgroundColor(x).setBodyBorderColor(T).setBodyTextColor(k).setQuantityTextColor(O)})}))},[r,i,o])},qd=()=>{const[e,n]=f.useState(!0),[o,r]=f.useState(!0),[i,s]=f.useState(!0);return{orderbookCandlesToggleOn:e,setOrderbookCandlesToggleOn:n,orderLinesToggleOn:o,setOrderLinesToggleOn:r,buySellMarksToggleOn:i,setBuySellMarksToggleOn:s}};function Wd(e){const n=f.useRef();return f.useEffect(()=>{n.current=e}),n.current}const mr=({isChartReady:e})=>t.jsxs(Xd,{isChartReady:e,children:[!e&&t.jsx(Mt,{id:"tv-chart-loading"}),t.jsx("div",{id:"tv-price-chart"})]}),Xd=u.div.withConfig({componentId:"sc-rdz8oy-0"})([""," user-select:none;pointer-events:initial;height:100%;#tv-price-chart{",";@media (prefers-reduced-motion:no-preference){transition:0.2s var(--ease-out-expo);}}"],w.stack,({isChartReady:e})=>!e&&j(["filter:blur(3px);translate:0 0 1rem;opacity:0;"])),gr=()=>{const[e,n]=f.useState(!1),o=_(Je)??Re,r=f.useRef(null),i=r.current,s=i==null?void 0:i._ready,a=f.useRef(null),c=a.current,d=f.useRef(null),p=d.current,l=f.useRef(null),g=l.current,{orderLinesToggleOn:y,setOrderLinesToggleOn:C,orderbookCandlesToggleOn:v,setOrderbookCandlesToggleOn:m,setBuySellMarksToggleOn:b,buySellMarksToggleOn:T}=qd(),{savedResolution:x}=Kd({tvWidgetRef:r,orderLineToggleRef:a,orderLinesToggleOn:y,setOrderLinesToggleOn:C,orderbookCandlesToggleRef:d,orderbookCandlesToggleOn:v,setOrderbookCandlesToggleOn:m,buySellMarksToggleRef:l,buySellMarksToggleOn:T,setBuySellMarksToggleOn:b,setIsChartReady:n});cr({currentMarketId:o,tvWidget:i,isWidgetReady:s,savedResolution:x});const{chartLines:k}=Xl({tvWidget:i,orderLineToggle:c,isChartReady:e,orderLinesToggleOn:y});Zl({orderbookCandlesToggle:p,isChartReady:e,orderbookCandlesToggleOn:v,tvWidget:i}),zl({buySellMarksToggle:g,buySellMarksToggleOn:T,tvWidget:i,isChartReady:e}),pr({tvWidget:i,isWidgetReady:s,chartLines:k});const O=_(Do),P=Wd(O);return f.useEffect(()=>{var R;if(!(!e||!i)&&P!==O){const B=(R=i.activeChart)==null?void 0:R.call(i);B==null||B.resetData()}},[O,i,e,P]),t.jsx(mr,{isChartReady:e})},Qd=ko.local().get("zoneName"),qn=new Map,Wn={supported_resolutions:Oo(Lo),supports_marks:!0,exchanges:[{value:"dYdX",name:"dYdX",desc:"dYdX v4 exchange"}],symbols_types:[{name:"crypto",value:"crypto"}]},Zd=(e,n)=>({onReady:o=>{setTimeout(()=>o(Wn),0)},searchSymbols:(o,r,i,s)=>{s([])},resolveSymbol:async(o,r)=>{const i=To(o||Re),s=n?10**n:100,a={ticker:i.symbol,name:i.full_name,description:i.description,type:i.type,exchange:"dYdX",listed_exchange:"dYdX",has_intraday:!0,has_daily:!0,minmov:1,pricescale:s,session:"24x7",intraday_multipliers:["60","240"],supported_resolutions:Wn.supported_resolutions,timezone:Qd,format:"price"};setTimeout(()=>r(a),0)},getMarks:async(o,r,i,s,a)=>{s([])},getBars:async(o,r,i,s,a)=>{if(!o)return;const c=Xa(o.ticker),{from:d,firstDataRequest:p}=i,l=d*1e3,g=`${o.ticker}-${r}`;try{const C=[...qn.get(g)??[]].filter(v=>v.time>=l);if(p){let v=[];if(C.length)v=C;else{const m=await Qa.getCandles({asset:c,timeframe:Lo[r]}),b=(m==null?void 0:m[c])??[];b&&(v=[...(b==null?void 0:b.map(Za))??[]],qn.set(g,v))}s(v,{noData:!1})}else s([],{noData:!0})}catch(y){Ao("tradingView/launchableMarketFeed/getBars",y),a(y)}},subscribeBars:(o,r,i,s,a)=>{},unsubscribeBars:o=>{}}),Jd=({tvWidgetRef:e,setIsChartReady:n,marketId:o})=>{const r=Ja(),i=_(ft),s=_(vt),a=_(et),c=_(g=>hr(g,!0)),d=Eo({savedConfig:c})??void 0,p=Ue(o),l=es((p==null?void 0:p.price)??0);return f.useEffect(()=>{if(o){const g=Mo(!0),y=wn({appTheme:i,appColorMode:s}),C={...g,...y,datafeed:Zd(Ro,l),interval:d??_n,locale:Po[a],symbol:o,saved_data:dr(c)?void 0:c,auto_save_delay:1,disabled_features:[...(g==null?void 0:g.disabled_features)??[],"chart_scroll"]},v=new ur(C);e.current=v,v.onChartReady(()=>{var m;(m=e==null?void 0:e.current)==null||m.subscribe("onAutoSaveNeeded",()=>{var b;return(b=e==null?void 0:e.current)==null?void 0:b.save(T=>{r(ts(T))})}),n(!0)})}return()=>{var g;(g=e.current)==null||g.remove(),e.current=null,n(!1)}},[r,!!o,a,n,l,e]),{savedResolution:d}},eu=({marketId:e})=>{const[n,o]=f.useState(!1),r=f.useRef(null),i=r.current,s=i==null?void 0:i._ready,{savedResolution:a}=Jd({marketId:e,tvWidgetRef:r,setIsChartReady:o});return cr({currentMarketId:e,isViewingUnlaunchedMarket:!0,tvWidget:i,isWidgetReady:s,savedResolution:a}),pr({tvWidget:i,isWidgetReady:s}),t.jsx(mr,{isChartReady:n})},fr=({launchableMarketId:e})=>{const n=q(),o=_(et),{uiRefresh:r}=pe,[i,s]=f.useState("Price"),a=f.useMemo(()=>e?[{content:t.jsx(eu,{marketId:e}),forceMount:!0,label:n({key:h.PRICE_CHART_SHORT}),value:"Price"},{content:t.jsx(rr,{launchableMarketId:e}),label:n({key:h.DETAILS}),value:"Details"}]:[{content:t.jsx(gr,{}),forceMount:!0,label:n({key:h.PRICE_CHART_SHORT}),value:"Price"},{content:t.jsx(ar,{onChartClick:({side:c,price:d,size:p})=>{Y.setTradeValue({field:ge.side,value:c}),Y.setTradeValue({field:ge.limitPrice,value:d}),Y.setTradeValue({field:ge.size,value:p})},stringGetter:n,selectedLocale:o}),label:n({key:h.DEPTH_CHART_SHORT}),value:"Depth"},{content:t.jsx(sr,{selectedLocale:o}),label:n({key:h.FUNDING_RATE_CHART_SHORT}),value:"Funding"},{content:t.jsx(or,{}),label:n({key:h.DETAILS}),value:"Details"}],[e,o,n]);return t.jsx(ot,{value:i,onValueChange:s,dividerStyle:r?"underline":"border",items:a,slotToolbar:t.jsx(tr,{launchableMarketId:e}),withTransitions:!1})},vr=({className:e,launchableMarketId:n})=>{const o=Ce(),r=q(),i=Ue(n),s=i&&$o(i.id),c=[{title:r({key:h.DEPOSIT_TO_DESTINATION,params:{DESTINATION_CHAIN:"MegaVault"}}),body:r({key:h.MARKET_LAUNCH_DETAILS_2,params:{DEPOSIT_AMOUNT:t.jsx(nu,{type:I.Asset,value:1e4,slotRight:t.jsx(ou,{symbol:"USDC"}),fractionDigits:0}),APR_PERCENTAGE:t.jsx(ru,{type:I.Percent,value:.3456}),PAST_DAYS:30}})},{title:r({key:h.TRADE}),body:r({key:h.AVAILABLE_TO_TRADE_POST_LAUNCH,params:{MARKET:s}})}].map((d,p)=>t.jsxs(iu,{children:[t.jsx(au,{children:p+1}),t.jsxs(su,{children:[t.jsx(cu,{children:d.title}),t.jsx(lu,{children:d.body})]})]},d.title));return t.jsxs(tu,{className:e,children:[t.jsx(du,{children:r({key:h.INSTANTLY_LAUNCH,params:{MARKET:s}})}),t.jsx(uu,{children:c}),t.jsx(ns,{side:"top",detailItems:[{key:"deposit",label:r({key:h.DEPOSIT}),value:t.jsx(hu,{type:I.Asset,value:1e4,slotRight:t.jsx(pu,{symbol:"USDC"}),fractionDigits:0})},{key:"time-until-live",label:r({key:h.TIME_UNTIL_LIVE}),value:t.jsx(mu,{children:r({key:h.INSTANT})})}],children:t.jsxs(Le,{action:os.Primary,disabled:!i,onClick:()=>{n&&o(Ge(Ke.LaunchMarket({defaultLaunchableMarketId:n})))},children:[r({key:h.BEGIN_LAUNCH})," →"]})})]})},tu=u.section.withConfig({componentId:"sc-9w81ps-0"})(["display:grid;grid-template-rows:auto 1fr auto;gap:1rem;padding:1rem;button{width:100%;}"]);var nu=u(D).withConfig({componentId:"sc-9w81ps-1"})({display:"inline-block"}),ou=u(nt).withConfig({componentId:"sc-9w81ps-2"})({marginBottom:"-0.125rem",marginLeft:"0.25rem",display:"inline-block"}),ru=u(D).withConfig({componentId:"sc-9w81ps-3"})({display:"inline-block"}),iu=u("div").withConfig({componentId:"sc-9w81ps-4"})({display:"flex",flexDirection:"row",gap:"0.5rem"}),au=u("div").withConfig({componentId:"sc-9w81ps-5"})({display:"flex",height:"3rem",width:"3rem",minWidth:"3rem",alignItems:"center",justifyContent:"center",borderRadius:"50%",backgroundColor:"var(--color-layer-3)",color:"var(--color-text-0)"}),su=u("div").withConfig({componentId:"sc-9w81ps-6"})({display:"flex",flexDirection:"column"}),cu=u("span").withConfig({componentId:"sc-9w81ps-7"})({color:"var(--color-text-1)"}),lu=u("span").withConfig({componentId:"sc-9w81ps-8"})({color:"var(--color-text-0)"}),du=u("h2").withConfig({componentId:"sc-9w81ps-9"})({fontSize:"var(--fontSize-large)",color:"var(--color-text-2)"}),uu=u("div").withConfig({componentId:"sc-9w81ps-10"})({display:"flex",flexDirection:"column",gap:"1rem"}),hu=u(D).withConfig({componentId:"sc-9w81ps-11"})({display:"inline",color:"var(--color-text-1)"}),pu=u(nt).withConfig({componentId:"sc-9w81ps-12"})({marginBottom:"-0.125rem",marginLeft:"0.25rem",display:"inline"}),mu=u("span").withConfig({componentId:"sc-9w81ps-13"})({color:"var(--color-positive)"}),br=(e=>(e.MARKET_CAP="MARKET_CAP",e.SPOT_VOLUME_24H="SPOT_VOLUME_24H",e))(br||{});const gu=Object.values(br),fu=({value:e,stat:n})=>{switch(n){case"MARKET_CAP":return t.jsx(qt,{type:I.Fiat,value:e,fractionDigits:At});case"SPOT_VOLUME_24H":return t.jsx(qt,{type:I.Fiat,value:e,fractionDigits:At});default:return t.jsx(qt,{type:I.Text,value:e})}},yr=({launchableMarketId:e,showMidMarketPrice:n=!0})=>{const o=q(),{isTablet:r}=fe(),i=Ue(e),{marketCap:s,price:a,reportedMarketCap:c,tickSizeDecimals:d,volume24h:p}=ht(i),l=s?!1:!!c,g={MARKET_CAP:l?c:s,SPOT_VOLUME_24H:p},y={MARKET_CAP:l?"self-reported-cmc":void 0,SPOT_VOLUME_24H:void 0},C={MARKET_CAP:t.jsxs(xu,{children:[o({key:h.MARKET_CAP}),l&&t.jsx(we,{iconName:J.CautionCircle})]}),SPOT_VOLUME_24H:o({key:h.SPOT_VOLUME_24H})};return t.jsxs(vu,{children:[n&&t.jsxs(yu,{children:[t.jsx(D,{type:I.Fiat,value:a,fractionDigits:d}),t.jsx(Pt,{})]}),t.jsx(bu,{items:gu.map(v=>({key:v,label:C[v],tooltip:y[v],value:t.jsx(fu,{value:g[v],stat:v})})),layout:r?"grid":"rowColumns",withSeparators:!r})]})},vu=u.div.withConfig({componentId:"sc-oc36au-0"})(["@media ","{"," "," isolation:isolate;align-items:stretch;margin-left:1px;}@media ","{border-bottom:solid var(--border-width) var(--color-border);}"],te.notTablet,w.scrollArea,w.row,te.tablet),bu=u(Se).withConfig({componentId:"sc-oc36au-1"})(["font:var(--font-mini-book);@media ","{"," font:var(--font-small-book);> *{padding:0.625rem 1rem;}}"],te.tablet,w.withOuterAndInnerBorders),yu=u.div.withConfig({componentId:"sc-oc36au-2"})([""," "," font:var(--font-medium-medium);background-color:var(--color-layer-2);box-shadow:0.25rem 0 0.75rem var(--color-layer-2);padding-left:1rem;gap:1rem;"],w.sticky,w.row),qt=u(D).withConfig({componentId:"sc-oc36au-3"})([""," ",""],w.row,({color:e})=>e&&j(["color:",";"],e));var xu=u("span").withConfig({componentId:"sc-oc36au-4"})({display:"flex",alignItems:"center",gap:"0.25rem"});const _u=()=>{const[e,n]=f.useState(),o=f.useCallback(()=>{n(rs("hour"))},[]);return is({callback:o}),t.jsx(D,{type:I.Text,value:e!==void 0?as(e):void 0})};var xr=(e=>(e.OraclePrice="OraclePrice",e.PriceChange24H="PriceChange24H",e.Volume24H="Volume24H",e.Trades24H="Trades24H",e.OpenInterest="OpenInterest",e.Funding1H="Funding1H",e.NextFunding="NextFunding",e.MaxLeverage="MaxLeverage",e))(xr||{});const wu=["OraclePrice","PriceChange24H","OpenInterest","Funding1H","Volume24H","Trades24H","NextFunding","MaxLeverage"],_r=({showMidMarketPrice:e=!0})=>{const n=q(),{isTablet:o}=fe(),{tickSizeDecimals:r,initialMarginFraction:i,effectiveInitialMarginFraction:s}=_(tt,z)??{},a=_(ss),c=f.useRef(a),d=_(xn,z),p=d===void 0,{uiRefresh:l}=pe,{oraclePrice:g,perpetual:y,priceChange24H:C,priceChange24HPercent:v,assetId:m}=d??{};f.useEffect(()=>{c.current=a},[a]);const b=_(Do),{nextFundingRate:T,openInterest:x,openInterestUSDC:k,trades24H:O,volume24H:P}=y??{},R={OraclePrice:g,NextFunding:void 0,Funding1H:T,OpenInterest:b===nn.Fiat?k:x,PriceChange24H:C,Trades24H:O,Volume24H:P,MaxLeverage:void 0},B={OraclePrice:n({key:h.ORACLE_PRICE}),NextFunding:n({key:h.NEXT_FUNDING}),Funding1H:n({key:h.FUNDING_RATE_1H_SHORT}),OpenInterest:n({key:h.OPEN_INTEREST}),PriceChange24H:n({key:h.CHANGE_24H}),Trades24H:n({key:h.TRADES_24H}),Volume24H:n({key:h.VOLUME_24H}),MaxLeverage:t.jsx(Wt,{tooltip:"maximum-leverage",children:n({key:h.MAXIMUM_LEVERAGE})})};return t.jsxs(Cu,{children:[e&&t.jsxs(Iu,{children:[t.jsx(No,{}),t.jsx(Pt,{})]}),t.jsx(Su,{items:(l?Object.values(xr):wu).map(U=>({key:U,label:B[U],tooltip:U,value:t.jsx(Tu,{value:R[U],stat:U,tickSizeDecimals:r,assetId:m??"",isLoading:p,priceChange24HPercent:v,initialMarginFraction:i,effectiveInitialMarginFraction:s,useFiatDisplayUnit:b===nn.Fiat})})),isLoading:p,layout:o?"grid":"rowColumns",withSeparators:!o})]})},Cu=u.div.withConfig({componentId:"sc-1h5n0ah-0"})(["@media ","{"," "," isolation:isolate;align-items:stretch;margin-left:1px;}@media ","{border-bottom:solid var(--border-width) var(--color-border);}"],te.notTablet,w.scrollArea,w.row,te.tablet),Su=u(Se).withConfig({componentId:"sc-1h5n0ah-1"})(["font:var(--font-mini-book);@media ","{"," font:var(--font-small-book);> *{padding:0.625rem 1rem;}}"],te.tablet,w.withOuterAndInnerBorders),Iu=u.div.withConfig({componentId:"sc-1h5n0ah-2"})([""," "," font:var(--font-medium-medium);background-color:var(--color-layer-2);box-shadow:0.25rem 0 0.75rem var(--color-layer-2);padding-left:1rem;gap:1rem;"],w.sticky,w.row),Ie=u(D).withConfig({componentId:"sc-1h5n0ah-3"})([""," ",""],w.row,({color:e})=>e&&j(["color:",";"],e)),ku=u.span.withConfig({componentId:"sc-1h5n0ah-4"})([""," "," > span{","}gap:0.25rem;"],w.row,({color:e})=>e&&j(["color:",";"],e),w.row),Tu=({value:e,stat:n,tickSizeDecimals:o,assetId:r,isLoading:i,priceChange24HPercent:s,initialMarginFraction:a,effectiveInitialMarginFraction:c,useFiatDisplayUnit:d})=>{const p=F(e),l=p.isNegative()?"var(--color-negative)":"var(--color-positive)";switch(n){case"OraclePrice":return t.jsx(Ie,{type:I.Fiat,value:e,fractionDigits:o});case"OpenInterest":return t.jsx(Ie,{type:I.Number,value:e,fractionDigits:d?0:cs,slotRight:t.jsx(Au,{assetId:r,entryPoint:"openInterestAssetTag"})});case"Funding1H":return t.jsx(Ie,{type:I.Percent,value:e,color:l,fractionDigits:xo});case"NextFunding":return t.jsx(_u,{});case"PriceChange24H":return t.jsxs(ku,{color:i?void 0:l,children:[!i&&t.jsx(Ls,{value:p}),t.jsx(Ie,{type:I.Fiat,value:p.abs(),fractionDigits:o}),!i&&t.jsx(Ie,{type:I.Percent,value:F(s).abs(),withParentheses:!0})]});case"Trades24H":return t.jsx(Ie,{type:I.Number,value:e,fractionDigits:0});case"Volume24H":return t.jsx(Ie,{type:I.Fiat,value:e,fractionDigits:0});case"MaxLeverage":return t.jsx(pt,{value:a?Qe.ONE.div(a):null,newValue:c?Qe.ONE.div(c):null,withDiff:a!==c,type:I.Multiple});default:return t.jsx(Ie,{type:I.Text,value:e})}};var Au=u(ls).withConfig({componentId:"sc-1h5n0ah-5"})({marginLeft:"0.5ch"});const Ou=({closeDropdown:e,onRowAction:n})=>{const[o,r]=f.useState(Ht.ALL),i=q(),[s,a]=f.useState(),{filteredMarkets:c,marketFilters:d}=$s(o,s),p=mt(),l=jo(),{hasPotentialMarketsData:g}=hs(),{uiRefresh:y}=pe,C=f.useMemo(()=>[{columnKey:"market",getCellValue:x=>x.displayId,label:i({key:h.MARKET}),renderCell:({assetId:x,displayId:k,isNew:O,effectiveInitialMarginFraction:P,initialMarginFraction:R})=>t.jsxs(Eu,{isFavorited:!1,children:[t.jsx(wr,{uiRefreshEnabled:y,symbol:x}),t.jsx("h2",{children:k}),t.jsx(Fe,{children:t.jsx(D,{type:I.Multiple,value:ps({effectiveInitialMarginFraction:P,initialMarginFraction:R}),fractionDigits:0})}),O&&t.jsx(Fe,{isHighlighted:!0,children:i({key:h.NEW})})]})},{columnKey:"oraclePrice",getCellValue:x=>x.oraclePrice,label:i({key:h.PRICE}),renderCell:({oraclePrice:x,tickSizeDecimals:k})=>t.jsx(_t,{type:I.Fiat,value:x,fractionDigits:k})},{columnKey:"priceChange24HPercent",getCellValue:x=>x.priceChange24HPercent,label:i({key:h._24H}),renderCell:({priceChange24HPercent:x})=>t.jsx(Hu,{children:x?t.jsx(Uu,{type:I.Percent,value:x,isNegative:F(x).isNegative()}):t.jsx(_t,{type:I.Text,value:null})})},{columnKey:"volume24H",getCellValue:x=>x.volume24H,label:i({key:h.VOLUME}),renderCell:x=>t.jsx(_t,{type:I.CompactFiat,value:x.volume24H})},!y&&{columnKey:"openInterest",getCellValue:x=>x.openInterestUSDC,label:i({key:h.OPEN_INTEREST}),renderCell:x=>t.jsx(_t,{type:I.CompactFiat,value:x.openInterestUSDC})}].filter(qe),[i,y]),v=f.useMemo(()=>o===Ht.PREDICTION_MARKET?t.jsx(Vu,{children:i({key:h.PREDICTION_MARKET_DESC})}):null,[o,i]),[m,b]=oo({key:ro.HasSeenElectionBannerTRUMPWIN,defaultValue:!1}),T=f.useMemo(()=>{const x=new Date;return!m&&(l!=null&&l[wo.ffShowPredictionMarketsUi])&&x<new Date("2024-11-06T23:59:59")?t.jsxs(Du,{children:[t.jsx($u,{}),t.jsxs(ms,{to:`${be.Trade}/${mn.TRUMPWIN}`,onClick:()=>{e()},children:["🇺🇸 ",i({key:h.TRADE_US_PRESIDENTIAL_ELECTION})," →"]}),t.jsx(Lu,{onClick:()=>b(!0),iconName:J.Close})]}):null},[b,m,i,e,l]);return t.jsxs(t.Fragment,{children:[t.jsx(Ru,{children:t.jsx(Ns,{selectedFilter:o,filters:d,onChangeFilter:r,onSearchTextChange:a})}),T,t.jsxs(Fu,{children:[t.jsx(Bu,{withInnerBorders:!0,data:c,getRowKey:x=>x.id,onRowAction:n,defaultSortDescriptor:{column:"volume24H",direction:"descending"},label:i({key:h.MARKETS}),columns:C,initialPageSize:15,paginationBehavior:"showAll",slotEmpty:t.jsxs(zu,{children:[o===Ht.NEW&&!s?t.jsxs(t.Fragment,{children:[t.jsx("h2",{children:i({key:h.QUERY_NOT_FOUND,params:{QUERY:i({key:h.NEW})}})}),g&&t.jsx("p",{children:i({key:h.ADD_DETAILS_TO_LAUNCH_MARKET})})]}):t.jsxs(t.Fragment,{children:[t.jsx("h2",{children:i({key:h.QUERY_NOT_FOUND,params:{QUERY:s??""}})}),t.jsx("p",{children:i({key:h.MARKET_SEARCH_DOES_NOT_EXIST_YET})})]}),g&&t.jsx("div",{children:t.jsx(Le,{onClick:()=>p(`${be.Markets}/${gs.New}`),size:De.Small,children:i({key:h.PROPOSE_NEW_MARKET})})})]})}),v]})]})},ju=f.memo(({currentMarketId:e,launchableMarketId:n,symbol:o=""})=>{const[r,i]=f.useState(!1),s=q(),a=mt(),c=mo(fs,e),d=Ue(n),p=!!d,{uiRefresh:l}=pe,g=!l&&!p&&e!=null?t.jsx(Fe,{children:t.jsx(D,{type:I.Multiple,value:c,fractionDigits:0})}):void 0,y=e===mn.TRUMPWIN&&t.jsx(Nu,{});return t.jsx(Mu,{uiRefreshEnabled:l,open:r,onOpenChange:i,sideOffset:1,slotTrigger:t.jsxs(t.Fragment,{children:[y,t.jsxs(Pu,{$isOpen:r,uiRefreshEnabled:l,children:[!l&&r?t.jsx(Gu,{children:s({key:h.SELECT_MARKET})}):t.jsxs(Ku,{children:[d?t.jsxs(t.Fragment,{children:[t.jsx(Yu,{src:d.logo,alt:d.name}),t.jsxs(qu,{children:[t.jsx(Wu,{children:s({key:h.NOT_LAUNCHED})}),t.jsx(Xu,{children:e})]})]}):t.jsxs(t.Fragment,{children:[t.jsx(wr,{symbol:o,uiRefreshEnabled:l}),t.jsx(Qu,{children:e})]}),g]}),t.jsxs(Zu,{children:[!l&&r&&s({key:h.TAP_TO_CLOSE}),t.jsx(ds,{isOpen:r})]})]})]}),triggerType:us.MarketDropdown,children:t.jsx(Ou,{closeDropdown:()=>i(!1),onRowAction:C=>{a(`${be.Trade}/${C}`),i(!1)}})})}),Eu=u.div.withConfig({componentId:"sc-1d7jln4-0"})([""," gap:0.5rem;svg{color:var(--color-text-0);}",""],w.row,({isFavorited:e})=>e&&j(["svg{color:var(--color-favorite);path{fill:var(--color-favorite);}}"])),Pu=u.div.withConfig({componentId:"sc-1d7jln4-1"})(["position:relative;"," padding:0 1.25rem;transition:width 0.1s;",""],w.spacedRow,({uiRefreshEnabled:e})=>j(["",""],e?j(["gap:1rem;"]):j(["width:var(--sidebar-width);"]))),Mu=u(vs).withConfig({componentId:"sc-1d7jln4-2"})([""," --popover-item-height:",";--popover-backgroundColor:var(--color-layer-2);display:flex;flex-direction:column;height:calc( 100vh - var(--page-header-height) - var(--market-info-row-height) - var(--page-footer-height) );"," max-width:100vw;box-shadow:0 0 0 1px var(--color-border);border-radius:0;&[data-state='open']{animation:"," 0.2s var(--ease-out-expo);}&[data-state='closed']{animation:"," 0.2s;}&:focus-visible{outline:none;}"],bo.popover,({uiRefreshEnabled:e})=>e?j(["2.75rem"]):j(["3.375rem"]),({uiRefreshEnabled:e})=>j(["",""],e?j(["width:var(--marketsDropdown-openWidth);"]):j(["width:var(--marketsDropdown-openWidth-deprecated);"])),ye(["from{opacity:0;scale:0.9;max-height:0;}"]),ye(["to{opacity:0;scale:0.95;max-height:0;}"])),Ru=u(vn).withConfig({componentId:"sc-1d7jln4-3"})(["gap:0.5rem;border-bottom:solid var(--border-width) var(--color-border);padding:1rem 1rem 0.5rem;"]),Du=u.div.withConfig({componentId:"sc-1d7jln4-4"})([""," background-color:var(--color-layer-1);padding:0.9063rem 1rem;font:var(--font-base-medium);color:var(--color-text-1);border-bottom:solid var(--border-width) var(--color-border);justify-content:space-between;position:relative;& > *{z-index:1;}"],w.row),wr=u(nt).withConfig({componentId:"sc-1d7jln4-5"})(["",""],({uiRefreshEnabled:e})=>j(["",""],e&&j(["--asset-icon-size:1.5em;"]))),Lu=u(gt).withConfig({componentId:"sc-1d7jln4-6"})(["--button-backgroundColor:transparent;--button-border:none;"]),$u=u.div.withConfig({componentId:"sc-1d7jln4-7"})(["width:573px;height:100%;background-image:",";background-repeat:no-repeat;position:absolute;z-index:0;right:0;"],({theme:e})=>`
    linear-gradient(90deg, ${e.layer1} 0%, ${e.tooltipBackground} 53%, ${e.layer1} 99%),
    url('/AmericanFlag.png')
  `),Nu=u.div.withConfig({componentId:"sc-1d7jln4-8"})(["background:url('/AmericanFlag2.png') no-repeat;mix-blend-mode:luminosity;position:absolute;top:0;left:0;bottom:0;right:0;"]),Fu=u.div.withConfig({componentId:"sc-1d7jln4-9"})(["overflow:scroll;position:relative;height:100%;"]),Bu=u(Fo).withConfig({componentId:"sc-1d7jln4-10"})(["--tableCell-padding:0.5rem 1rem;--table-header-height:2.25rem;thead{--stickyArea-totalInsetTop:0px;--stickyArea-totalInsetBottom:0px;tr{height:var(--stickyArea-topHeight);}}tfoot{--stickyArea-totalInsetTop:0px;--stickyArea-totalInsetBottom:3px;tr{height:var(--stickyArea-bottomHeight);}}tr{height:var(--popover-item-height);}"]),_t=u(D).withConfig({componentId:"sc-1d7jln4-11"})(["color:",";color:var(--color-text-2);"],({isNegative:e})=>e?"var(--color-negative)":"var(--color-positive)"),Uu=u(D).withConfig({componentId:"sc-1d7jln4-12"})(["color:",";"],({isNegative:e})=>e?"var(--color-negative)":"var(--color-positive)"),zu=u.div.withConfig({componentId:"sc-1d7jln4-13"})([""," justify-content:center;align-items:center;text-align:center;gap:1rem;padding:2rem 1.5rem;h2{font:var(--font-medium-book);font-weight:500;}"],w.column);var Hu=u("div").withConfig({componentId:"sc-1d7jln4-14"})({display:"inline-flex",alignItems:"center",gap:"0.5ch",minWidth:"max-content"}),Vu=u("div").withConfig({componentId:"sc-1d7jln4-15"})({padding:"1rem",color:"var(--color-text-0)",font:"var(--font-small-medium)"}),Gu=u("h2").withConfig({componentId:"sc-1d7jln4-16"})({color:"var(--color-text-2)",font:"var(--font-medium-medium)"}),Ku=u("div").withConfig({componentId:"sc-1d7jln4-17"})({display:"grid",gridAutoFlow:"column",alignItems:"center",justifyContent:"space-between",gap:"0.625rem"}),Yu=u("img").withConfig({componentId:"sc-1d7jln4-18"})({height:"1em",width:"auto",borderRadius:"50%"}),qu=u("div").withConfig({componentId:"sc-1d7jln4-19"})({display:"flex",flexDirection:"column",textAlign:"start"}),Wu=u("span").withConfig({componentId:"sc-1d7jln4-20"})({font:"var(--font-mini-book)"}),Xu=u("h2").withConfig({componentId:"sc-1d7jln4-21"})({marginTop:"-0.25rem",color:"var(--color-text-2)",font:"var(--font-medium-medium)"}),Qu=u("h2").withConfig({componentId:"sc-1d7jln4-22"})({color:"var(--color-text-2)",font:"var(--font-medium-medium)"}),Zu=u("p").withConfig({componentId:"sc-1d7jln4-23"})({display:"flex",flexDirection:"row",alignItems:"center",gap:"0.5rem",color:"var(--color-text-0)",font:"var(--font-small-book)"});const Cr=({className:e,launchableMarketId:n})=>{const{id:o=""}=_(Ae,z)??{},r=_(bs)??"",{uiRefresh:i}=pe,s=n&&fo(n);return t.jsxs(Ju,{className:e,children:[t.jsx(ju,{launchableMarketId:n,currentMarketId:s??r,symbol:o}),t.jsx(Pt,{fullHeight:!!i}),n?t.jsx(yr,{launchableMarketId:n}):t.jsx(_r,{})]})},Ju=u.div.withConfig({componentId:"sc-12pl186-0"})([""," "," display:grid;grid-template:var(--market-info-row-height) / auto;grid-auto-flow:column;justify-content:start;align-items:stretch;"],w.container,w.scrollAreaFadeEnd),Sr=({launchableMarketId:e})=>{const n=q(),o=f.useMemo(()=>e?[{value:"Statistics",label:n({key:h.STATISTICS}),content:t.jsx(yr,{launchableMarketId:e,showMidMarketPrice:!1})},{value:"About",label:n({key:h.ABOUT}),content:t.jsx(rr,{launchableMarketId:e})}]:[{value:"Statistics",label:n({key:h.STATISTICS}),content:t.jsx(_r,{showMidMarketPrice:!1})},{value:"About",label:n({key:h.ABOUT}),content:t.jsx(or,{})}],[e,n]);return t.jsx(Zo,{defaultValue:"Statistics",items:o})},eh=e=>t.jsx(th,{...e,paginationBehavior:"showAll"}),th=u(Fo).withConfig({componentId:"sc-1w08zp-0"})(["--histogram-width:100%;--histogram-side:1;"," --histogram-gradient-to:",";--stickyArea1-background:var(--color-layer-2);--table-header-height:1.75rem;@media ","{--table-cell-align:end;--table-firstColumn-cell-align:end;--table-lastColumn-cell-align:end;}text-align:right;transform-style:flat;thead{font:var(--font-mini-book);}tbody tr{--histogram-bucket-size:1;isolation:isolate;contain:strict;position:relative;&[data-side='1']{--accent-color:var(--color-positive);}&[data-side='2']{--accent-color:var(--color-negative);}transition:outline var(--ease-out-expo) 0.2s,background-color 0.2s;}td{transition:outline 0.2s;height:1.25rem;font:var(--font-mini-book);@media ","{height:1rem;}}tbody tr:hover,tr:focus-visible,td:focus-visible{color:var(--color-text-2);background-color:var(--color-layer-3);}@supports (background:-webkit-named-image(i)){td{position:relative;--approximate-column-width:0.39;--histogram-width:calc(100% / var(--approximate-column-width));}}"],({histogramSide:e})=>e==="left"?j(["--histogram-side:1;"]):j(["--histogram-side:-1;"]),({histogramSide:e})=>e,te.notTablet,te.tablet),nh=ye(["20%{color:var(--accent-color);}"]),Ir=u(D).withConfig({componentId:"sc-1w08zp-1"})(["color:var(--color-text-1);"," &:empty{&:before,&:after{content:'';}opacity:1;}"],({highlightText:e})=>e&&j(["@media (prefers-reduced-motion:no-preference){transition:outline 0.2s,color var(--ease-out-expo) 0.3s;animation:"," 0.5s;}"],nh)),Xn=.4,oh=1e4,kr=({className:e,histogramSide:n="left"})=>{const o=q(),{isTablet:r}=fe(),i=_(Ae,z),s=_(tt,z),a=_(ys,z)??xs,{id:c=""}=i??{},{stepSizeDecimals:d,tickSizeDecimals:p,stepSize:l}=s??{},{decimal:g,group:y}=jt(),C=_(et),v=a.map(({createdAtMilliseconds:b,price:T,size:x,side:k},O)=>({key:O,createdAtMilliseconds:b,price:T,side:bn(k),size:x})),m=f.useMemo(()=>{const b={columnKey:"time",getCellValue:T=>T.createdAtMilliseconds,label:o({key:h.TIME}),renderCell:T=>t.jsx(ih,{type:I.Time,value:T.createdAtMilliseconds})};return[r&&b,r&&{columnKey:"side",getCellValue:T=>T.size,label:o({key:h.SIDE}),renderCell:T=>t.jsx(ah,{type:I.Text,value:o({key:T.side===he.OrderSide.BUY?h.BUY:h.SELL})})},{columnKey:"size",getCellValue:T=>T.size,label:o({key:h.SIZE}),tag:c,renderCell:T=>t.jsx(sh,{type:I.Text,value:_s(T.size,{decimalSeparator:g,groupSeparator:y,selectedLocale:C,stepSize:l??10**(-1*tn),stepSizeDecimals:d??tn})})},{columnKey:"price",getCellValue:T=>T.price,label:o({key:h.PRICE}),tag:"USD",renderCell:T=>t.jsx(Ir,{type:I.Fiat,value:T.price,fractionDigits:p,useGrouping:!1})},!r&&b].filter(qe)},[d,p,c,n,o]);return t.jsx(rh,{className:e,label:"Recent Trades",data:v,columns:m,getRowKey:b=>`${b.key}`,getRowAttributes:b=>({"data-side":b.side,style:{"--histogram-bucket-size":Math.min(b.price*b.size/oh*Xn,Xn)}}),histogramSide:n,selectionBehavior:"replace",slotEmpty:t.jsx(Mt,{id:"live-trades-loading"}),withScrollSnapRows:!0,withScrollSnapColumns:!0,withFocusStickyRows:!0,withInnerBorders:r},"live-trades")},rh=u(eh).withConfig({componentId:"sc-1vfobec-0"})(["background:var(--color-layer-2);tr{--histogram-bucket-size:1;&[data-side=","]{--accent-color:var(--color-positive);}&[data-side=","]{--accent-color:var(--color-negative);}td:first-child{&:before,&:after{content:'';inset:1px -2px;position:absolute;","}&:before{width:calc(var(--histogram-bucket-size) * var(--histogram-width));border-radius:2px;background:linear-gradient( to var(--histogram-gradient-to),var(--accent-color),transparent 500% );opacity:0.4;tr:hover &{opacity:0.75;}@media (prefers-reduced-motion:no-preference){animation:"," 0.5s;}}}}@media ","{--tableCell-padding:0.3em 1em;font-size:0.875em;}"],he.OrderSide.BUY,he.OrderSide.SELL,({histogramSide:e})=>e==="left"?j(["right:auto;"]):j(["left:auto;"]),ye(["20%{opacity:0.6;}"]),te.tablet);var ih=u(Ir).withConfig({componentId:"sc-1vfobec-1"})({color:"var(--color-text-0)",fontFeatureSettings:"var(--fontFeature-monoNumbers)"}),ah=u(D).withConfig({componentId:"sc-1vfobec-2"})({color:"var(--accent-color)"}),sh=u(D).withConfig({componentId:"sc-1vfobec-3"})({color:"var(--accent-color)","@media (max-width: 64rem)":{color:"var(--color-text-1)"}});const ch=({value:e,label:n,icon:o})=>t.jsx(Lt,{asChild:!0,value:e,children:t.jsxs(dh,{children:[t.jsx(we,{iconName:o,size:"1.375rem"}),t.jsx("span",{children:n})]})}),Tr=({isViewingUnlaunchedMarket:e})=>{const n=q(),o=_(et),[r,i]=f.useState("Price"),s=[{content:t.jsx(uh,{}),label:n({key:h.WALLET}),value:"Account",icon:J.Coins},{content:t.jsx(gr,{}),forceMount:!0,label:n({key:h.PRICE}),value:"Price",icon:J.PriceChart},!e&&{content:t.jsx(ar,{stringGetter:n,selectedLocale:o}),label:n({key:h.DEPTH_CHART_SHORT}),value:"Depth",icon:J.DepthChart},!e&&{content:t.jsx(sr,{selectedLocale:o}),label:n({key:h.FUNDING_RATE_CHART_SHORT}),value:"Funding",icon:J.FundingChart},!e&&{content:t.jsx(Qn,{children:t.jsx(Bo,{histogramSide:"right",layout:"horizontal",hideHeader:!0})}),label:n({key:h.ORDERBOOK_SHORT}),value:"OrderBook",icon:J.Orderbook},!e&&{content:t.jsx(Qn,{children:t.jsx(kr,{histogramSide:"left"})}),label:n({key:h.RECENT}),value:"LiveTrades",icon:J.Clock}].filter(qe);return t.jsx(lh,{value:r,onValueChange:i,items:s.map(a=>({...a,customTrigger:t.jsx(ch,{label:a.label,value:a.value,icon:a.icon},a.value)})),side:"bottom"})},lh=u(ot).withConfig({componentId:"sc-1iohf2l-0"})(["--scrollArea-height:20rem;--stickyArea0-background:var(--color-layer-2);--tabContent-height:calc(20rem - 2rem - var(--tabs-currentHeight));min-height:100%;gap:var(--border-width);> header{padding:1rem 1.25rem;> [role='tablist']{margin:auto;gap:0.5rem;}}"]),dh=u(ho).withConfig({componentId:"sc-1iohf2l-1"})(["padding:0 0.5rem;span{transition:0.25s var(--ease-out-expo);}&[data-state='inactive']{--button-width:var(--button-height);gap:0;span{font-size:0;opacity:0;}}"]),Qn=u.div.withConfig({componentId:"sc-1iohf2l-2"})([""," --scrollArea-height:var(--tabContent-height);--stickyArea0-topGap:0px;"],w.scrollArea);var uh=u(Cn).withConfig({componentId:"sc-1iohf2l-3"})({"--account-info-section-height":"var(--tabContent-height)"});const Ar=({launchableMarketId:e})=>{const{name:n,id:o}=_(Ae,z)??{},r=mt(),{displayId:i,priceChange24H:s,priceChange24HPercent:a}=_(xn,z)??{},c=Ue(e),d=c?t.jsxs(gh,{children:[t.jsx(fh,{src:c.logo,alt:c.name}),t.jsxs(Zn,{children:[t.jsx("h3",{children:c.name}),t.jsx("span",{children:$o(c.id)})]})]}):t.jsxs(vh,{children:[t.jsx(bh,{symbol:o}),t.jsxs(Zn,{children:[t.jsx("h3",{children:n}),t.jsx("span",{children:i})]})]});return t.jsxs(hh,{children:[t.jsx(ws,{onClick:()=>r(be.Markets)}),d,t.jsxs(ph,{children:[t.jsx(No,{}),t.jsx(mh,{type:I.Percent,value:F(a).abs(),isNegative:F(s).isNegative()})]})]})},hh=u.header.withConfig({componentId:"sc-fmz6kb-0"})([""," "," z-index:2;"," padding-left:1rem;padding-right:1.5rem;gap:1rem;color:var(--color-text-2);background-color:var(--color-layer-2);"],w.contentSectionDetachedScrollable,w.stickyHeader,w.row),Zn=u.div.withConfig({componentId:"sc-fmz6kb-1"})([""," h3{font:var(--font-large-medium);}> :nth-child(2){font:var(--font-mini-book);color:var(--color-text-0);}"],w.rowColumn),ph=u.div.withConfig({componentId:"sc-fmz6kb-2"})(["margin-left:auto;"," justify-items:flex-end;"],w.rowColumn),mh=u(D).withConfig({componentId:"sc-fmz6kb-3"})(["font:var(--font-small-book);color:",";"],({isNegative:e})=>e?"var(--color-negative)":"var(--color-positive)");var gh=u("div").withConfig({componentId:"sc-fmz6kb-4"})({display:"inline-flex",alignItems:"center",gap:"1ch",minWidth:"max-content"}),fh=u("img").withConfig({componentId:"sc-fmz6kb-5"})({height:"2.5rem",width:"2.5rem",borderRightColor:"50%"}),vh=u("div").withConfig({componentId:"sc-fmz6kb-6"})({display:"inline-flex",alignItems:"center",gap:"1ch",minWidth:"max-content"}),bh=u(nt).withConfig({componentId:"sc-fmz6kb-7"})({fontSize:"2.5rem"});const yh=()=>{const e=f.useRef(null),{isTablet:n}=fe(),o=_(Uo),r=to(`/${be.Trade}/:marketId`),{marketId:i}=(r==null?void 0:r.params)??{},[s,a]=f.useState(!0);return n?t.jsxs(_h,{children:[t.jsx(Ar,{launchableMarketId:i}),t.jsxs("div",{children:[t.jsx(Ne,{children:t.jsx(Tr,{isViewingUnlaunchedMarket:!0})}),t.jsx(Ne,{children:t.jsx(Sr,{launchableMarketId:i})}),t.jsx(Ne,{children:t.jsx(vr,{launchableMarketId:i})})]})]}):t.jsxs(xh,{ref:e,tradeLayout:o,isHorizontalPanelOpen:s,children:[t.jsx(Sh,{children:t.jsx(Cr,{launchableMarketId:i})}),t.jsxs(wh,{gridArea:"Side",children:[t.jsx(Cn,{}),t.jsx(Ch,{launchableMarketId:i})]}),t.jsx(hn,{gridArea:"Inner",children:t.jsx(fr,{launchableMarketId:i})}),t.jsx(hn,{gridArea:"Horizontal",children:t.jsx(rn,{isOpen:s,setIsOpen:a})})]})},xh=u.article.withConfig({componentId:"sc-1ox0cl5-0"})(["--horizontalPanel-height:18rem;--layout-default:'Top Top' auto 'Inner Side' minmax(0,1fr) 'Horizontal Side' minmax(var(--tabs-height),var(--horizontalPanel-height)) / 1fr var(--sidebar-width);--layout-default-desktopMedium:'Top Side' auto 'Inner Side' minmax(0,1fr) 'Horizontal Side' minmax(var(--tabs-height),var(--horizontalPanel-height)) / 1fr var(--sidebar-width);--layout:var(--layout-default);@media ","{--layout:var(--layout-default-desktopMedium);}"," "," width:0;min-width:100%;height:0;min-height:100%;display:grid;grid-template:var(--layout);"," @media (prefers-reduced-motion:no-preference){transition:grid-template 0.2s var(--ease-out-expo);}> *{display:grid;}> section{contain:strict;}"],te.desktopMedium,({tradeLayout:e})=>({[Ze.Default]:null,[Ze.Reverse]:j(["direction:rtl;> *{direction:initial;}"])})[e],({isHorizontalPanelOpen:e})=>!e&&j(["--horizontalPanel-height:auto !important;"]),w.withOuterAndInnerBorders),_h=u.article.withConfig({componentId:"sc-1ox0cl5-1"})([""," min-height:100%;"," --stickyArea1-topHeight:var(--page-header-height-mobile);--stickyArea1-bottomHeight:var(--page-footer-height-mobile);"," > div:nth-child(2){flex:1;"," justify-content:start;}"],w.contentContainerPage,w.stickyArea1,w.withInnerHorizontalBorders,w.flexColumn),hn=u.section.withConfig({componentId:"sc-1ox0cl5-2"})(["grid-area:",";"],({gridArea:e})=>e);var wh=u(hn).withConfig({componentId:"sc-1ox0cl5-3"})({gridTemplateRows:"auto minmax(0,1fr)"});const Ch=u(vr).withConfig({componentId:"sc-1ox0cl5-4"})(["border-top:var(--border-width) solid var(--color-border);"]);var Sh=u("header").withConfig({componentId:"sc-1ox0cl5-5"})({gridArea:"Top"});const Ih=()=>{const e=q(),[n,o]=f.useState(!1),r=_(io,z),{side:i,type:s,summary:a}=r??{},{total:c}=a??{},d=Cs(s),p=bn(i),l=!!c;return t.jsx(Ss,{isOpen:n,setIsOpen:o,slotTrigger:t.jsxs(kh,{hasSummary:l,children:[l?t.jsxs(Th,{children:[t.jsxs(Ah,{children:[t.jsx("span",{children:e({key:So[d].orderTypeKey})}),t.jsx(Is,{size:ks.Medium,orderSide:p})]}),t.jsx(Oh,{type:I.Fiat,value:c,showSign:yn.None,useGrouping:!0})]}):e({key:h.TAP_TO_TRADE}),t.jsx(jh,{iconName:J.Caret,size:"1.5rem"})]})})},kh=u.div.withConfig({componentId:"sc-1rl267r-0"})([""," "," height:",";padding:0 1.5rem;font:var(--font-medium-book);color:var(--color-text-0);cursor:pointer;"],w.stickyFooter,w.spacedRow,({hasSummary:e})=>e?"6.5rem":"var(--page-currentFooterHeight)"),Th=u.div.withConfig({componentId:"sc-1rl267r-1"})([""," font:var(--font-medium-book);"],w.rowColumn);var Ah=u("div").withConfig({componentId:"sc-1rl267r-2"})({display:"inline-flex",alignItems:"center",gap:"0.5ch",minWidth:"max-content"}),Oh=u(D).withConfig({componentId:"sc-1rl267r-3"})({color:"var(--color-text-2)",font:"var(--font-large-book)"}),jh=u(we).withConfig({componentId:"sc-1rl267r-4"})({rotate:"0.5turn"});const Jn={[Ze.Default]:"right",[Ze.Reverse]:"left"},Eh=({tradeLayout:e})=>{const n=q(),[o,r]=f.useState("Orderbook"),[i,s]=f.useState(void 0),{uiRefresh:a}=pe,c=f.useRef(null),d=c.current,p=f.useCallback(l=>{const g=Math.floor((l-Ts-Mn)/(2*Mn));s(g)},[]);return f.useEffect(()=>{const l=new ResizeObserver(g=>{g.forEach(y=>{y.contentBoxSize[0]?p(y.contentBoxSize[0].blockSize):p(y.contentRect.height)})});return d&&l.observe(d),()=>{d?l.unobserve(d):l.disconnect()}},[p,d]),t.jsx(ot,{fullWidthTabs:!0,dividerStyle:a?"underline":"border",value:o,onValueChange:l=>{r(l)},items:[{asChild:!0,content:t.jsx(Bo,{histogramSide:Jn[e],rowsPerSide:i}),label:n({key:h.ORDERBOOK_SHORT}),value:"Orderbook",forceMount:!0,ref:c},{content:t.jsx(kr,{histogramSide:Jn[e]}),label:n({key:h.TRADES}),value:"Trades"}],withTransitions:!1})},Yh=()=>{const e=f.useRef(null),{isViewingUnlaunchedMarket:n}=Xs(),{isTablet:o}=fe(),r=_(Uo),i=_(As),[s,a]=f.useState(!0);return Qs(),Zs(),n&&pe.pml?t.jsx(yh,{}):o?t.jsxs(Mh,{children:[t.jsx(Ar,{}),t.jsxs("div",{children:[t.jsx(Ne,{children:t.jsx(Tr,{})}),t.jsx(Ne,{children:t.jsx(rn,{})}),t.jsx(Ne,{children:t.jsx(Sr,{})})]}),i&&t.jsx(Ih,{})]}):t.jsxs(Ph,{ref:e,tradeLayout:r,isHorizontalPanelOpen:s,children:[t.jsx(Dh,{children:t.jsx(Cr,{})}),t.jsxs(Rh,{gridArea:"Side",children:[t.jsx(Cn,{}),t.jsx(Bc,{})]}),t.jsx(St,{gridArea:"Vertical",children:t.jsx(Eh,{tradeLayout:r})}),t.jsx(St,{gridArea:"Inner",children:t.jsx(fr,{})}),t.jsx(St,{gridArea:"Horizontal",children:t.jsx(rn,{isOpen:s,setIsOpen:a})})]})},Ph=u.article.withConfig({componentId:"sc-1ojd0sh-0"})(["--horizontalPanel-height:18rem;--layout-default:'Top Top Top' auto 'Inner Vertical Side' minmax(0,1fr) 'Horizontal Horizontal Side' minmax(var(--tabs-height),var(--horizontalPanel-height)) / 1fr minmax(0,var(--orderbook-trades-width)) var(--sidebar-width);--layout-default-desktopMedium:'Top Vertical Side' auto 'Inner Vertical Side' minmax(0,1fr) 'Horizontal Horizontal Side' minmax(var(--tabs-height),var(--horizontalPanel-height)) / 1fr minmax(0,var(--orderbook-trades-width)) var(--sidebar-width);--layout:var(--layout-default);@media ","{--layout:var(--layout-default-desktopMedium);}"," "," width:0;min-width:100%;height:0;min-height:100%;display:grid;grid-template:var(--layout);"," @media (prefers-reduced-motion:no-preference){transition:grid-template 0.2s var(--ease-out-expo);}> *{display:flex;flex-direction:column;}> section{contain:strict;}"],te.desktopMedium,({tradeLayout:e})=>({[Ze.Default]:null,[Ze.Reverse]:j(["direction:rtl;> *{direction:initial;}"])})[e],({isHorizontalPanelOpen:e})=>!e&&j(["--horizontalPanel-height:auto !important;"]),w.withOuterAndInnerBorders),Mh=u.article.withConfig({componentId:"sc-1ojd0sh-1"})([""," min-height:100%;"," --stickyArea1-topHeight:var(--page-header-height-mobile);--stickyArea1-bottomHeight:var(--page-footer-height-mobile);"," > div:nth-child(2){flex:1;"," justify-content:start;}"],w.contentContainerPage,w.stickyArea1,w.withInnerHorizontalBorders,w.flexColumn),St=u.section.withConfig({componentId:"sc-1ojd0sh-2"})(["grid-area:",";"],({gridArea:e})=>e);var Rh=u(St).withConfig({componentId:"sc-1ojd0sh-3"})({gridTemplateRows:"auto minmax(0,1fr)"}),Dh=u("header").withConfig({componentId:"sc-1ojd0sh-4"})({gridArea:"Top"});export{Yh as default};
