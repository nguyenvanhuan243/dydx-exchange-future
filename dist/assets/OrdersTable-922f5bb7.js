import{g as d,c as _,eo as Y,cr as q,hK as J,r as C,a6 as F,a7 as K,hL as Q,j as t,v as X,q as W,S as n,B as Z,J as B,hM as G,b_ as A,hN as ee,f as N,a0 as te,hO as V,hP as ae,I as se,h as le,aP as E,l as ne,u as re,k as S,cq as oe,dg as ie,s as T,eG as D,hQ as ce,hk as w,o as P,m as de,eU as ue,co as pe,hR as ge,f1 as he,y as b,hS as ye,eN as me,eO as xe,O as c,p as i,dR as j,d8 as Se,M as Ce,hT as be,hl as fe,z as Te,w as je,bL as Ae,i as ke}from"./index-12ab17f1.js";import{t as Oe}from"./tradeViewMixins-e79b6162.js";import{M as Ie,T as I}from"./FillsTable-6f5a0dea.js";import{A as we,m as ve}from"./ActionsTableCell-517ee0d5.js";const Me=({marketId:s})=>{const g=_(),a=Y(),u=q(J,s),h=C.useCallback(()=>{a(u?F(K.CancelAllOrdersConfirmation({marketId:s})):Q(s))},[a,u,s]);return t.jsx(Re,{action:X.Primary,size:W.XSmall,onClick:h,isHighlighted:u,children:g({key:u?n.CANCEL_ALL:n.CLEAR_ALL})})},Re=d(Z).withConfig({componentId:"sc-jsj259-0"})(["--button-textColor:",";--button-height:var(--item-height);--button-padding:0 0.25rem;--button-backgroundColor:transparent;--button-border:none;pointer-events:auto;"],({isHighlighted:s})=>s?"var(--color-red)":"initial"),Ee=({orderId:s,orderFlags:g,status:a,isDisabled:u})=>{const h=B(),[m,e]=C.useState(!1),{cancelOrder:l}=G(),r=C.useCallback(async()=>{e(!0),l({orderId:s,onError:()=>e(!1)})},[]),p=g===A.OrderFlags.SHORT_TERM,x=a===ee.Canceling,y=m||!!u||p&&x;return t.jsx(we,{children:t.jsx(De,{iconName:N.Close,iconSize:"0.875em",shape:te.Square,...V(a)?{onClick:()=>h(ae(s))}:{onClick:r,state:{isLoading:m,isDisabled:y}}},"cancelorder")})},De=d(se).withConfig({componentId:"sc-1389rbw-0"})(["--button-hover-textColor:var(--color-red);"]);var Pe=(s=>(s.Market="Market",s.Status="Status",s.Side="Side",s.AmountFill="Amount-Fill",s.Price="Price",s.Trigger="Trigger",s.GoodTil="Good-Til",s.Actions="Actions",s.MarginType="Margin-Type",s.StatusFill="Status-Fill",s.PriceType="Price-Type",s))(Pe||{});const Le=({key:s,currentMarket:g,stringGetter:a,symbol:u="",isAccountViewOnly:h,width:m})=>({width:m,...{Market:{columnKey:"marketId",getCellValue:e=>e.marketId,label:a({key:n.MARKET}),renderCell:({asset:e,displayId:l})=>t.jsx(Ie,{asset:e??void 0,marketId:l})},Status:{columnKey:"status",getCellValue:e=>e.status.name,label:a({key:n.STATUS}),renderCell:({status:e,resources:l})=>t.jsxs(b,{children:[t.jsx(Ne,{tooltipString:l.statusStringKey?a({key:l.statusStringKey}):void 0,side:"right",children:t.jsx(ye,{status:e.rawValue})}),l.typeStringKey&&a({key:l.typeStringKey})]})},Side:{columnKey:"side",getCellValue:e=>e.orderSide,label:a({key:n.SIDE}),renderCell:({orderSide:e})=>t.jsx(me,{orderSide:e??A.OrderSide.BUY,size:xe.Medium})},["Amount-Fill"]:{columnKey:"size",getCellValue:e=>e.size,label:t.jsxs(I,{children:[t.jsx("span",{children:a({key:n.AMOUNT})}),t.jsx("span",{children:a({key:n.AMOUNT_FILLED})})]}),tag:u,renderCell:({size:e,totalFilled:l,stepSizeDecimals:r})=>t.jsxs(b,{stacked:!0,children:[t.jsx(c,{type:i.Asset,value:e,fractionDigits:r??j}),t.jsx(c,{type:i.Asset,value:l,fractionDigits:r??j})]})},Price:{columnKey:"price",getCellValue:e=>e.price,label:a({key:n.PRICE}),renderCell:({type:e,price:l,tickSizeDecimals:r})=>Se(e)?a({key:n.MARKET_PRICE_SHORT}):t.jsx(c,{type:i.Fiat,value:l,fractionDigits:r})},Trigger:{columnKey:"triggerPrice",getCellValue:e=>e.triggerPrice??-1,label:a({key:n.TRIGGER_PRICE_SHORT}),renderCell:({triggerPrice:e,trailingPercent:l,tickSizeDecimals:r})=>t.jsxs(b,{stacked:!0,children:[t.jsx(c,{type:i.Fiat,value:e,fractionDigits:r}),l&&t.jsxs("span",{children:[t.jsx(c,{type:i.Percent,value:Ce(l).abs().div(100)})," ",a({key:n.TRAIL})]})]})},["Good-Til"]:{columnKey:"expiresAtMilliseconds",getCellValue:e=>e.expiresAtMilliseconds??1/0,label:a({key:n.GOOD_TIL}),renderCell:({expiresAtMilliseconds:e})=>e?t.jsx(c,{type:i.RelativeTime,value:e,relativeTimeOptions:{format:"singleCharacter"}}):t.jsx(c,{type:i.Text})},Actions:{columnKey:"cancelOrClear",label:t.jsx(Me,{marketId:g}),isActionable:!0,allowsSorting:!1,renderCell:({id:e,status:l,orderFlags:r})=>t.jsx(Ee,{orderId:e,status:l,orderFlags:r,isDisabled:h})},["Status-Fill"]:{columnKey:"statusFill",getCellValue:e=>e.status.name,label:t.jsxs(I,{children:[t.jsx("span",{children:a({key:n.STATUS})}),t.jsx("span",{children:a({key:n.FILL})})]}),renderCell:({asset:e,createdAtMilliseconds:l,size:r,status:p,totalFilled:x,resources:y})=>{const{statusIconColor:f}=be({status:p.rawValue});return t.jsxs(b,{stacked:!0,slotLeft:t.jsxs(t.Fragment,{children:[t.jsx(Ve,{type:i.RelativeTime,relativeTimeOptions:{format:"singleCharacter"},value:l}),t.jsxs(Ke,{children:[t.jsx(z,{symbol:e==null?void 0:e.id}),t.jsx(Be,{color:f})]})]}),children:[t.jsx("span",{children:y.statusStringKey&&a({key:y.statusStringKey})}),t.jsxs(L,{children:[t.jsx(c,{type:i.Asset,value:x,fractionDigits:j}),"/",t.jsx(c,{type:i.Asset,value:r,fractionDigits:j,tag:e==null?void 0:e.id})]})]})}},["Price-Type"]:{columnKey:"priceType",label:t.jsxs(I,{children:[t.jsx("span",{children:a({key:n.PRICE})}),t.jsx("span",{children:a({key:n.TYPE})})]}),getCellValue:e=>e.price,renderCell:({price:e,orderSide:l,tickSizeDecimals:r,resources:p})=>t.jsxs(b,{stacked:!0,children:[t.jsxs(L,{children:[t.jsx(Fe,{side:l,children:p.sideStringKey?a({key:p.sideStringKey}):null}),t.jsx(ze,{children:"@"}),t.jsx(c,{type:i.Fiat,value:e,fractionDigits:r})]}),t.jsx("span",{children:p.typeStringKey?a({key:p.typeStringKey}):null})]})},["Margin-Type"]:{columnKey:"marginType",label:a({key:n.MARGIN_MODE}),getCellValue:e=>w(e.subaccountNumber).name,renderCell(e){const r=w(e.subaccountNumber)===fe.Cross?a({key:n.CROSS}):a({key:n.ISOLATED});return t.jsx(c,{type:i.Text,value:r})}}}[s]}),Je=({columnKeys:s=[],columnWidths:g,currentMarket:a,marketTypeFilter:u,initialPageSize:h,withOuterBorder:m})=>{var M,R;const e=_(),l=B(),{isTablet:r}=re(),p=S(oe),x=S(ie,T)??D,y=S(ce,T)??D,f=C.useMemo(()=>(a?x:y).filter(o=>{const H=w(o.subaccountNumber).name;return ve(H,u)}),[y,a,x,u]),k=P(S(de,T)),O=P(S(ue,T)),v=S(pe);C.useEffect(()=>{v&&l(ge())},[v]);const U=a?(R=O[(M=k[a])==null?void 0:M.assetId])==null?void 0:R.id:null,$=C.useMemo(()=>f.map(o=>he({data:o,assets:O,perpetualMarkets:k})),[f,k,O]);return t.jsx(_e,{label:"Orders",data:$,getRowKey:o=>o.id,getRowAttributes:o=>({"data-clearable":V(o.status)}),onRowAction:o=>l(F(K.OrderDetails({orderId:`${o}`}))),columns:s.map(o=>Le({key:o,currentMarket:a,dispatch:l,isTablet:r,stringGetter:e,symbol:U,isAccountViewOnly:p,width:g==null?void 0:g[o]})),slotEmpty:t.jsxs(t.Fragment,{children:[t.jsx(Ue,{iconName:N.OrderPending}),t.jsx("h4",{children:e({key:n.ORDERS_EMPTY_STATE})})]}),initialPageSize:h,withOuterBorder:m,withInnerBorders:!0,withScrollSnapColumns:!0,withScrollSnapRows:!0,withFocusStickyRows:!0},a??"all-orders")},_e=d(Te).withConfig({componentId:"sc-fi7txw-0"})([""," tbody tr{&[data-clearable='true']{opacity:0.5;}}"],Oe.horizontalTable),L=d.div.withConfig({componentId:"sc-fi7txw-1"})({display:"inline-flex",alignItems:"center",gap:"0.5ch",minWidth:"max-content"}),z=d(je).withConfig({componentId:"sc-fi7txw-2"})(["font-size:2rem;@media ","{font-size:2.25rem;}"],le.tablet),Fe=d.span.withConfig({componentId:"sc-fi7txw-3"})(["",";"],({side:s})=>s&&{[A.OrderSide.BUY]:E(["color:var(--color-positive);"]),[A.OrderSide.SELL]:E(["color:var(--color-negative);"])}[s]),Ke=d.div.withConfig({componentId:"sc-fi7txw-4"})([""," ","{margin:0.125rem;}"],ne.stack,z),Be=d.div.withConfig({componentId:"sc-fi7txw-5"})(["place-self:start end;width:0.875rem;height:0.875rem;border-radius:50%;border:2px solid var(--tableRow-currentBackgroundColor);background-color:",";"],({color:s})=>s);var Ne=d(Ae).withConfig({componentId:"sc-fi7txw-6"})({"--tooltip-backgroundColor":"var(--color-layer-5)"}),Ve=d(c).withConfig({componentId:"sc-fi7txw-7"})({color:"var(--color-text-0)"}),ze=d("span").withConfig({componentId:"sc-fi7txw-8"})({color:"var(--color-text-0)"}),Ue=d(ke).withConfig({componentId:"sc-fi7txw-9"})({fontSize:"3em"});export{Je as O,Pe as a};
