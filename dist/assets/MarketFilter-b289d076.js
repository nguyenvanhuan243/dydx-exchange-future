import{e8 as J,eR as Z,e4 as ee,eS as te,E as r,o as M,k as E,m as re,s as R,eT as oe,eU as ne,V as se,r as h,ak as ae,W as ie,eV as le,e5 as ce,eW as A,g as u,l as F,I as ue,i as de,eX as ge,j as o,f as P,eY as pe,aP as j,h as me,c as fe,b as he,P as ke,D as Ie,S,B as C,A as L,R as _,q as T,a0 as we,v as Se,al as be,G as ye}from"./index-12ab17f1.js";const Me=te.hour,Ee=42,Re=(t={})=>{const{period:e="SEVEN_DAYS",refetchInterval:p=Me}=t,{getPerpetualMarketSparklines:s,compositeClient:d}=J(),{data:n}=Z({enabled:!!d,queryKey:["perpetualMarketSparklines",e],queryFn:()=>{try{return s({period:e})}catch(c){ee("usePerpetualMarketSparklines",c);return}},refetchInterval:p,refetchOnWindowFocus:!1,gcTime:1e3*60*5,staleTime:1e3*60*10});return n},v=(t,e)=>!!(e!=null&&e.toLocaleLowerCase().includes(t.trim().toLowerCase())),ve={[r.AI]:t=>{var e;return(e=t.tags)==null?void 0:e.includes("AI")},[r.ALL]:()=>!0,[r.DEFI]:t=>{var e;return(e=t.tags)==null?void 0:e.includes("Defi")},[r.ENT]:t=>{var e;return(e=t.tags)==null?void 0:e.includes("Entertainment")},[r.FX]:t=>{var e;return(e=t.tags)==null?void 0:e.includes("FX")},[r.GAMING]:t=>{var e;return(e=t.tags)==null?void 0:e.includes("Gaming")},[r.LAYER_1]:t=>{var e;return(e=t.tags)==null?void 0:e.includes("Layer 1")},[r.LAYER_2]:t=>{var e;return(e=t.tags)==null?void 0:e.includes("Layer 2")},[r.MEME]:t=>{var e;return(e=t.tags)==null?void 0:e.includes("Meme")},[r.NEW]:t=>t.isNew,[r.NFT]:t=>{var e;return(e=t.tags)==null?void 0:e.includes("NFT")},[r.PREDICTION_MARKET]:t=>{var e;return(e=t.tags)==null?void 0:e.includes("Prediction Market")},[r.RWA]:t=>{var e;return(e=t.tags)==null?void 0:e.includes("RWA")}},De=(t=r.ALL,e)=>{const p=M(E(re,R)),s=M(E(oe,R)),d=M(E(ne,R)),n=Re(),c=se(),a=h.useMemo(()=>Object.values(p).filter(ae).filter(l=>l.assetId!=="TRUMPWIN"||(c==null?void 0:c[ie.ffShowPredictionMarketsUi])).map(l=>{var N;const g=((N=n==null?void 0:n[l.id])==null?void 0:N.length)??0,m=!!(n&&g<Ee),I=(s==null?void 0:s[l.id])??0,{assetId:f,displayId:w,id:$,configs:B,oraclePrice:D,priceChange24H:G,priceChange24HPercent:O,perpetual:W}=l,{nextFundingRate:K,line:b,openInterest:H,openInterestUSDC:U,trades24H:V,volume24H:Y}=W??{},{name:z,tags:y}=d[f]??{},{effectiveInitialMarginFraction:X,initialMarginFraction:q,tickSizeDecimals:Q}=B??{};return le({},{id:$,assetId:f,displayId:w,clobPairId:I,effectiveInitialMarginFraction:X,initialMarginFraction:q,isNew:m,line:b==null?void 0:b.toArray(),name:z,nextFundingRate:K,openInterest:H,openInterestUSDC:U,oraclePrice:D,priceChange24H:G,priceChange24HPercent:O,tags:y==null?void 0:y.toArray(),tickSizeDecimals:Q,trades24H:V,volume24H:Y})}),[s,p,d,n]),k=h.useMemo(()=>{const i=a.filter(ve[t]);return e?i.filter(({assetId:l,id:g,name:m})=>v(e,m)||v(e,l)||v(e,g)):i},[a,e,t]);return{marketFilters:h.useMemo(()=>[r.ALL,r.NEW,...ce(A).filter(i=>a.some(l=>{var g;return(g=l.tags)==null?void 0:g.some(m=>m===i)}))],[a]),filteredMarkets:k,markets:a}},Ae=({placeholder:t,onTextChange:e,className:p})=>{const[s,d]=h.useState(""),n=h.useRef(null);return o.jsxs(je,{className:p,children:[o.jsx(Ne,{iconName:P.Search}),o.jsx(Pe,{autoFocus:!0,ref:n,value:s,type:pe.Search,onChange:c=>{d(c.target.value),e==null||e(c.target.value)},placeholder:t}),s.length>0&&o.jsx(xe,{iconName:P.Close,onClick:()=>{d(""),e==null||e("")}})]})},je=u.div.withConfig({componentId:"sc-1tlhwjm-0"})([""," width:auto;height:2rem;background-color:var(--color-layer-3);color:",";border-radius:2.5rem;border:solid var(--border-width) var(--color-layer-6);padding:0 0.75rem;gap:0.375rem;justify-content:end;"],F.row,({theme:t})=>t.textTertiary),xe=u(ue).withConfig({componentId:"sc-1tlhwjm-1"})(["--button-icon-size:0.5rem;--button-border:none;--button-backgroundColor:transparent;color:",";width:1.5rem;height:1.5rem;"],({theme:t})=>t.textSecondary),Ne=u(de).withConfig({componentId:"sc-1tlhwjm-2"})(["color:",";"],({theme:t})=>t.textSecondary);var Pe=u(ge).withConfig({componentId:"sc-1tlhwjm-3"})({maxWidth:"100%",borderRadius:"0px"});const Ge=({selectedFilter:t,filters:e,onChangeFilter:p,onSearchTextChange:s,hideNewMarketButton:d,compactLayout:n=!1,searchPlaceholderKey:c=S.MARKET_SEARCH_PLACEHOLDER})=>{const a=fe(),k=he(),{hasPotentialMarketsData:x}=ke(),{uiRefresh:i,pml:l}=be,g=x&&!d,m=o.jsx(_e,{items:Object.values(e).map(f=>{var w;return{label:a({key:A[f].label,fallback:f}),slotAfter:((w=A[f])==null?void 0:w.isNew)&&o.jsx(Ie,{children:a({key:S.NEW})}),value:f}}),value:t,onValueChange:p,overflow:i?"wrap":"scroll"}),I=i?o.jsx(C,{onClick:()=>k(`${L.Markets}/${_.New}`),size:T.XSmall,shape:we.Pill,action:Se.Primary,children:a({key:S.LAUNCH_MARKET_WITH_PLUS})}):o.jsx(C,{onClick:()=>k(`${L.Markets}/${_.New}`),size:T.Small,children:a({key:S.PROPOSE_NEW_MARKET})});return o.jsxs(Ce,{$compactLayout:n,uiRefreshEnabled:i,children:[o.jsxs(Fe,{children:[o.jsx(Te,{placeholder:a({key:c}),onTextChange:s}),i&&g&&l&&I]}),i?m:o.jsxs($e,{children:[o.jsx(Le,{$compactLayout:n,children:m}),g&&I]})]})},Ce=u.div.withConfig({componentId:"sc-r8pjn0-0"})(["display:flex;flex-direction:column;justify-content:space-between;gap:0.75rem;flex:1;overflow:hidden;"," ",""],({uiRefreshEnabled:t})=>t&&j(["button{--button-toggle-off-border:none;--button-toggle-off-backgroundColor:transparent;}"]),({$compactLayout:t})=>t&&j(["@media ","{flex-direction:column;}"],me.mobile)),Le=u.div.withConfig({componentId:"sc-r8pjn0-1"})([""," justify-content:space-between;overflow-x:hidden;position:relative;--toggle-group-paddingRight:0.75rem;&:after{content:'';position:absolute;right:0;top:0;bottom:0;width:var(--toggle-group-paddingRight);background:linear-gradient(to right,transparent 10%,var(--color-layer-2));}",""],F.row,({$compactLayout:t})=>t&&j(["& button{--button-toggle-off-backgroundColor:",";--button-toggle-off-textColor:",";--border-color:",";--button-height:2rem;--button-padding:0 0.625rem;--button-font:var(--font-small-book);}"],({theme:e})=>e.toggleBackground,({theme:e})=>e.textSecondary,({theme:e})=>e.layer6)),_e=u(ye).withConfig({componentId:"sc-r8pjn0-2"})(["padding-right:var(--toggle-group-paddingRight);"]),Te=u(Ae).withConfig({componentId:"sc-r8pjn0-3"})(["min-width:12rem;flex-grow:1;"]);var Fe=u("div").withConfig({componentId:"sc-r8pjn0-4"})({display:"flex",alignItems:"center",gap:"0.5rem"}),$e=u("div").withConfig({componentId:"sc-r8pjn0-5"})({display:"flex",flexDirection:"row",alignItems:"center",overflowX:"scroll"});export{Ge as M,De as u};
