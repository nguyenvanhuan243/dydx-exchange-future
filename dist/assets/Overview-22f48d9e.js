import{g as t,l as M,aP as pe,h as he,J as Te,c as B,u as Z,a3 as Se,k as C,h6 as je,S as g,h7 as Ee,j as e,h8 as ke,L as ve,B as re,v as ie,i as se,f as ae,a6 as ce,a7 as le,q as Oe,ap as ye,s as U,fa as _e,f8 as Ne,h9 as De,ha as Re,r as s,hb as I,bq as Le,ak as Y,eS as S,dS as de,ff as Me,hc as Be,hd as Ie,fg as Fe,bt as $e,bv as Ue,p as T,cZ as Ve,G as qe,fh as Ge,bH as O,an as He,aV as xe,ao as Ke,bA as We,O as V,cB as ze,M as L,ci as Ze,ay as Ye,ax as z,a8 as Je,he as Xe,hf as Qe,f2 as et,b as tt,aJ as ot,hg as nt,hh as rt,dh as it,W as st,A as D,ai as ge,cr as at,hi as ct,cs as lt}from"./index-12ab17f1.js";import{u as dt,P as gt,a as p,b as ut}from"./UnopenedIsolatedPositions-5a4f6f63.js";import{D as R,A as ft}from"./ContentSection-d450bf80.js";import{C as mt}from"./ContentSectionHeader-241fb95a.js";import{T as pt}from"./TriangleIndicator-f26e9242.js";import"./tradeViewMixins-e79b6162.js";import"./FillsTable-6f5a0dea.js";import"./ActionsTableCell-517ee0d5.js";const ht=()=>{const n=Te(),r=B(),{isTablet:c}=Z(),{affiliateProgram:l}=Se(),u=C(je),f=r({key:g.EARN_FOR_EACH_TRADER,params:{AMOUNT_USD:Ee.toLocaleString()}}),a=e.jsxs(e.Fragment,{children:[r({key:g.REFER_FOR_DISCOUNTS_FIRST_ORDER,params:{AMOUNT_USD:`$${ke.toLocaleString()}`}})," ",e.jsx("br",{}),r({key:g.WANT_TO_VIEW_EARNINGS,params:{LINK:e.jsxs(ve,{href:l,isInline:!0,isAccent:!0,children:[r({key:g.AFFILIATES_PROGRAM})," â†’"]})}})]});return c?e.jsx(vt,{backgroundImagePath:u,children:e.jsxs(It,{children:[e.jsx(xt,{children:f}),e.jsx(bt,{children:a}),e.jsx(re,{action:ie.Primary,slotLeft:e.jsx(se,{iconName:ae.Giftbox}),onClick:()=>{n(ce(le.ShareAffiliate()))},children:r({key:g.INVITE_FRIENDS})})]})}):e.jsxs(St,{backgroundImagePath:u,children:[e.jsxs(Ct,{children:[e.jsx(Pt,{src:"/affiliates-hedgie.png",alt:"affiliates hedgie"}),e.jsxs(At,{children:[e.jsxs(wt,{children:[e.jsx(yt,{}),e.jsx(Tt,{children:f})]}),e.jsx(jt,{children:a})]})]}),e.jsx("div",{children:e.jsx(re,{action:ie.Primary,slotLeft:e.jsx(se,{iconName:ae.Giftbox}),size:Oe.Medium,onClick:()=>{n(ce(le.ShareAffiliate()))},children:r({key:g.INVITE_FRIENDS})})})]})},be=t.div.withConfig({componentId:"sc-12nvg5f-0"})(["--color-border:transparent;"," "," background-repeat:no-repeat;background-position-x:100%;background-size:contain;@media ","{background-position-x:0;background-size:cover;}"],M.withOuterBorderClipped,({backgroundImagePath:n})=>pe(["background:url(",");"],n),he.tablet);var St=t(be).withConfig({componentId:"sc-12nvg5f-1"})({display:"flex",flexDirection:"row",alignItems:"center",marginBottom:"1rem",marginTop:"1rem",justifyContent:"space-between",gap:"0.5rem",backgroundColor:"var(--color-layer-1)",paddingLeft:"1rem",paddingRight:"2rem"}),vt=t(be).withConfig({componentId:"sc-12nvg5f-2"})({marginTop:"1rem",backgroundColor:"var(--color-layer-1)",padding:"1rem"});const yt=t.div.withConfig({componentId:"sc-12nvg5f-3"})(["width:0;height:0;border-top:0.5rem solid transparent;border-bottom:0.5rem solid transparent;border-right:0.5rem solid var(--color-layer-6);"]);var It=t("div").withConfig({componentId:"sc-12nvg5f-4"})({display:"grid",gridAutoFlow:"row",gridTemplateColumns:"minmax(0, 1fr)",alignItems:"flex-start",gap:"1rem"}),xt=t("div").withConfig({componentId:"sc-12nvg5f-5"})({fontWeight:"var(--fontWeight-bold)",color:"var(--color-text-2)"}),bt=t("div").withConfig({componentId:"sc-12nvg5f-6"})({}),Ct=t("div").withConfig({componentId:"sc-12nvg5f-7"})({display:"flex",flexDirection:"row",alignItems:"center"}),Pt=t("img").withConfig({componentId:"sc-12nvg5f-8"})({marginTop:"1rem",height:"8rem"}),At=t("div").withConfig({componentId:"sc-12nvg5f-9"})({display:"grid",gridAutoFlow:"row",gridTemplateColumns:"minmax(0, 1fr)",alignItems:"flex-start",gap:"0.5rem"}),wt=t("div").withConfig({componentId:"sc-12nvg5f-10"})({display:"flex",flexDirection:"row",alignItems:"center"}),Tt=t("div").withConfig({componentId:"sc-12nvg5f-11"})({display:"inline-block",borderRadius:"0.5rem",backgroundColor:"var(--color-layer-6)",paddingLeft:"1rem",paddingRight:"1rem",paddingTop:"0.5rem",paddingBottom:"0.5rem",fontWeight:"var(--fontWeight-bold)",color:"var(--color-text-2)"}),jt=t("div").withConfig({componentId:"sc-12nvg5f-12"})({marginLeft:"0.5rem"});const Et=()=>{const n=B(),{getInTouch:r}=Se();return r?e.jsx(Ot,{children:n({key:g.TELEGRAM_INVITE_BANNER,params:{HERE_LINK:e.jsx(ve,{isInline:!0,isAccent:!0,href:r,children:n({key:g.HERE})})}})}):null},kt=t.div.withConfig({componentId:"sc-r0bqlh-0"})(["--color-border:transparent;",""],M.withOuterBorderClipped);var Ot=t(kt).withConfig({componentId:"sc-r0bqlh-1"})({marginBottom:"1rem",backgroundColor:"var(--color-layer-5)",padding:"1rem"});const _t=1*S.hour,ue=n=>Ie[n],Nt=({className:n,onTooltipContext:r,onVisibleDataChange:c,selectedLocale:l,slotEmpty:u})=>{var oe;const{isTablet:f}=Z(),{equity:a}=C(ye,U)??{},d=_e({intervalMs:S.minute}),v=C(Ne),i=C(De,U),h=C(Re,U),[x,j]=s.useState([I.Period1d]),[A,w]=s.useState(I.Period1d),[F,_]=s.useState(!1);s.useEffect(()=>{Le.setHistoricalPnlPeriod(I.Period90d)},[]);const P=i==null?void 0:i[i.length-1],m=s.useMemo(()=>P?[...i,(a==null?void 0:a.current)&&{createdAtMilliseconds:d,netTransfers:P.netTransfers??0,equity:a.current,totalPnl:a.current-(P.equity??0)+(P.totalPnl??0)}].filter(Y).map(o=>({id:o.createdAtMilliseconds,subaccountId:h??0,equity:Number(o.equity),totalPnl:Number(o.totalPnl),netTransfers:Number(o.netTransfers),createdAt:new Date(o.createdAtMilliseconds).valueOf(),side:{[-1]:"Loss",0:"Flat",1:"Profit"}[Math.sign(o.equity)]})):[],[i,a==null?void 0:a.current,d,P,h]),b=s.useCallback((o,y=!0)=>{var N,ne;const E=(N=m==null?void 0:m[0])==null?void 0:N.createdAt,$=(ne=m==null?void 0:m[m.length-1])==null?void 0:ne.createdAt,k=E&&$?$-E:90*S.day;switch(o){case I.Period1d:return y?Math.min(k,1*S.day):1*S.day;case I.Period7d:return y?Math.min(k,7*S.day):7*S.day;case I.Period30d:return y?Math.min(k,30*S.day):30*S.day;case I.Period90d:default:return y?Math.min(k,90*S.day):90*S.day}},[m]),q=o=>w(ue(o)),G=s.useMemo(()=>de.debounce(({zoomDomain:o})=>{if(o){const y=x.findIndex(E=>Math.abs(b(E)-o)<=1);y<0?_(!0):(_(!1),w(x[y]))}},Me),[x,b]),H=()=>_(!1),J=s.useCallback(o=>Be(Ie).reduce((y,[,E],$,k)=>{if(o<d-b(E,!1)){const N=de.get(k,[$+1,0]);N&&y.push(ue(N))}return y},[I.Period1d]),[b,d]),K=(oe=i==null?void 0:i[0])==null?void 0:oe.createdAtMilliseconds;s.useEffect(()=>{if(K){const o=J(K);j(o),o.includes(I.Period7d)&&w(I.Period7d)}},[K,J]);const W=s.useMemo(()=>({background:v,margin:{left:-.5,right:-.5,top:0,bottom:32},padding:{left:.01,right:.01,top:f?.5:.15,bottom:.1}}),[v,f]),X=s.useCallback(o=>o==null?void 0:o.createdAt,[]),Q=s.useCallback(o=>o==null?void 0:o.equity,[]),Pe=s.useMemo(()=>[{dataKey:"pnl",xAccessor:X,yAccessor:Q,colorAccessor:()=>"var(--pnl-line-color)",getCurve:()=>Fe}],[X,Q]),{decimal:ee,group:te}=$e(),Ae=s.useCallback(o=>Ue(o,T.CompactFiat,{decimalSeparator:ee,groupSeparator:te,selectedLocale:l}),[ee,te,l]),we=s.useCallback(()=>e.jsx("div",{}),[]);return e.jsx(Dt,{className:n,chartBackground:W.background,children:e.jsx(Ve,{selectedLocale:l,data:m,margin:W.margin,padding:W.padding,series:Pe,tickFormatY:Ae,renderTooltip:we,onTooltipContext:r,onVisibleDataChange:c,onZoom:G,slotEmpty:u,defaultZoomDomain:F?void 0:b(A,!1),minZoomDomain:_t*2,numGridLines:0,tickSpacingX:210,tickSpacingY:75,children:e.jsx(Rt,{children:e.jsx(qe,{items:x.map(o=>({value:o.name,label:Ge(b(o,!1),{locale:l,relativeToTimestamp:0,largestUnit:"day"})})),value:F?"":A.name,onValueChange:q,onInteraction:H})})})})},Dt=t.div.withConfig({componentId:"sc-l0fw5s-0"})(["position:relative;background:url(",") no-repeat center center;"],({chartBackground:n})=>n);var Rt=t("div").withConfig({componentId:"sc-l0fw5s-1"})({isolation:"isolate",margin:"1rem",placeSelf:"start end"});const Lt=({equity:n,visibleData:r,activeDatum:c})=>{const l=B(),u=C(xe),f=s.useMemo(()=>c?Xe(c.createdAt,T.DateTime,{selectedLocale:u,dateFormat:"medium"}):l({key:g.TRADING_ACCOUNT}),[c,u,l]),a=s.useMemo(()=>c?c.equity:n,[c,n]),d=r==null?void 0:r[0],v=r==null?void 0:r[((r==null?void 0:r.length)??1)-1],i=s.useMemo(()=>{let h,x;if(d&&v){const j=L(v.totalPnl).minus(d.totalPnl);return h=c?L(c.totalPnl).minus(d.totalPnl):j,x=h.div(d.equity),{pnlDiff:h.toString(),pnlDiffPercent:x.toString(),sign:j.gte(0)?O.Positive:O.Negative}}},[c,d,v]);return{accountValueLabel:f,accountEquity:a,pnlDiff:i==null?void 0:i.pnlDiff,pnlDiffPercent:i==null?void 0:i.pnlDiffPercent,pnlDiffSign:(i==null?void 0:i.sign)??O.Neutral}},Mt=()=>{var P,m;const n=B(),{complianceState:r}=He(),c=C(xe),l=C(Ke),{equity:u,leverage:f,marginUsage:a}=We(C(ye,U)),[d,v]=s.useState(),[i,h]=s.useState(),{accountValueLabel:x,accountEquity:j,pnlDiff:A,pnlDiffPercent:w,pnlDiffSign:F}=Lt({equity:u==null?void 0:u.current,activeDatum:(m=(P=d==null?void 0:d.tooltipData)==null?void 0:P.nearestDatum)==null?void 0:m.datum,visibleData:i}),_=[{key:"MarginUsage",labelKey:g.MARGIN_USAGE,type:T.Percent,value:a==null?void 0:a.current},{key:"Leverage",labelKey:g.LEVERAGE,type:T.Multiple,value:f==null?void 0:f.current}].filter(Y);return e.jsxs(Bt,{children:[e.jsx(Ft,{children:e.jsxs(fe,{label:x,children:[e.jsx(Ht,{children:e.jsx(V,{type:T.Fiat,value:j,roundingMode:ze.ROUND_FLOOR,withBaseFont:!0})}),e.jsxs($t,{isPositive:L(A).gte(0),children:[A&&e.jsx(pt,{value:L(A)}),e.jsx(V,{type:T.Fiat,showSign:Ze.None,value:A}),w&&L(w).isFinite()&&e.jsx(Ut,{type:T.Percent,value:w})]})]})}),_.map(({key:b,labelKey:q,type:G,value:H})=>e.jsx(Vt,{gridArea:b,children:e.jsx(fe,{label:n({key:q}),children:e.jsx(V,{type:G,value:H})})},b)),e.jsx(qt,{pnlDiffSign:F,onTooltipContext:v,onVisibleDataChange:h,selectedLocale:c,slotEmpty:e.jsx(Kt,{children:r===Ye.READ_ONLY?e.jsx(Ce,{children:n({key:g.BLOCKED_MESSAGE,params:{TERMS_OF_USE_LINK:e.jsx(Wt,{isInline:!0})}})}):l!==z.AccountConnected?e.jsxs(Gt,{children:[e.jsx("p",{children:n({key:{[z.Disconnected]:g.CONNECT_YOUR_WALLET_EXTENDED,[z.WalletConnected]:g.MISSING_KEYS_DESCRIPTION}[l]})}),e.jsx(Je,{})]}):null})})]})},Bt=t.div.withConfig({componentId:"sc-yfwn1q-0"})(["height:100%;display:grid;grid-template:'PortfolioValue PortfolioValue Chart' 'MarginUsage Leverage Chart' / 9.375rem 9.375rem 1fr;"," "," @media ","{grid-template:'PortfolioValue PortfolioValue' auto 'MarginUsage Leverage' auto 'Chart Chart' 15rem / 1fr 1fr;}"],M.withOuterBorderClipped,M.withOuterAndInnerBorders,he.tablet),fe=t(Qe).withConfig({componentId:"sc-yfwn1q-1"})(["--label-textColor:var(--color-text-0);label{font:var(--font-small-book);}"]),Ft=t.div.withConfig({componentId:"sc-yfwn1q-2"})(["grid-area:PortfolioValue;padding:1.25rem;label{margin-bottom:0.875rem;}"]),$t=t.div.withConfig({componentId:"sc-yfwn1q-3"})(["color:var(--color-negative);display:flex;flex-direction:row;align-items:center;gap:0.25rem;",""],({isPositive:n})=>n&&pe(["color:var(--color-positive);"])),Ut=t(V).withConfig({componentId:"sc-yfwn1q-4"})(["&:before{content:'(';}&:after{content:')';}"]),Vt=t.div.withConfig({componentId:"sc-yfwn1q-5"})(["grid-area:",";padding:1.25rem;display:grid;align-items:center;"],({gridArea:n})=>n),qt=t(Nt).withConfig({componentId:"sc-yfwn1q-6"})(["grid-area:Chart;background-color:var(--color-layer-2);--pnl-line-color:",";"],({pnlDiffSign:n})=>({[O.Positive]:"var(--color-positive)",[O.Negative]:"var(--color-negative)",[O.Neutral]:"var(--color-text-1)"})[n]),Ce=t.div.withConfig({componentId:"sc-yfwn1q-7"})(["padding:1.25rem;margin:auto;background-color:var(--color-layer-3);border-radius:0.5rem;justify-items:center;width:16.75rem;font:var(--font-base-book);"]),Gt=t(Ce).withConfig({componentId:"sc-yfwn1q-8"})([""," display:grid;gap:1rem;button{width:fit-content;}"],M.column);var Ht=t("div").withConfig({componentId:"sc-yfwn1q-9"})({marginTop:"1rem",color:"var(--color-text-2)",font:"var(--font-large-book)"}),Kt=t("div").withConfig({componentId:"sc-yfwn1q-10"})({display:"grid",cursor:"default"}),Wt=t(et).withConfig({componentId:"sc-yfwn1q-11"})({textDecorationLine:"underline"});const ro=()=>{const n=B(),r=tt(),{isTablet:c}=Z(),{dydxAddress:l}=ot(),u=nt(),f=u==null?void 0:u[rt.dcHighestVolumeUsers],a=l&&(f==null?void 0:f.includes(l)),d=it(st.ffEnableAffiliates),v=s.useCallback(()=>{r(`${D.Portfolio}/${ge.Orders}`,{state:{from:D.Portfolio}})},[r]),i=dt(),h=at(lt);return e.jsxs("div",{children:[a&&e.jsx(R,{children:e.jsx(Et,{})}),e.jsx(R,{children:e.jsx(ct,{})}),e.jsx(R,{children:e.jsx(Mt,{})}),d&&l&&e.jsx(R,{children:e.jsx(ht,{})}),e.jsxs(Zt,{children:[e.jsx(me,{title:n({key:g.OPEN_POSITIONS})}),e.jsx(gt,{columnKeys:c?[p.Details,p.IndexEntry,p.PnL]:[p.Market,p.Size,p.Margin,p.UnrealizedPnl,p.RealizedPnl,p.AverageOpenAndClose,p.LiquidationAndOraclePrice,i&&p.Triggers,h&&p.Actions].filter(Y),currentRoute:D.Portfolio,navigateToOrders:()=>r(`${D.Portfolio}/${ge.Orders}`,{state:{from:D.Portfolio}}),showClosePositionAction:h,withOuterBorder:!0})]}),e.jsx(R,{children:e.jsx(zt,{header:e.jsx(me,{title:n({key:g.UNOPENED_ISOLATED_POSITIONS})}),onViewOrders:v})})]})},me=t(mt).withConfig({componentId:"sc-2jm7jm-0"})(["h3{font:var(--font-medium-medium);}"]),zt=t(ut).withConfig({componentId:"sc-2jm7jm-1"})(["margin-top:1rem;margin-bottom:1rem;> div{padding-left:1rem;}"]);var Zt=t(ft).withConfig({componentId:"sc-2jm7jm-2"})({marginTop:"1rem"});export{ro as Overview};
